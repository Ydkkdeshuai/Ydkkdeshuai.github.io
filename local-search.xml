<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>DSP28335</title>
    <link href="/2025/01/02/DSP28335_28377/"/>
    <url>/2025/01/02/DSP28335_28377/</url>
    
    <content type="html"><![CDATA[<h1 id="创建新工程"><a href="#创建新工程" class="headerlink" title="创建新工程"></a>创建新工程</h1><h1 id="时钟系统"><a href="#时钟系统" class="headerlink" title="时钟系统"></a>时钟系统</h1><ul><li>XCLKIN→SYSCLKOUT 设置</li></ul><p><img src="/../pic/image-20240516235417094.png" alt="image-20240516235417094"></p><p><img src="/../pic/image-20240516235423342.png" alt="image-20240516235423342"></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">InitSysCtrl</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">   <span class="comment">// Disable the watchdog</span></span><br><span class="line">   DisableDog();</span><br><span class="line"></span><br><span class="line">   <span class="comment">// Initialize the PLL control: PLLCR and DIVSEL</span></span><br><span class="line">   <span class="comment">// DSP28_PLLCR and DSP28_DIVSEL are defined in DSP2833x_Examples.h</span></span><br><span class="line">   InitPll(DSP28_PLLCR,DSP28_DIVSEL);  <span class="comment">//DSP28_PLLCR =10  DSP28_DIVSEL=2</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">// Initialize the peripheral clocks</span></span><br><span class="line">   InitPeripheralClocks();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>30M*10&#x2F;2&#x3D;150M</p><p><img src="/../pic/image-20240516235942003.png" alt="image-20240516235942003"></p><ul><li>时钟使能设置</li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">外设时钟打开设置</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">InitPeripheralClocks</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">   EALLOW;</span><br><span class="line"></span><br><span class="line"><span class="comment">// HISPCP/LOSPCP prescale register settings, normally it will be set to default values</span></span><br><span class="line">   SysCtrlRegs.HISPCP.all = <span class="number">0x0001</span>;</span><br><span class="line">   SysCtrlRegs.LOSPCP.all = <span class="number">0x0002</span>;<span class="comment">//Lowspeedclock=SYSCLKOUT/4=150/4=37.5MHZ;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// XCLKOUT to SYSCLKOUT ratio.  By default XCLKOUT = 1/4 SYSCLKOUT</span></span><br><span class="line">   <span class="comment">// XTIMCLK = SYSCLKOUT/2</span></span><br><span class="line">   XintfRegs.XINTCNF2.bit.XTIMCLK = <span class="number">1</span>;</span><br><span class="line">   <span class="comment">// XCLKOUT = XTIMCLK/2</span></span><br><span class="line">   XintfRegs.XINTCNF2.bit.CLKMODE = <span class="number">1</span>;</span><br><span class="line">   <span class="comment">// Enable XCLKOUT</span></span><br><span class="line">   XintfRegs.XINTCNF2.bit.CLKOFF = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Peripheral clock enables set for the selected peripherals.</span></span><br><span class="line"><span class="comment">// If you are not using a peripheral leave the clock off</span></span><br><span class="line"><span class="comment">// to save on power.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// Note: not all peripherals are available on all 2833x derivates.</span></span><br><span class="line"><span class="comment">// Refer to the datasheet for your particular device.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// This function is not written to be an example of efficient code.</span></span><br><span class="line"></span><br><span class="line">   SysCtrlRegs.PCLKCR0.bit.ADCENCLK = <span class="number">1</span>;    <span class="comment">// ADC</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">// *IMPORTANT*</span></span><br><span class="line">   <span class="comment">// The ADC_cal function, which  copies the ADC calibration values from TI reserved</span></span><br><span class="line">   <span class="comment">// OTP into the ADCREFSEL and ADCOFFTRIM registers, occurs automatically in the</span></span><br><span class="line">   <span class="comment">// Boot ROM. If the boot ROM code is bypassed during the debug process, the</span></span><br><span class="line">   <span class="comment">// following function MUST be called for the ADC to function according</span></span><br><span class="line">   <span class="comment">// to specification. The clocks to the ADC MUST be enabled before calling this</span></span><br><span class="line">   <span class="comment">// function.</span></span><br><span class="line">   <span class="comment">// See the device data manual and/or the ADC Reference</span></span><br><span class="line">   <span class="comment">// Manual for more information.</span></span><br><span class="line"></span><br><span class="line">   ADC_cal();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">   SysCtrlRegs.PCLKCR0.bit.I2CAENCLK = <span class="number">1</span>;   <span class="comment">// I2C</span></span><br><span class="line">   SysCtrlRegs.PCLKCR0.bit.SCIAENCLK = <span class="number">1</span>;   <span class="comment">// SCI-A</span></span><br><span class="line">   SysCtrlRegs.PCLKCR0.bit.SCIBENCLK = <span class="number">1</span>;   <span class="comment">// SCI-B</span></span><br><span class="line">   SysCtrlRegs.PCLKCR0.bit.SCICENCLK = <span class="number">1</span>;   <span class="comment">// SCI-C</span></span><br><span class="line">   SysCtrlRegs.PCLKCR0.bit.SPIAENCLK = <span class="number">1</span>;   <span class="comment">// SPI-A</span></span><br><span class="line">   SysCtrlRegs.PCLKCR0.bit.MCBSPAENCLK = <span class="number">1</span>; <span class="comment">// McBSP-A</span></span><br><span class="line">   SysCtrlRegs.PCLKCR0.bit.MCBSPBENCLK = <span class="number">1</span>; <span class="comment">// McBSP-B</span></span><br><span class="line">   SysCtrlRegs.PCLKCR0.bit.ECANAENCLK=<span class="number">1</span>;    <span class="comment">// eCAN-A</span></span><br><span class="line">   SysCtrlRegs.PCLKCR0.bit.ECANBENCLK=<span class="number">1</span>;    <span class="comment">// eCAN-B</span></span><br><span class="line"></span><br><span class="line">   SysCtrlRegs.PCLKCR0.bit.TBCLKSYNC = <span class="number">0</span>;   <span class="comment">// Disable TBCLK within the ePWM</span></span><br><span class="line">   SysCtrlRegs.PCLKCR1.bit.EPWM1ENCLK = <span class="number">1</span>;  <span class="comment">// ePWM1</span></span><br><span class="line">   SysCtrlRegs.PCLKCR1.bit.EPWM2ENCLK = <span class="number">1</span>;  <span class="comment">// ePWM2</span></span><br><span class="line">   SysCtrlRegs.PCLKCR1.bit.EPWM3ENCLK = <span class="number">1</span>;  <span class="comment">// ePWM3</span></span><br><span class="line">   SysCtrlRegs.PCLKCR1.bit.EPWM4ENCLK = <span class="number">1</span>;  <span class="comment">// ePWM4</span></span><br><span class="line">   SysCtrlRegs.PCLKCR1.bit.EPWM5ENCLK = <span class="number">1</span>;  <span class="comment">// ePWM5</span></span><br><span class="line">   SysCtrlRegs.PCLKCR1.bit.EPWM6ENCLK = <span class="number">1</span>;  <span class="comment">// ePWM6</span></span><br><span class="line">   SysCtrlRegs.PCLKCR0.bit.TBCLKSYNC = <span class="number">1</span>;   <span class="comment">// Enable TBCLK within the ePWM</span></span><br><span class="line"></span><br><span class="line">   SysCtrlRegs.PCLKCR1.bit.ECAP3ENCLK = <span class="number">1</span>;  <span class="comment">// eCAP3</span></span><br><span class="line">   SysCtrlRegs.PCLKCR1.bit.ECAP4ENCLK = <span class="number">1</span>;  <span class="comment">// eCAP4</span></span><br><span class="line">   SysCtrlRegs.PCLKCR1.bit.ECAP5ENCLK = <span class="number">1</span>;  <span class="comment">// eCAP5</span></span><br><span class="line">   SysCtrlRegs.PCLKCR1.bit.ECAP6ENCLK = <span class="number">1</span>;  <span class="comment">// eCAP6</span></span><br><span class="line">   SysCtrlRegs.PCLKCR1.bit.ECAP1ENCLK = <span class="number">1</span>;  <span class="comment">// eCAP1</span></span><br><span class="line">   SysCtrlRegs.PCLKCR1.bit.ECAP2ENCLK = <span class="number">1</span>;  <span class="comment">// eCAP2</span></span><br><span class="line">   SysCtrlRegs.PCLKCR1.bit.EQEP1ENCLK = <span class="number">1</span>;  <span class="comment">// eQEP1</span></span><br><span class="line">   SysCtrlRegs.PCLKCR1.bit.EQEP2ENCLK = <span class="number">1</span>;  <span class="comment">// eQEP2</span></span><br><span class="line"></span><br><span class="line">   SysCtrlRegs.PCLKCR3.bit.CPUTIMER0ENCLK = <span class="number">1</span>; <span class="comment">// CPU Timer 0</span></span><br><span class="line">   SysCtrlRegs.PCLKCR3.bit.CPUTIMER1ENCLK = <span class="number">1</span>; <span class="comment">// CPU Timer 1</span></span><br><span class="line">   SysCtrlRegs.PCLKCR3.bit.CPUTIMER2ENCLK = <span class="number">1</span>; <span class="comment">// CPU Timer 2</span></span><br><span class="line"></span><br><span class="line">   SysCtrlRegs.PCLKCR3.bit.DMAENCLK = <span class="number">1</span>;       <span class="comment">// DMA Clock</span></span><br><span class="line">   SysCtrlRegs.PCLKCR3.bit.XINTFENCLK = <span class="number">1</span>;     <span class="comment">// XTIMCLK</span></span><br><span class="line">   SysCtrlRegs.PCLKCR3.bit.GPIOINENCLK = <span class="number">1</span>;    <span class="comment">// GPIO input clock</span></span><br><span class="line"></span><br><span class="line">   EDIS;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>对有写保护寄存器的操作</li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span>  EALLOW asm(<span class="string">&quot; EALLOW&quot;</span>)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span>  EDIS   asm(<span class="string">&quot; EDIS&quot;</span>)</span></span><br></pre></td></tr></table></figure><h1 id="GPIO"><a href="#GPIO" class="headerlink" title="GPIO"></a>GPIO</h1><p>IO口分组：A组：0-31 B组：32-63 C组64-87</p><p>三类寄存器：控制、中断寄存器受保护</p><ul><li>18个控制寄存器(7(1+2+<strong>2</strong>+<strong>1</strong>+<strong>1</strong>)+7+<strong>4</strong>)</li></ul><p><img src="/../pic/image-20240517084645662.png" alt="image-20240517084645662"></p><blockquote><p> 6个功能控制寄存器(GPAMUX1&#x2F;2)：控制IO口复用  (2bit每IO口、2*88&#x2F;32&#x3D;6个寄存器，具体哪个功能对应哪个IO使用时查询。)</p></blockquote><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 开启上拉、打开IO复用</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">InitEPwm6Gpio</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">   EALLOW;</span><br><span class="line"></span><br><span class="line">    GpioCtrlRegs.GPAPUD.bit.GPIO10 = <span class="number">0</span>;    <span class="comment">// Enable pull-up on GPIO10 (EPWM6A)</span></span><br><span class="line">    GpioCtrlRegs.GPAPUD.bit.GPIO11 = <span class="number">0</span>;    <span class="comment">// Enable pull-up on GPIO11 (EPWM6B)</span></span><br><span class="line"></span><br><span class="line">    GpioCtrlRegs.GPAMUX1.bit.GPIO10 = <span class="number">1</span>;   <span class="comment">// Configure GPIO10 as EPWM6A</span></span><br><span class="line">    GpioCtrlRegs.GPAMUX1.bit.GPIO11 = <span class="number">1</span>;   <span class="comment">// Configure GPIO11 as EPWM6B</span></span><br><span class="line"></span><br><span class="line">    EDIS;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>3个 方向寄存器(GPADIR)  (2bit每IO口、2*64&#x2F;32&#x3D;4个寄存器)</p></blockquote><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">EALLOW;</span><br><span class="line">GpioCtrlRegs.GPCDIR.bit.GPIO68=<span class="number">1</span>;<span class="comment">//设置GPIO方向为输出</span></span><br><span class="line">EDIS;</span><br></pre></td></tr></table></figure><blockquote><p>4个限定寄存器 (限定采样时间，抗干扰的，一般没用)(1bit每IO口、1*88&#x2F;32&#x3D;3个寄存器)</p></blockquote><ul><li>12数据寄存器(GPADAT)  (4字每IO口、4*3&#x3D;12个寄存器)  (读当前IO高低、置位、清零、翻转)</li></ul><p><img src="/../pic/image-20240517084656490.png" alt="image-20240517084656490"></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">x=GpioDataRegs.GPADAT.GPIO0;             <span class="comment">//读寄存器高低           </span></span><br><span class="line">GpioDataRegs.GpioDataRegs.GPASET.GPIO0=<span class="number">1</span>;<span class="comment">//拉高          </span></span><br><span class="line">GpioDataRegs.GPACLEAR.GPIO0=<span class="number">1</span>;           <span class="comment">//清零</span></span><br><span class="line">GpioDataRegs.GPATOGGLE.GPIO0=<span class="number">1</span>;          <span class="comment">//翻转</span></span><br></pre></td></tr></table></figure><ul><li>中断源寄存器(节没用到)</li></ul><p><img src="/../pic/image-20240517084710882.png" alt="image-20240517084710882"></p><h2 id="GPIO配置步骤"><a href="#GPIO配置步骤" class="headerlink" title="GPIO配置步骤"></a>GPIO配置步骤</h2><p>①GPIO时钟</p><p>②复用</p><p>③方向</p><p>④上拉</p><p>⑤输出</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*******************************************************************************</span></span><br><span class="line"><span class="comment">* 函 数 名         : GPIO_Init</span></span><br><span class="line"><span class="comment">* 函数功能         : GPIO初始化函数</span></span><br><span class="line"><span class="comment">* 输    入         : 无</span></span><br><span class="line"><span class="comment">* 输    出         : 无</span></span><br><span class="line"><span class="comment">*******************************************************************************/</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">GPIO_Init</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    EALLOW;</span><br><span class="line">    SysCtrlRegs.PCLKCR3.bit.GPIOINENCLK = <span class="number">1</span>;<span class="comment">// 开启GPIO时钟</span></span><br><span class="line"></span><br><span class="line">    GpioCtrlRegs.GPCMUX1.bit.GPIO68=<span class="number">0</span>;<span class="comment">//设置为通用GPIO功能</span></span><br><span class="line">    GpioCtrlRegs.GPCDIR.bit.GPIO68=<span class="number">1</span>;<span class="comment">//设置GPIO方向为输出</span></span><br><span class="line">    GpioCtrlRegs.GPCPUD.bit.GPIO68=<span class="number">0</span>;<span class="comment">//使能GPIO上拉电阻</span></span><br><span class="line"></span><br><span class="line">    GpioDataRegs.GPCSET.bit.GPIO68=<span class="number">1</span>;<span class="comment">//拉高</span></span><br><span class="line">    EDIS;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="外部中断"><a href="#外部中断" class="headerlink" title="外部中断"></a>外部中断</h1><p>中断基本概念：优先级 中断向量  PIE</p><h2 id="CPU级中断"><a href="#CPU级中断" class="headerlink" title="CPU级中断"></a>CPU级中断</h2><p><img src="/../pic/image-20240517143046879.png" alt="中断向量表"></p><p><img src="/../pic/image-20240517155723014.png" alt="image-20240517155723014"></p><p>IER寄存器：开关CPU中断</p><p>IFR寄存器：CPU中断标志</p><p><img src="/../pic/image-20240517155929114.png" alt="image-20240517155929114"></p><p>总中断</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">EINT;                                       <span class="comment">// 开全局中断</span></span><br></pre></td></tr></table></figure><h2 id="PIE中断"><a href="#PIE中断" class="headerlink" title="PIE中断"></a>PIE中断</h2><p>CPU中断的秘书把96个中断分别分到XINT1-XINT12上</p><p><img src="/../pic/image-20240517164143638.png" alt="PIE表"></p><p>PIEIERx：</p><p>PIEIFRx：</p><p>PIEACK：12位对应12根线</p><p><img src="/../pic/image-20240517164333173.png" alt="image-20240517164333173"></p><h1 id="定时器"><a href="#定时器" class="headerlink" title="定时器"></a>定时器</h1><h2 id="定时器中断"><a href="#定时器中断" class="headerlink" title="定时器中断"></a>定时器中断</h2><h1 id="EAdc"><a href="#EAdc" class="headerlink" title="EAdc"></a>EAdc</h1><h1 id="EPwm"><a href="#EPwm" class="headerlink" title="EPwm"></a>EPwm</h1><p>7个子模块()</p><p><strong>模块功能：</strong></p><ul><li>两路输出(A B)</li><li>独立输出  互补输出</li><li>EPWM1 EPWM2能控制相位</li><li>死区功能</li><li>高频斩波</li><li>故障保护</li><li>略</li></ul><p>模块图</p><p><img src="/../pic/image-20240517111754574.png" alt="image-20240517111754574"></p><p><img src="/../pic/image-20240517111822571.png" alt="image-20240517111822571"></p><h2 id="时间基准子模块TB-TB负责计数功能"><a href="#时间基准子模块TB-TB负责计数功能" class="headerlink" title="时间基准子模块TB(TB负责计数功能)"></a>时间基准子模块TB(TB负责计数功能)</h2><p><img src="/../pic/image-20240517114306034.png" alt="image-20240517114306034"></p><p><img src="/../pic/image-20240517114342140.png" alt="image-20240517114342140"></p><p>分频设置(周期设置)：</p><p><img src="/../pic/image-20240517114618941.png" alt="image-20240517114618941"></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">EPwm6Regs.TBCTL.bit.HSPCLKDIV=x;</span><br><span class="line">EPwm6Regs.TBCTL.bit.CLKDIV=y;</span><br></pre></td></tr></table></figure><p>$$<br>t_{CLK} &#x3D; \frac{1}{TBCLK}\</p><p>周期 T &#x3D;（TPRD+1）*t_{CLK}   （上升&#x2F;下降情况）<br>$$</p><blockquote></blockquote><ul><li>映射寄存器</li></ul><p><img src="/../pic/image-20240517115539326.png" alt="image-20240517115539326"></p><ul><li>不同epwm之间同步和相位控制</li></ul><p>同步信号流向</p><p><img src="/../pic/image-20240517120044192.png" alt="image-20240517120044192"></p><p><strong>ePWM初始相位设置</strong></p><p>TBCTL[PHSEN]&#x3D;1 设置TBPHS相位</p><p><strong>软件同步多个Epwm模块时钟</strong></p><blockquote><p>使能ePWM时钟</p><p>清零TBCTL[TBCLKSYNC]</p><p>配置ePWM</p><p>置位TBCTL[TBCLKSYNC]</p></blockquote><h2 id="比较功能子模块CC-CC负责计数器寄存器与比较寄存器进行比较的功能"><a href="#比较功能子模块CC-CC负责计数器寄存器与比较寄存器进行比较的功能" class="headerlink" title="比较功能子模块CC(CC负责计数器寄存器与比较寄存器进行比较的功能)"></a>比较功能子模块CC(CC负责计数器寄存器与比较寄存器进行比较的功能)</h2><p>TBCTR和CMPA CMPB比较产生高低信号。</p><p><img src="/../pic/image-20240517125719790.png" alt="image-20240517125719790"></p><p><img src="/../pic/image-20240517125736138.png" alt="image-20240517125736138"></p><ul><li>CMPA CMPB映射寄存器  (CMPCTL[SHDWAMODE]   CMPCTL[LOADAMODE]  CMPCTL[LOADBMODE]   TBCTL[PHSDIR]控制)</li></ul><p>①TBCTL[PHSDIR]&#x3D;0 和之前的计数方向一样  TBCTL[PHSDIR]&#x3D;1 重置方向</p><h2 id="动作限定子模块AQ"><a href="#动作限定子模块AQ" class="headerlink" title="动作限定子模块AQ"></a>动作限定子模块AQ</h2><p>(负责当比较事件发生时,波形输出引脚该如何变化,是跳变成低电平还是跳变成高电平)</p><p><img src="/../pic/image-20240517130543652.png" alt="AQ框图"></p><p><img src="/../pic/image-20240517130626057.png" alt="输入输出信号图"></p><h2 id="死区控制子模块DB"><a href="#死区控制子模块DB" class="headerlink" title="死区控制子模块DB"></a>死区控制子模块DB</h2><p>(为了防止开关器件在开通或关断的瞬间同时导通形成短路, PWM需要死区控制,即对PWM的上升沿和下降沿进行一定的延时)</p><p><img src="/../pic/image-20240517131314598.png" alt="DB框图"></p><p><img src="/../pic/image-20240517131337547.png" alt="信号图"></p><p>DBCTL[OUTMODE]：开启上升&#x2F;下降延时</p><p>DBCTL[INMODE]：延时信号源</p><p>DBCTL[POSEL]：极性翻转</p><h2 id="上升延时时间计算"><a href="#上升延时时间计算" class="headerlink" title="上升延时时间计算"></a>上升延时时间计算</h2><p>$$<br>t_{delay-rise} &#x3D; DBRED<em>T_{BCLK}\<br>t_{delay-fall} &#x3D; DBFED</em>T_{BCLK}\<br>T_{死区时间} &#x3D; t_{delay-rise}+t_{delay-fall}<br>$$</p><p>斩波控制子模块PC、事件触发子模块ET、故障捕获子模块TZ（暂时未用）</p><h2 id="配置示例"><a href="#配置示例" class="headerlink" title="配置示例()"></a>配置示例()</h2><p>频率：fpwm、全桥驱动、死区时间4％</p><p>已知SYSCLKOUT &#x3D; 150M</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">EPWM1_Init</span><span class="params">(Uint32 fpwm)</span></span><br><span class="line">&#123;</span><br><span class="line">    EALLOW;</span><br><span class="line">    SysCtrlRegs.PCLKCR0.bit.TBCLKSYNC = <span class="number">0</span>;   <span class="comment">// Disable TBCLK within the ePWM</span></span><br><span class="line">    SysCtrlRegs.PCLKCR1.bit.EPWM1ENCLK = <span class="number">1</span>;  <span class="comment">// ePWM6</span></span><br><span class="line">    EDIS;</span><br><span class="line"></span><br><span class="line">    InitEPwm1Gpio();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Setup Sync</span></span><br><span class="line">    EPwm1Regs.TBCTL.bit.SYNCOSEL =TB_CTR_ZERO;  <span class="comment">// Pass through</span></span><br><span class="line">    <span class="comment">// Allow each timer to be sync&#x27;ed</span></span><br><span class="line">    EPwm1Regs.TBPHS.half.TBPHS =<span class="number">0</span>;</span><br><span class="line">    EPwm1Regs.TBCTL.bit.PHSEN = TB_ENABLE;</span><br><span class="line"></span><br><span class="line">    EPwm1Regs.TBCTR = <span class="number">0x0000</span>;                  <span class="comment">// Clear counter</span></span><br><span class="line">    tbprd = <span class="number">15000000</span>/fpwm;</span><br><span class="line">    EPwm1Regs.TBPRD = tbprd;<span class="comment">//TPWM = (TBPRD+1)*(1/TBCLK) ,fpwm = tbclk/(tbprd+1)</span></span><br><span class="line">    EPwm1Regs.TBCTL.bit.CTRMODE = TB_COUNT_UP;    <span class="comment">// Count up</span></span><br><span class="line">    EPwm1Regs.TBCTL.bit.HSPCLKDIV=TB_DIV1;<span class="comment">//不分频 TBCLK = SYSCLKOUT / ( (2*HSPCLKDIV) * (2^CLKDIV) );此时TBCLK=150M/1/2=75M</span></span><br><span class="line">    EPwm1Regs.TBCTL.bit.CLKDIV=TB_DIV1;<span class="comment">//不分频;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// Setup shadow register load on ZERO</span></span><br><span class="line">    EPwm1Regs.CMPCTL.bit.SHDWAMODE = CC_SHADOW;</span><br><span class="line">    EPwm1Regs.CMPCTL.bit.SHDWBMODE = CC_SHADOW;</span><br><span class="line">    EPwm1Regs.CMPCTL.bit.LOADAMODE = CC_CTR_ZERO;</span><br><span class="line">    EPwm1Regs.CMPCTL.bit.LOADBMODE = CC_CTR_ZERO;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Set Compare values</span></span><br><span class="line">    EPwm1Regs.CMPA.half.CMPA = <span class="number">0</span>;    <span class="comment">// Set compare A value</span></span><br><span class="line">    EPwm1Regs.CMPB = <span class="number">0.5</span>*tbprd;              <span class="comment">// Set Compare B value</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// Set actions   产生50占空比方波</span></span><br><span class="line">    EPwm1Regs.AQCTLA.bit.CAU = AQ_SET;            <span class="comment">// Set PWM1A on Zero</span></span><br><span class="line">    EPwm1Regs.AQCTLA.bit.CBU = AQ_CLEAR;          <span class="comment">// Clear PWM1A on event A, up count</span></span><br><span class="line"><span class="comment">//    EPwm1Regs.AQCTLB.bit.ZRO = AQ_SET;            // Set PWM1B on Zero</span></span><br><span class="line"><span class="comment">//    EPwm1Regs.AQCTLB.bit.CBU = AQ_CLEAR;          // Clear PWM1B on event B, up count</span></span><br><span class="line"></span><br><span class="line">    EPwm1Regs.ETSEL.bit.INTSEL = ET_CTR_ZERO;     <span class="comment">// Select INT on Zero event</span></span><br><span class="line">    EPwm1Regs.ETSEL.bit.INTEN = <span class="number">1</span>;  <span class="comment">// Enable INT</span></span><br><span class="line">    EPwm1Regs.ETPS.bit.INTPRD = ET_1ST;           <span class="comment">// Generate INT on 1st event</span></span><br><span class="line"></span><br><span class="line">    EPwm1Regs.DBCTL.bit.OUT_MODE = <span class="number">0x3</span>;      <span class="comment">// Disable dead band(In idle,make sure EPWMA and EPWMB both can be forced to low)</span></span><br><span class="line">    EPwm1Regs.DBCTL.bit.IN_MODE = DBA_ALL;          <span class="comment">// EPWMA is the source for both falling-edge and rising-edge delay</span></span><br><span class="line">    EPwm1Regs.DBCTL.bit.POLSEL = DB_ACTV_HIC;       <span class="comment">// Active high complementary (AHC). EPWMxB is inverted</span></span><br><span class="line">    EPwm1Regs.DBFED = tbprd*<span class="number">0.04</span>/<span class="number">2</span>;                            <span class="comment">// Falling edge delay time:353ns=6.66ns*53=353ns  内核150MHZ</span></span><br><span class="line">    EPwm1Regs.DBRED = tbprd*<span class="number">0.04</span>/<span class="number">2</span>;<span class="comment">//</span></span><br><span class="line"></span><br><span class="line">    EALLOW;</span><br><span class="line">    SysCtrlRegs.PCLKCR0.bit.TBCLKSYNC = <span class="number">1</span>;         <span class="comment">// Start all the timers synced</span></span><br><span class="line">    EDIS;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>$$<br>P(x)<br>$$</p><h1 id="ECan"><a href="#ECan" class="headerlink" title="ECan"></a>ECan</h1><h1 id=""><a href="#" class="headerlink" title=""></a></h1><p><strong>参考：</strong></p><blockquote><p>《手把手教你学DSP28335》 《TMS320F28335技术手册》 <a href="https://pan.baidu.com/s/1a4YqSSydq_HgcDT4zL6SrA?pwd=1234">https://pan.baidu.com/s/1a4YqSSydq_HgcDT4zL6SrA?pwd=1234</a></p></blockquote>]]></content>
    
    
    <categories>
      
      <category>工具</category>
      
      <category>开发工具</category>
      
    </categories>
    
    
    <tags>
      
      <tag>DSP</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Git</title>
    <link href="/2025/01/02/Git/"/>
    <url>/2025/01/02/Git/</url>
    
    <content type="html"><![CDATA[<p>参考：</p><p>菜鸟教程：<a href="https://www.runoob.com/git/git-tutorial.html">https://www.runoob.com/git/git-tutorial.html</a></p><p>廖雪峰Git：<a href="https://www.liaoxuefeng.com/wiki/896043488029600">https://www.liaoxuefeng.com/wiki/896043488029600</a></p>]]></content>
    
    
    <categories>
      
      <category>工具</category>
      
      <category>开发工具</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Git</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>游戏</title>
    <link href="/2025/01/02/%E6%B8%B8%E6%88%8F/"/>
    <url>/2025/01/02/%E6%B8%B8%E6%88%8F/</url>
    
    <content type="html"><![CDATA[<h1 id="Camile"><a href="#Camile" class="headerlink" title="Camile"></a>Camile</h1><h2 id="自身优势"><a href="#自身优势" class="headerlink" title="自身优势"></a>自身优势</h2><p>Q：</p><p>控制抵消(猜武器E)</p><p>加速  间歇高伤</p><p>W：(W开始空了就说明累了该休息了)</p><blockquote><p>记住对面位移，破骸骨</p><p>越塔藏E</p></blockquote><p>E：</p><blockquote><p>长E控制抵消</p><p>短E拉开防止被拉断(诺手、腕豪)</p><p>逃跑(对线不随便交E,除非知道打野位置)</p><p>踢侧边(剑魔Q3，剑姬W)</p><p>骗技能(诺手E，剑姬W，剑魔Q3)</p></blockquote><p>R：</p><blockquote><p>躲技能</p><p>越塔躲塔攻击</p><p>打团框AD金身</p></blockquote><p>被动：盾快好上去换血</p><p>骸骨：防止被破</p><p>不灭：Q拉开换血。</p><h3 id="中后期（塔掉对线结束）："><a href="#中后期（塔掉对线结束）：" class="headerlink" title="中后期（塔掉对线结束）："></a>中后期（塔掉对线结束）：</h3><p>1️⃣换扫描。      压缩对方视野，防止肆意抓人。<br>2️⃣看地图。      是否被抓，队友是否打团。<br>3️⃣小龙。          务必参团，，蓄q2再上。</p><p>①单带能越塔杀：看对面位置，防被抓。单杀推塔。</p><p>②不能越塔杀：带线过去抓人5V4</p><h1 id="杰斯"><a href="#杰斯" class="headerlink" title="杰斯"></a>杰斯</h1><p>1级W行进速率换血，抢线</p><p>EQ消耗</p><h2 id="剑魔："><a href="#剑魔：" class="headerlink" title="剑魔："></a>剑魔：</h2><p>2-4优势，回推线到三项小劣</p><p>剑气：不被戳。&#x2F;前期可用不灭Q对换。</p><p>Q：左右走卡a骗Q1。   贴脸用加速躲Q2Q3剑锋<br>W：e上去不a&#x2F;Q走位躲w。</p><p>E：有E不W，除非逼位置<br>换血：<br>1️⃣ 卡a骗q躲，往后走躲q2e\或者靠近躲q2e\W换Q2，E踢侧边AQ出链子。<br>2️⃣ 有优势无脑E打一套，第二套兵线进塔越塔</p><h2 id="剑姬："><a href="#剑姬：" class="headerlink" title="剑姬："></a>剑姬：</h2><p>破绽：走位卡破绽</p><p>Q：不灭Q换Q破绽，R断Q。E挂墙等Q位移。</p><p>W：E踢侧面，QW骗W</p><p>E：</p><p>R：剑姬ALL IN的底牌，对面塔下别乱踢。</p><p>​R卡破绽</p><p>换血：卡破绽抢线等Q上来对换Q，卡破绽兵堆对A，拉开后趁他QCD W刮，侧向刮不吃W。</p><p>有优势：QW骗W结束Q2踢</p><h2 id="腕豪："><a href="#腕豪：" class="headerlink" title="腕豪："></a>腕豪：</h2><p>前期不打架保守换血</p><p>被动：换血不被右拳起手，不然被动盾挡不下来        CD</p><p>W：R躲，换完一套，躲真伤                                        CD</p><p>E：不被拉小兵、短E拉开                                              CD</p><p>R：防止拉长E断E</p><p>换血：</p><p>前提W破骸骨，</p><p>①对Q他左拳起手，QQ拉开，躲W</p><p>②被E到AQQ拉开，躲W</p><h2 id="蛮王："><a href="#蛮王：" class="headerlink" title="蛮王："></a>蛮王：</h2><p>疾跑点燃，不带点燃杀不掉</p><p>没怒气拿线再换血，有怒气放线。</p><p>不对A</p><h2 id="螃蟹："><a href="#螃蟹：" class="headerlink" title="螃蟹："></a>螃蟹：</h2><p>QW行进速率Q2，E控制抵消背</p><p>E，R躲拉背</p><p>打两套</p><h1 id="格温："><a href="#格温：" class="headerlink" title="格温："></a>格温：</h1><p><img src="/../pic/image-20240529210107213.png" alt="Counter图"></p><h1 id="永恩："><a href="#永恩：" class="headerlink" title="永恩："></a>永恩：</h1><h1 id="月男"><a href="#月男" class="headerlink" title="月男"></a>月男</h1><p>第一波：红绿紫：禁锢接Q</p><p>卡武器技能</p><blockquote><p>蓝红白 小爆发</p><p>红白绿：</p><p>白绿紫：禁锢接Q    留白刀骗人</p><p>绿紫蓝：留人</p><p>紫蓝红：留人</p></blockquote><p><strong>AOE 爆发</strong>：蓝刀R闪AQ</p><p><strong>双A</strong>：</p><p>基础：QR双A</p><p>绿紫：R距离长起手，定住绿QA</p><p>蓝红白：三A</p>]]></content>
    
    
    <categories>
      
      <category>游戏</category>
      
    </categories>
    
    
    <tags>
      
      <tag>LOL</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Altium designer</title>
    <link href="/2025/01/02/AD%E8%BD%AF%E4%BB%B6/"/>
    <url>/2025/01/02/AD%E8%BD%AF%E4%BB%B6/</url>
    
    <content type="html"><![CDATA[<h1 id="一、原理图库"><a href="#一、原理图库" class="headerlink" title="一、原理图库"></a>一、原理图库</h1><h2 id="学习思路-P2"><a href="#学习思路-P2" class="headerlink" title="学习思路(P2)"></a>学习思路(P2)</h2><ul><li>学什么：</li></ul><blockquote><p>①AD工程  快捷键操作   </p><p>②原理图库  原理图</p><p>③PCB库      画PCB</p></blockquote><ul><li>怎么掌握快、牢：</li></ul><blockquote><p>反复：快捷键多练、规则多看</p><p>步骤：多画</p></blockquote><h2 id="安装中英文切换-3P"><a href="#安装中英文切换-3P" class="headerlink" title="安装中英文切换(3P)"></a>安装中英文切换(3P)</h2><h2 id="工程组成-P4"><a href="#工程组成-P4" class="headerlink" title="工程组成(P4)"></a>工程组成(P4)</h2><p>工程文件、原理图库文件、原理图、PCB库、PCB</p><h2 id="元件库"><a href="#元件库" class="headerlink" title="元件库"></a>元件库</h2><p>组成：管脚(管脚号-和PCB库的管脚号对应、管教名称)、位号、边框、名称、描述、封装(也可以后面统一添加)</p><h2 id="元件库阻容创建-P5"><a href="#元件库阻容创建-P5" class="headerlink" title="元件库阻容创建(P5)"></a>元件库阻容创建(P5)</h2><p>操作：设置管脚参数、设置格点参数、shift拖动按序增加、隐藏管脚名称(非管脚号)、选中器件 Ctrl+方向移动</p><p>有点麻烦、一般导入别人创建好的。</p><h2 id="IC类-P6"><a href="#IC类-P6" class="headerlink" title="IC类(P6)"></a>IC类(P6)</h2><p>操作：全选移动、管脚名字旋转、对齐等间距快捷键 </p><h2 id="排针类-P7"><a href="#排针类-P7" class="headerlink" title="排针类(P7)"></a>排针类(P7)</h2><p>操作：(管脚号、名称)阵列粘贴</p><h2 id="光耦、二极管多边形类-P8"><a href="#光耦、二极管多边形类-P8" class="headerlink" title="光耦、二极管多边形类(P8)"></a>光耦、二极管多边形类(P8)</h2><p>操作：画多边形</p><h2 id="调用已有工程模型-P9"><a href="#调用已有工程模型-P9" class="headerlink" title="调用已有工程模型(P9)"></a>调用已有工程模型(P9)</h2><blockquote><p>已有原理图生成原理图库，原理图库再复制粘贴</p></blockquote><h1 id="二、原理图"><a href="#二、原理图" class="headerlink" title="二、原理图"></a>二、原理图</h1><h2 id="放元件两种方法-P10"><a href="#放元件两种方法-P10" class="headerlink" title="放元件两种方法(P10)"></a>放元件两种方法(P10)</h2><p>①打开原理图库，点元件放置</p><p>②原理图库拖元件</p><h2 id="按模块摆器件-P11"><a href="#按模块摆器件-P11" class="headerlink" title="按模块摆器件(P11)"></a>按模块摆器件(P11)</h2><p>操作：复制器件(shift拖动)、加大图纸、按模块摆器件大致位置、画分割线(均匀)</p><p>其他操作：拖动时按X镜像、选中器件按MS移动、选中器件按A对其</p><h2 id="连接导线、Netlable-P12"><a href="#连接导线、Netlable-P12" class="headerlink" title="连接导线、Netlable(P12)"></a>连接导线、Netlable(P12)</h2><p>操作：连接导线、放电源端口、地、网络标签</p><p>其他操作：原理图库错了可以改了再更新原理图</p><h2 id="Value值核对-P13"><a href="#Value值核对-P13" class="headerlink" title="Value值核对(P13)"></a>Value值核对(P13)</h2><p>填电阻值、电容值、电感值</p><p>操作：位号处理(原理图标注TAA)，Value值核对</p><h2 id="元件封装-P14"><a href="#元件封装-P14" class="headerlink" title="元件封装(P14)"></a>元件封装(P14)</h2><p>两种操作：</p><p>①原理图中选中器件，添加封装</p><p>②封装管理器、按名称给&#x2F;Value排序元件、添加封装</p><h2 id="原理图编译、设置规则检查-P15"><a href="#原理图编译、设置规则检查-P15" class="headerlink" title="原理图编译、设置规则检查(P15)"></a>原理图编译、设置规则检查(P15)</h2><p>操作：工程选项，error reporting ，</p><p>常见错误：</p><blockquote><p>位号重复</p><p>网络悬浮：网络没对应到线上</p><p>单端网络：网络没连接到其他网络、加NO ERC解决</p></blockquote><p>其他操作：Alt+左键 高亮网络</p><h1 id="三、PCB元件库"><a href="#三、PCB元件库" class="headerlink" title="三、PCB元件库"></a>三、PCB元件库</h1><h2 id="CHIP封装-P16"><a href="#CHIP封装-P16" class="headerlink" title="CHIP封装(P16)"></a>CHIP封装(P16)</h2><h2 id="IC类封装-P17"><a href="#IC类封装-P17" class="headerlink" title="IC类封装(P17)"></a>IC类封装(P17)</h2><h2 id="IPC封装创建向导-P18"><a href="#IPC封装创建向导-P18" class="headerlink" title="IPC封装创建向导(P18)"></a>IPC封装创建向导(P18)</h2><h2 id="调用已有工程模型pcb元件库-P19"><a href="#调用已有工程模型pcb元件库-P19" class="headerlink" title="调用已有工程模型pcb元件库(P19)"></a>调用已有工程模型pcb元件库(P19)</h2><p>已有PCB文件生成PCB元件库，从生成的库粘贴过来。</p><p>常见PCB元件库下载：</p><p><a href="https://www.pcbbar.com/?mod=viewthread&tid=12023&highlight=PCB%EF%BF%BD%EF%BF%BD%EF%BF%BD%EF%BF%BD">https://www.pcbbar.com/?mod=viewthread&amp;tid=12023&amp;highlight=PCB%B3%AC%BC%B6</a></p><p><a href="https://www.iclib.com/">https://www.iclib.com/</a></p><p>嘉立创商城</p><h2 id="3D模型的创建和导入-P20"><a href="#3D模型的创建和导入-P20" class="headerlink" title="3D模型的创建和导入(P20)"></a>3D模型的创建和导入(P20)</h2><h1 id="四、原理图导入PCB、器件摆放"><a href="#四、原理图导入PCB、器件摆放" class="headerlink" title="四、原理图导入PCB、器件摆放"></a>四、原理图导入PCB、器件摆放</h1><h2 id="从原理图导入PCB元件到PCB文件-P21"><a href="#从原理图导入PCB元件到PCB文件-P21" class="headerlink" title="从原理图导入PCB元件到PCB文件(P21)"></a>从原理图导入PCB元件到PCB文件(P21)</h2><p>操作：PCBimport or SCH update、报告变更导出EXCEL解决报错(PCB封装没有&#x2F;封装管脚数量&#x2F;名字对不上)</p><h2 id="绿色报错消除-P22"><a href="#绿色报错消除-P22" class="headerlink" title="绿色报错消除(P22)"></a>绿色报错消除(P22)</h2><p>绿色报错：提示距离挨得太近(更改规则)</p><p>操作：更改绿色报错规则(关闭设计规则检查)，只保留电气性质的规则，后面制板再设置制板规则、</p><h2 id="PCB板框评估-P23"><a href="#PCB板框评估-P23" class="headerlink" title="PCB板框评估(P23)"></a>PCB板框评估(P23)</h2><p>操作：确定板框大小(在矩形框内排列比器件范围稍微大一点，快捷键设置成F6)、机械层画板框、设置原点EOS、标记线性尺寸、重新定义板框DSD、板子层数设计(四层增加PWR，GND层)层叠管理器 正片层(画的线就是铜)、负片层(画的线不是铜)、芯板、PP片、</p><h2 id="快捷键设置-P24"><a href="#快捷键设置-P24" class="headerlink" title="快捷键设置(P24)"></a>快捷键设置(P24)</h2><p>常用快捷键设置：</p><blockquote><p>对齐：上下左右  8 2 4 6</p><p>等间距： 7 9</p></blockquote><p><img src="/../pic/image-20240523231346282.png" alt="image-20240523231346282"></p><p>其他操作：为什么要差分线、分线怎么布、滴泪怎么操作</p><h2 id="元件布局-P25"><a href="#元件布局-P25" class="headerlink" title="元件布局(P25)"></a>元件布局(P25)</h2><p>目的：美观+后续布线便利</p><p>操作：交叉选择模式，按模块原则原理图部分，F6排布PCB元件、创建网络类DC快捷键，隐藏电源线，查看信号流向，根据信号流向排布器件(导线最短，流畅)</p><h2 id="PCB布局-P26-P28"><a href="#PCB布局-P26-P28" class="headerlink" title="PCB布局(P26-P28)"></a>PCB布局(P26-P28)</h2><p>操作：先摆放大元件，再微调放小器件、根据信号流向排布器件(导线最短，流畅，减少寄生电阻，电感)，再对齐好看</p><p>其他操作：选中器件生成联合、修改位号大小、修改位号位置(定位器件文本)、显示隐藏单个网络、交叉探针(TC)、元件左移(选中Ctrl+shift+←)</p><h2 id="添加线Class、设计参数、规则设置-线距、线宽、过孔-P29"><a href="#添加线Class、设计参数、规则设置-线距、线宽、过孔-P29" class="headerlink" title="添加线Class、设计参数、规则设置(线距、线宽、过孔)(P29)"></a>添加线Class、设计参数、规则设置(线距、线宽、过孔)(P29)</h2><p>操作：</p><h1 id="五、PCB规则设置、布线"><a href="#五、PCB规则设置、布线" class="headerlink" title="五、PCB规则设置、布线"></a>五、PCB规则设置、布线</h1><p>其他操作：先泪滴再铺铜</p><h1 id="六、PCB规则检查、输出打板"><a href="#六、PCB规则检查、输出打板" class="headerlink" title="六、PCB规则检查、输出打板"></a>六、PCB规则检查、输出打板</h1><h1 id="其他知识："><a href="#其他知识：" class="headerlink" title="其他知识："></a>其他知识：</h1><p><strong>嘉立创工程导出AD工程(原理图、PCB、3D图)：</strong></p><p>参考：<a href="https://blog.csdn.net/weixin_56121234/article/details/133916341">https://blog.csdn.net/weixin_56121234/article/details/133916341</a></p><p><strong>去耦电容排布顺序：</strong></p><p>先大后小，等效模型：</p><h1 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h1><p>视频教程：<a href="https://www.bilibili.com/video/BV16t411N7RD?p=4&vd_source=b9b657465c6a8feca7c2a3699702b4c7">https://www.bilibili.com/video/BV16t411N7RD?p=4&amp;vd_source=b9b657465c6a8feca7c2a3699702b4c7</a></p><p>PCB联盟网：<a href="https://www.pcbbar.com/">https://www.pcbbar.com/</a>    下载库   下载别人的图   论坛</p><p>电子书：《ALTIUM DESIGNER 19（中文版）电子设计速成实战宝典》<a href="https://pan.baidu.com/s/1e6e2d-1ZlNMTiABTC8VxGw?pwd=1234">https://pan.baidu.com/s/1e6e2d-1ZlNMTiABTC8VxGw?pwd=1234</a> </p><p>文件：</p><h1 id="嘉立创EDA"><a href="#嘉立创EDA" class="headerlink" title="嘉立创EDA"></a>嘉立创EDA</h1><p>参考：</p><p>《官方使用文档》：<a href="https://prodocs.lceda.cn/cn/faq/editor/index.html">https://prodocs.lceda.cn/cn/faq/editor/index.html</a></p>]]></content>
    
    
    <categories>
      
      <category>工具</category>
      
      <category>开发工具</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Altium designer</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>年度规划—秦帅</title>
    <link href="/2025/01/02/%E5%B9%B4%E5%BA%A6%E8%A7%84%E5%88%92%E2%80%94%E7%A7%A6%E5%B8%85/"/>
    <url>/2025/01/02/%E5%B9%B4%E5%BA%A6%E8%A7%84%E5%88%92%E2%80%94%E7%A7%A6%E5%B8%85/</url>
    
    <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">  <script id="hbeData" type="hbeData" data-hmacdigest="d328e8bb2363c0dd29bd233233436b0ce8e8a011a4f5342b847dc899917ef8d9">635085eb4c623103f9cd5174d710a34f9e73358e6df01fd0e2fd2b935943be9d445c4bef1fc52d8dcadab87d02d3be5fababfe6b6e751019127f8741eaec4ae4044e712b2e1ca8f93d424d5b457e60719424bc31e2aa37f5f756cd29e1735d2e012ca4bc52cda127f03e788b6c80b9fc7c96d0e066d3e45fb0c019028a2b0af63afb45456d57b4cc35746a31317133c4c533720a99437742eebfebeed17b11fcc64f3c651424cf9f981f1838a5b5e8f2cc76989fb0f0a855708317e4bc1b120c4769da2764a9e1d6a379ab6e55001c5d2d15624e867d4df605be6f596e7f24662192e9df347618a1c0e5178c73d2d163d1a8c5b79e35515d0fc8e5a5da0e447897f96bd13e05558e48e0e8c52e35fd20cc6b0d5b9e96750d9c3ee4f2b65ced7ca740c18c15a043a52d9c2eb9a025ecef229732079ee0501217bfba5dfeece8c1d99cda2f4266a10f42b658be6fb878948da24cef0964a5594061b0caa74bd3e34d1ac4d3510c8acac17186ba754df329338cd6d77f2277a7a1ce822bf21fc85ae0e394a3804cf1968c271434653381d647fd5c0fd92ce8a6a40c3e8cf315a6cbbe64572e14667e9e67f31440e2c29451d7ef521b81502f0cef4a8101deb33f9bc98b21b4ea986c6466a67121c22d1f42dc1a953d6afdb743e705a1a3f11ade9c99b09e2d4698212481a59f036f64d24eb8f66fe3405cca6dc9bdece1a189ffeb96ed5e103ba6135bb18d206ec1ceb0c6</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">Hey, password is required here.</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
    
    
    <categories>
      
      <category>自我成长</category>
      
    </categories>
    
    
    <tags>
      
      <tag>年度规划、目标</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>开关电源设计原理</title>
    <link href="/2025/01/02/%E5%BC%80%E5%85%B3%E7%94%B5%E6%BA%90%E5%8E%9F%E7%90%86/"/>
    <url>/2025/01/02/%E5%BC%80%E5%85%B3%E7%94%B5%E6%BA%90%E5%8E%9F%E7%90%86/</url>
    
    <content type="html"><![CDATA[<p>简介：对拓扑的知识进行介绍</p><h1 id="损耗计算"><a href="#损耗计算" class="headerlink" title="损耗计算"></a>损耗计算</h1><p>电路总损耗 &#x3D; 线路寄生电阻损耗 + 开关管损耗(通态损耗+ 动态损耗) </p><ul><li>动态损耗</li></ul><p>最好情况：(导通电压先降为零  偶or  关断电流先降为零)</p><p><img src="/../pic/image-20240613111710326.png" alt="导通电压先降为零"></p><p><img src="/../pic/image-20240613111726970.png" alt="关断电流先降为零"></p><p>一般情况：(电压电流同时变换开始，结束)</p><p><img src="/../pic/image-20240613111647700.png" alt="电压电流同时变换开始，结束"></p><p>最坏情况：(导通电流先升高、关断电流先升高)</p><p><strong>开关器件损耗特性（不同器件 开通损耗&#x2F;关断损耗 占主导，实现ZVS&#x2F;ZCS，谐振腔呈感性还是容性）：</strong></p><p>Si MOSFET：开通损耗&gt;&gt;关断损耗。所以需要ZVS。</p><p>PN结二极管：关断损耗&gt;&gt;开通损耗。</p><p>IGBJ BJT：同样是PN结原因，关断损耗很大。但BJT一般用于低频场合。</p><p>GaN MOSTFET：开关损耗很小。但也需要软开关技术。</p><h1 id="LLC谐振变换器"><a href="#LLC谐振变换器" class="headerlink" title="LLC谐振变换器"></a>LLC谐振变换器</h1><p><strong>软开关：</strong>零电压开通 or 零电流关断</p><p><strong>LLC拓扑优点：</strong>能实现、LLC实现的是零电压开通。适应宽输入电压范围，负载变化</p><p><strong>零电压开关要求：</strong>负载对于桥口呈感性，桥口电流滞后于电压，使谐振槽路工作在感性状态。</p><p>参考文献：</p><p><a href="https://zhuanlan.zhihu.com/p/146692511">https://zhuanlan.zhihu.com/p/146692511</a></p><p><a href="https://zhuanlan.zhihu.com/p/559726373">https://zhuanlan.zhihu.com/p/559726373</a>   这个很好</p><p><a href="https://kns.cnki.net/kcms/detail/detail.aspx?dbcode=CMFD&filename=1024427766.nh">https://kns.cnki.net/kcms/detail/detail.aspx?dbcode=CMFD&amp;filename=1024427766.nh</a> 这个最详细</p><h1 id=""><a href="#" class="headerlink" title=""></a></h1><h1 id="软开关模态分析-移相全桥"><a href="#软开关模态分析-移相全桥" class="headerlink" title="软开关模态分析(移相全桥)"></a>软开关模态分析(移相全桥)</h1><p>软开关：</p><p>ZVS：一般是利用感性工作点，电流之后电压，电流把下一个管子寄生并联电容电放完，然后电流流过体二极管，把MOSFET两端电压钳位到0V，实现零电压开通。</p><p>电流对于MOSFET3条支路的流过顺序，电容放电，体二极管，MOSTET。</p><p>ZCS：利用容性工作点，电流降为零后一小段时间，电流反向流过把MOSFET载流子重置时把MOSFET关断。</p><p>软开关意义：减少开关损耗，让频率可以更高，让储能器件的体积可以更小。 </p><h2 id="副边为全波整流"><a href="#副边为全波整流" class="headerlink" title="副边为全波整流"></a>副边为全波整流</h2><p><strong>前提：</strong></p><p>①超前桥臂结电容：$C_a &#x3D; C_b &#x3D; C_1$ 滞后桥臂结电容： $C_c &#x3D; C_d &#x3D;C_2$</p><p>②输出滤波电感 $L_2&gt;&gt; \frac{L_1}{n^2}$，负载电流近似不变。</p><p>③原副边匝比n：1</p><p><img src="/../pic/image-20240627085635166.png" alt="全桥拓扑"></p><p>总共12模态</p><p><img src="/../pic/image-20240627092526146.png" alt="模态波形"></p><p>初始状态：</p><p>$t_0$前，原边$S_a、S_d$导通、副边 $D_{rect1}导通、D_{rect2}关断$。</p><p>所以 $V_{Ca} &#x3D;V_{Cd}&#x3D; 0$   $V_{Cb} &#x3D;V_{Cc}&#x3D; U_i$ </p><p><img src="/../pic/image-20240627090441333.png" alt="t0前时刻状态"></p><p><strong>模态1：</strong>$t_0(S_a关断)-t_1(U_{cb}电流下降到0，D_b开通)$</p><p>初始状态： $V_{Ca} &#x3D;V_{Cd}&#x3D; 0$   $V_{Cb} &#x3D;V_{Cc}&#x3D; U_i$ </p><p>$S_1$关断， 此时 $S_d$开通、$D_{rect1}$导通。</p><p><img src="/../pic/image-20240627092407659.png" alt="模态1等效电路"></p><p><img src="/../pic/%E5%8E%9F%E8%BE%B9%E7%AD%89%E6%95%88%E7%94%B5%E8%B7%AF.jpg" alt="原边等效电路"></p><p>$i_p$给$C_a$充电，$C_b$放电。$V_B &#x3D; 0$，$V_{Ca} + V_{AB} &#x3D; U_i$，$V_{Ca}↑，V_{A}↓，V_{AB}↓$。</p><p>因为 $L_2→∞$，$负载电流i_{L_2}近似不变$。$V_{Ca} + V_{AB} &#x3D; U_i、V_{Ca} + V_{Cb} &#x3D; U_i$，$V_{Ca} ↑，V_A↓，V_{AB}↓$。</p><p>$U_{ca}(t) &#x3D; \frac{i_p(t-t_0)}{2C_1}$</p><p>$U_{cb}(t) &#x3D; U_i - \frac{i_p(t-t_0)}{2C_1}$</p><p>$i_{p}(t) &#x3D; \frac{2U_iC1}{t_1-t_0}(D_b刚好开通死区就结束条件下)&#x3D;i_{励磁电流}(可忽略) + \frac{i_{负载电流}}{n}$</p><p>放电时间近似 $t_放 &#x3D; \frac{2U_iC1n}{i{负载电流}}$</p><p>所以死区时间需要持续到原边电流把电容电压放完，另一管才能开通。</p><p>$t_{deadzone}&gt;t_放$</p><p><strong>模态2：</strong>$t_0(S_b开通)-t_1(S_d关断)$</p><p><img src="/../pic/image-20240627111915905.png" alt="模态2"></p><p>$i_p &#x3D; \frac{i_{L2}(t)}{n}$</p><p><img src="/../pic/%E5%8E%9F%E8%BE%B9%E7%AD%89%E6%95%88%E7%94%B5%E8%B7%AF2.jpg" alt="原边等效电路"></p><p><strong>模态3：</strong>$t_0(S_d关断)-t_1(U_{cc}电流下降到0，D_c开通)$</p><p><img src="/../pic/image-20240627111933657.png" alt="模态3"></p><p> $C_d充电 ，C_c放电$，关断时刻$i_{L1} &#x3D; I_1$，$U_{Cd} &#x3D; 0$，$U_{Cc} &#x3D; U_i$，副边等效到原边阻抗谐振。 直到$U_{Cc}&#x3D;0$。</p><p><img src="/../pic/%E5%8E%9F%E8%BE%B9%E7%AD%89%E6%95%88%E7%94%B5%E8%B7%AF3.jpg" alt="原边等效电路"></p><p><strong>模态4：</strong>$t_0(S_c开通)-t_1(D_b D_c下降到零、D_b D_c截止)$</p><p><img src="/../pic/image-20240627111941870.png" alt="模态4"></p><p>$S_c开通，U_{AB}&lt;0$，原边电压反向，副边电压也反向，副边$D_{rect2}$电流增加，但小于$i_{L2}$，多于电流流过 $D_{rect1}$，$i_{L2}&#x3D;i_{D_{rect1}} ↓+ i_{D_{rect2}} ↑$，此模态直到$i_p$减小到零 $C_b C_c$续流结束。由$S_c S_b$导通。</p><p><img src="/../pic/%E5%8E%9F%E8%BE%B9%E7%AD%89%E6%95%88%E7%94%B5%E8%B7%AF4-5.jpg" alt="原边等效电路4-5"></p><p><strong>模态5：</strong>$t_0(S_c S_b电流从零开始)-t_1(S_c S_b电流增大到负载电流、D_{rect1}电流减到0，完全关断，全由D_{rect2}导电)$</p><p><img src="/../pic/image-20240627111949670.png" alt="模态5"></p><p><img src="/../pic/%E5%8E%9F%E8%BE%B9%E7%AD%89%E6%95%88%E7%94%B5%E8%B7%AF4-5-1719536978418-3.jpg" alt="原边等效电路4-5"></p><p>$S_c S_b$导通，同时$i_{L2}&#x3D;i_{D_{rect1}} ↓+ i_{D_{rect2}} ↑$，$i_{D_{rect2}}$继续增大，直到等于$i_{L2}$，二极管$D_{rect1}$截止。</p><p><strong>模态6：</strong>$t_0(D_{rect1}电流减到0，完全关断)-t_1(S_b关断)$</p><p><img src="/../pic/image-20240627111957574.png" alt="模态6"></p><p><img src="/../pic/%E5%8E%9F%E8%BE%B9%E7%AD%89%E6%95%88%E7%94%B5%E8%B7%AF4-1719470163686-7.jpg" alt="原边等效电路"></p><p>$S_c S_b$导通，电流继续增大，直到 $S_b关断$进入下半个周期。</p><p>参考：周嫔.宽输入恒流&#x2F;恒压全桥变换器研究[D].导师：张东来.哈尔滨工业大学,2022.</p><h2 id="WPT系统软开关分析"><a href="#WPT系统软开关分析" class="headerlink" title="WPT系统软开关分析"></a>WPT系统软开关分析</h2><p>副边整流二极管不会被钳位是，负载反射阻抗抑制都在。</p><p>相当于少了模态4和5。</p><p>续流二极管换流之后就进入模态6。</p><h1 id="傅旻帆电力电子课"><a href="#傅旻帆电力电子课" class="headerlink" title="傅旻帆电力电子课"></a>傅旻帆电力电子课</h1><h2 id="串联谐振变换器"><a href="#串联谐振变换器" class="headerlink" title="串联谐振变换器"></a>串联谐振变换器</h2><p><strong>软开关 + SRC谐振电路</strong></p><p>二阶系统响应</p><p>组合得到时域响应</p><p>不同器件 开关损耗主要是 ZVS 还是ZCS作用好？</p><p>调频技术（等效）</p><ul><li><p>软开关</p></li><li><p>图解LC谐振电路</p></li><li><p>负载测不控整流串联谐振波形时域分析（十分关键，有助于分析其他电路波形）</p></li></ul><p>分析模态变化，根据模态变化画根轨迹，把根轨迹连起来就得到根轨迹，即电流电压波形。</p><p>不同的开关频率得到不同的根轨迹，所以无穷个开关频率有无穷个根轨迹。</p><ul><li>整流侧 基波近似 等效内阻计算方法</li></ul><ul><li>LCR谐振增益推导，根据增益图来设计电路特性参数</li></ul><p>分析方法总结：</p><p>时域分析法：根据零初始条件，激励，电路模态建立微分方程，求解方程。</p><p>平衡态电感伏秒平衡   电容安秒平衡</p><p>图解LC谐振电路</p><p>频域分析法：选取感兴趣频率 阻抗等效，折算到原边。 </p><h3 id="不控整流侧基波分量等效电阻"><a href="#不控整流侧基波分量等效电阻" class="headerlink" title="不控整流侧基波分量等效电阻"></a>不控整流侧基波分量等效电阻</h3><blockquote><p>条件：忽略谐波</p></blockquote><p><img src="/../pic/image-20240707140324077.png" alt="不控整流"></p><p><img src="/../pic/image-20240707140359991.png" alt="交流侧波形"></p><p><strong>按功率相等推导：</strong></p><p>交流侧基波电压：$V_{ac} &#x3D;\frac{4}{\pi}V_osin(wt)$ </p><p>直流侧基波电压： $V_o$</p><p>$(\frac{2\sqrt2}{\pi})^2 &#x2F;R_{ac}(交流侧功率)  &#x3D; \frac{V^2_o}{R_l}$→ $R_{ac} &#x3D; \frac{8}{\pi^2}R_l(直流侧功率)$</p><h3 id="增益-频率曲线"><a href="#增益-频率曲线" class="headerlink" title="增益-频率曲线"></a>增益-频率曲线</h3><p><img src="/../pic/image-20240707141243757.png" alt="原边交流侧等效图"></p><p>输入：$V_{in}$ </p><p>输出：$V_{ac}$</p><p>谐振腔增益：$M &#x3D; \frac{V_{ac}}{V_{in}}&#x3D; \frac{R_{ac}}{R_{ac} + \frac{1}{j w c_s} + j w L}$</p><p><img src="/../pic/image-20240707141651695.png" alt="归一化增益曲线"></p><p><strong>无功功率带来的特性：</strong></p><p>损耗升高：有无功分量在寄生电阻上产生热量</p><p>电压电流应力要求更高</p><p>让谐振腔工作在弱感性 就是 用一部分无功 来换取 开关损耗。</p><blockquote><p>导通损耗↑ </p><p>牺牲一点增益</p><p>器件电压电流应力升高</p></blockquote><blockquote><p>MOSFET 开通损耗会更小  这部分收益更高</p></blockquote><p><strong>确定变换器工作区间：</strong></p><p>负载范围→品质因数Q线</p><p>输入范围→增益M线</p><p><strong>已知输入电压范围、输出电压、功率范围求参数</strong></p><p> <img src="/../pic/image-20240707145721488.png" alt="参数设计步骤"></p><h2 id="并联谐振变换器"><a href="#并联谐振变换器" class="headerlink" title="并联谐振变换器"></a>并联谐振变换器</h2><p><img src="/../pic/image-20240704204916000.png" alt="PRC拓扑"></p><p>电感→∞，电感小纹波近似为电流源。</p><p><img src="/../pic/image-20240704205135735.png" alt="后级等效电流源"></p><p> <img src="/../pic/image-20240704205351579.png" alt="四个模态 波形"></p><p><img src="/../../../../Paper/%E5%91%A8%E6%8A%A5/image-20240704205851868.png" alt="四种模态波形"></p><h2 id="LLC-谐振变换器"><a href="#LLC-谐振变换器" class="headerlink" title="LLC 谐振变换器"></a>LLC 谐振变换器</h2><p>软开关 死区  同步整流 高阶谐振</p><p>LLC相比一般PWM convertor 特点：</p><p>能适应宽范围输入电压、宽负载特性</p><h3 id="串联谐振问题"><a href="#串联谐振问题" class="headerlink" title="串联谐振问题"></a>串联谐振问题</h3><p><img src="/../pic/image-20240707152547439.png" alt="串联谐振增益图"></p><blockquote><p>正常输入$V_{in}$，要保持$V_o$不变，（$R_l小，Q高$）只能工作在比弱感性还要感的区间，导致无功太多，且关断电流太大，损耗过高，把低电压&#x2F;纹波导致低电压（不长工作点）放在理想弱感性点</p></blockquote><blockquote><p>对于轻载，要维持相同的增益，开关管工作频率会很高，器件损耗可能提高</p></blockquote><h3 id="并联谐振问题"><a href="#并联谐振问题" class="headerlink" title="并联谐振问题"></a>并联谐振问题</h3><p><img src="/../pic/image-20240707153231157.png" alt="串联谐振增益图"></p><blockquote><p>也存在串联谐振1问题</p></blockquote><blockquote><p>轻载调制问题不存在</p></blockquote><h3 id="串并联LCC谐振"><a href="#串并联LCC谐振" class="headerlink" title="串并联LCC谐振"></a>串并联LCC谐振</h3><p><img src="/../pic/image-20240707153700544.png" alt="串并联谐振增益图"></p><h3 id="LLC串并联谐振"><a href="#LLC串并联谐振" class="headerlink" title="LLC串并联谐振"></a>LLC串并联谐振</h3><p><strong>优点：</strong></p><blockquote><p>全负载ZVS，负载与电感电流无关</p></blockquote><blockquote><p> 原边ZVS 副边CS→低开关损耗</p></blockquote><blockquote><p>导通损耗小，宽范围弱感性。</p></blockquote><h3 id="模态分析"><a href="#模态分析" class="headerlink" title="模态分析"></a>模态分析</h3><p><img src="/../pic/image-20240707161054129.png" alt="t0-t1"></p><p><a href="https://www.bilibili.com/video/BV14e4y1E7PW/?spm_id_from=333.1007.top_right_bar_window_history.content.click">https://www.bilibili.com/video/BV14e4y1E7PW/?spm_id_from=333.1007.top_right_bar_window_history.content.click</a></p><p>从40分钟继续</p><h2 id="LLC-谐振变换器-1"><a href="#LLC-谐振变换器-1" class="headerlink" title="LLC 谐振变换器"></a>LLC 谐振变换器</h2><p><img src="/../pic/image-20250308111623481.png" alt="供电结构"></p><p>PFC：减小电网输出无功功率。</p><p><img src="/../pic/image-20250305113043567.png" alt="掉电情况，维持供电时间，存储数据"></p><p>$P_{out}*t_{维持时间} &#x3D; \frac{1}{2}C(V_{out}^2-V_{min}^2)$ </p><p>为了减小电容体积→减小电容→同等功率下维持相同时间$V_{min}$更小（ 更宽输入电压范围 ）</p><h1 id="EMI-滤波器-设计"><a href="#EMI-滤波器-设计" class="headerlink" title="EMI 滤波器 设计"></a>EMI 滤波器 设计</h1><h2 id="定义："><a href="#定义：" class="headerlink" title="定义："></a>定义：</h2><p>插入损耗： $IL &#x3D; 20log^{\frac{v_1}{v_2}}$</p><p><img src="/../pic/image-20241017155354404.png" alt="设计步骤"></p><h2 id="确定插入损耗："><a href="#确定插入损耗：" class="headerlink" title="确定插入损耗："></a>确定插入损耗：</h2><h2 id="确定滤波器拓扑结构："><a href="#确定滤波器拓扑结构：" class="headerlink" title="确定滤波器拓扑结构："></a>确定滤波器拓扑结构：</h2><p><img src="/../pic/image-20241017160005592.png" alt="阻抗失配"></p><p>共模阻抗25Ω 和 差模阻抗100Ω都属于高阻性质。</p><h2 id="确定级数："><a href="#确定级数：" class="headerlink" title="确定级数："></a>确定级数：</h2><p>根据标准和实际测试结果确定插入损耗曲线，判断需要几级滤波器 </p><h2 id="设计滤波器参数："><a href="#设计滤波器参数：" class="headerlink" title="设计滤波器参数："></a>设计滤波器参数：</h2><p>X电容：</p><p>Y电容：</p><p>共模电感：</p><p>差模电感：</p><h2 id="考虑寄生参数的插入损耗："><a href="#考虑寄生参数的插入损耗：" class="headerlink" title="考虑寄生参数的插入损耗："></a>考虑寄生参数的插入损耗：</h2><h1 id="DC—DC变换器"><a href="#DC—DC变换器" class="headerlink" title="DC—DC变换器"></a>DC—DC变换器</h1><h2 id="Buck"><a href="#Buck" class="headerlink" title="Buck"></a>Buck</h2><ul><li>大前提</li></ul><p>理想元件：</p><p>二极管没有管压降</p><p>电感无寄生参数，且足够大，使电感电流直流分量&gt;&gt;交流分量</p><p>电容无寄生参数，且足够大，使电感直流分量全部流入 $R$，交流分量全部流入$C$，稳定输出电压能力强。</p><p>开关管瞬间通断，无动态损耗。</p><ul><li>拓扑图</li></ul><p><img src="/../pic/image-20250324104938279.png" alt="Buck拓扑图"></p><h3 id="模态分析："><a href="#模态分析：" class="headerlink" title="模态分析："></a>模态分析：</h3><h4 id="电感电流连续"><a href="#电感电流连续" class="headerlink" title="电感电流连续"></a>电感电流连续</h4><p>模态①：</p><p><img src="/../pic/image-20250324105118741.png" alt="模态①"></p><p>S导通：$V_L&#x3D;V_i - V_o$ ,电感电流由电压积分上升。电流先负再正，$V_C$由电流积分先放电再充电，电压$V_C$先下降再上升。</p><p><img src="/../pic/image-20250324105207377.png" alt="模态②"></p><p>S关断：二极管续流，$V_L&#x3D;- V_o$ ,电感电流由电压积分下降。电流先正再负，$V_C$由电流积分先充电再放电，电压$V_C$先上升再下降。</p><p><img src="/../pic/image-20250324105402281.png" alt="波形图"></p><blockquote><p>$i_S + i_D &#x3D; i_L$</p></blockquote><blockquote><p>$Vs + V_D &#x3D; V_i$</p></blockquote><p><img src="/../pic/image-20240604122420900.png" alt="S、D波形图"></p><p><strong>电压增益：</strong>电感伏秒平衡，单周期内电感电流变化量为0；</p><p>$\frac{1}{L} \int_{0}^{DT}V_i - V_o d_t &#x3D; \frac{1}{L} \int_{DT}^{T}  V_o d_t→V_o &#x3D; DV_i$</p><p><strong>电流增益：</strong></p><p>能量守恒：$I_o &#x3D; \frac{I_i}{D}$</p><p><strong>电感电流直流分量：</strong></p><p>电感直流分量等于 R上电流</p><p>$I_L &#x3D; I_O &#x3D; \frac{U_o}{R}$</p><p><strong>电感电流交流分量峰峰值：</strong></p><p>$\frac{1}{L} \int_{0}^{DT}V_i - V_o d_t $</p><p><strong>电容电压直流分量：</strong></p><p>电容电压直流分量等于 R上电压</p><p>$V_C &#x3D; V_O$</p><p><strong>电容电压交流分量(纹波)峰峰值：</strong></p><p>$\frac{1}{C} \int_{\frac{DT}{2}}^{\frac{3DT}{2}}i_L d_t &#x3D; $</p><h4 id="器件选型："><a href="#器件选型：" class="headerlink" title="器件选型："></a><strong>器件选型：</strong></h4><h5 id="MOSFET："><a href="#MOSFET：" class="headerlink" title="MOSFET："></a>MOSFET：</h5><p>$U_{max}&#x3D;U_{in}$</p><p>$I_{max}&#x3D;I_L + \frac{\Delta I_L}{2}$</p><p>$I_{rms}&#x3D;\sqrt{\int_{0}^{T} (I_L + \frac{\Delta I_L}{2})^2d_t}$</p><p>取1.5倍裕量。</p><h5 id="二极管"><a href="#二极管" class="headerlink" title="二极管"></a>二极管</h5><p>用同步整流方案效率更高，二极管导通压降0.7V，损耗太大。</p><p>$U_{max}&#x3D;U_{in}$</p><p>$I_{max}&#x3D;I_L + \frac{\Delta I_L}{2} &#x3D; \frac{V_i D T}{R_L} + \frac{(1-D)V_i}{2L}$   </p><p>$I_{rms}&#x3D;\sqrt{\int_{0}^{T} (I_L + \frac{\Delta I_L}{2})^2d_t}$</p><p>取1.5倍裕量。</p><h5 id="输出电感"><a href="#输出电感" class="headerlink" title="输出电感"></a>输出电感</h5><p>根据纹波电流和直流电流的相对值（电感电流纹波率）确定，一般r取0.4电感效益(体积和纹波)最高</p><p>纹波电流：$r*I_L&#x3D; \frac{U_O(1-D)T}{L} $</p><p>饱和电流：$I_{max}&#x3D;I_L + \frac{\Delta I_L}{2}$</p><p>电流有效值：$I_{rms}&#x3D;\sqrt{\int_{0}^{T} (i_l)^2d_t}$</p><p>电流最大值：$I_{max}&#x3D;I_L + \frac{\Delta I_L}{2}$</p><p>感值：$r &#x3D; \frac{\frac{U_O(1-D)T}{L}}{I_L}&lt;0.4$确定感值，当负载电流最小时，纹波率最大。</p><h5 id="输出电容"><a href="#输出电容" class="headerlink" title="输出电容"></a>输出电容</h5><p><strong>容量选取：</strong></p><p>纹波电压和输出电压确定：</p><p>ESR大会增大纹波电压，可以多个电容并联减小ESR</p><p>直流偏置特性好</p><p>耐压：输出电压范围</p><h5 id="母线电容："><a href="#母线电容：" class="headerlink" title="母线电容："></a>母线电容：</h5><p>理想电压源：</p><blockquote><p>输出电流无限</p></blockquote><blockquote><p>输出电压不受负载影响→输入电压纹波率$r$比较小</p></blockquote><p>纹波率$r$：</p><p>耐压：$\bar{U}<em>{in} + \Delta{U</em>{in}}$</p><p>直流偏置特性好</p><p>低ESR</p><h3 id="电感电流断续"><a href="#电感电流断续" class="headerlink" title="电感电流断续"></a>电感电流断续</h3><p>电感交流电流变化一半大于直流分量：$ \frac{\Delta I_L}{2}&gt;I_L $</p><p>伏秒平衡：$V_o &#x3D; $</p>]]></content>
    
    
    <categories>
      
      <category>开关电源</category>
      
      <category>原理</category>
      
    </categories>
    
    
    <tags>
      
      <tag>开关电源</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>旅行攻略</title>
    <link href="/2025/01/02/%E6%97%85%E8%A1%8C%E6%94%BB%E7%95%A5/"/>
    <url>/2025/01/02/%E6%97%85%E8%A1%8C%E6%94%BB%E7%95%A5/</url>
    
    <content type="html"><![CDATA[<h1 id="杭州九堡→沈家湾客运码头→嵊泗泗礁岛-李柱山码头"><a href="#杭州九堡→沈家湾客运码头→嵊泗泗礁岛-李柱山码头" class="headerlink" title="杭州九堡→沈家湾客运码头→嵊泗泗礁岛(李柱山码头)"></a>杭州九堡→沈家湾客运码头→嵊泗泗礁岛(李柱山码头)</h1><p>9号14.10从重庆大学出发—10号5.59到杭州南站</p><p>11日7.50从九堡出发—到沈家湾—买轮渡票13点到嵊泗本岛泗礁岛→ 坐公交车(1小时)去酒店放行李</p><h2 id="嵊泗本岛泗礁岛（8-11-8-14）"><a href="#嵊泗本岛泗礁岛（8-11-8-14）" class="headerlink" title="嵊泗本岛泗礁岛（8.11-8.14）"></a>嵊泗本岛泗礁岛（8.11-8.14）</h2><p><img src="/../pic/image-20240806170357833.png" alt="泗礁岛景点"></p><p><strong>住宿：</strong></p><blockquote><p>基湖沙滩、东海渔村：离主要景点比较近。但是吃住性价比菜园镇较差。</p><p>菜园镇：属于嵊泗市中心，性价比高。但是离景点比较远。需要打车  or 公交</p></blockquote><p><strong>交通：</strong>打车  公交(运营时间5.40-6.30) 小电驴(20&#x2F;小时 or 100&#x2F;天 )交警不抓两人</p><p>杭州到嵊泗—在巴巴快巴公众号买</p><p>船票—在嵊泗客运公众号买</p><h2 id="主要突出景点"><a href="#主要突出景点" class="headerlink" title="主要突出景点"></a><strong>主要突出景点</strong></h2><p>4-9月 禁渔期海鲜很贵  11月去能吃海鲜</p><p><strong>左岸公路：</strong>骑小电驴吹海风看风景拍照。</p><p><strong>六井潭+和尚套(六合朝阳景区)：</strong>门票90。</p><p><strong>边礁村：</strong></p><p><strong>大悲山：</strong></p><p><strong>东海渔村：</strong>  </p><p><strong>南长徐沙滩&#x2F;基湖沙滩：</strong>都要收费</p><p><strong>花鱼礁：</strong>六点前到看日落</p><h2 id="吃饭"><a href="#吃饭" class="headerlink" title="吃饭"></a>吃饭</h2><p>早苗早餐</p><p><img src="/../pic/image-20240806182847822.png" alt="image-20240806182847822"></p><p><img src="/../pic/image-20240806182910273.png" alt="image-20240806182910273"></p><p><strong>面：</strong></p><p>逸香海鲜面疙瘩</p><p>海里面</p><p>乐多面馆（第一次吃还行、第二次一般）</p><p>侯老师家的店</p><p><strong>海鲜：</strong></p><p>基湖沙滩美食街：小贵</p><p>丰收渔港</p><p>舢板海鲜</p><h2 id="行程安排"><a href="#行程安排" class="headerlink" title="行程安排"></a>行程安排</h2><p>10号：7.50 从九堡出发(提前准备食物)→下午一点到李柱山码头→公交车到菜园镇吃饭(逸香海鲜面疙瘩)→公交车去酒店4点（询问租电瓶车哪里便宜、能不能载人、问问民宿有偿管饭）→步行出发左岸公路看日落、再回来吃饭(舢板海鲜)。定好租两天电瓶车</p><p>11号：4.00起床提车左岸公路看日出（电瓶车出发）→六合朝阳景区→午饭()+休息补觉→下午三点出门沿着下半区去花鱼礁看日落→菜园镇晚饭(如果民宿有可以吃民宿)→吹风</p><p>12号：边焦村→黄沙海滩→午饭→午休→基湖沙滩→晚饭闲逛（可以自己买让老板加工）</p><p>13号：早上睡醒8.30点、收拾东西吃饭到李家驻码头，等船回航。</p><p>参考文献：</p><p><a href="https://www.bilibili.com/video/BV1ZJ4m137zz/?spm_id_from=333.788&vd_source=b9b657465c6a8feca7c2a3699702b4c7">https://www.bilibili.com/video/BV1ZJ4m137zz/?spm_id_from=333.788&amp;vd_source=b9b657465c6a8feca7c2a3699702b4c7</a></p><p><a href="https://www.bilibili.com/video/BV1sf421X7f3/?spm_id_from=333.337.search-card.all.click&vd_source=b9b657465c6a8feca7c2a3699702b4c7">https://www.bilibili.com/video/BV1sf421X7f3/?spm_id_from=333.337.search-card.all.click&amp;vd_source=b9b657465c6a8feca7c2a3699702b4c7</a></p><p><a href="https://www.bilibili.com/video/BV11t4y1Z7Jw?p=3&vd_source=b9b657465c6a8feca7c2a3699702b4c7">https://www.bilibili.com/video/BV11t4y1Z7Jw?p=3&amp;vd_source=b9b657465c6a8feca7c2a3699702b4c7</a></p><p>要带的东西：</p><p>花露水 防晒  拖鞋（不去沙滩用不着）</p><h2 id="一些景点图片："><a href="#一些景点图片：" class="headerlink" title="一些景点图片："></a>一些景点图片：</h2><h3 id="左岸公路："><a href="#左岸公路：" class="headerlink" title="左岸公路："></a>左岸公路：</h3><h3 id="六井潭："><a href="#六井潭：" class="headerlink" title="六井潭："></a>六井潭：</h3><p><img src="/../pic/image-20240806171240762.png" alt="image-20240806171240762"></p><p><img src="/../pic/image-20240821091249384.png" alt="image-20240821091249384"></p><p><img src="/../pic/image-20240821091257230.png" alt="image-20240821091257230"></p><h3 id="和尚套："><a href="#和尚套：" class="headerlink" title="和尚套："></a><strong>和尚套：</strong></h3><p><img src="/../pic/image-20240821091313263.png" alt="image-20240821091313263"></p><p><img src="/../pic/image-20240821091316769.png" alt="image-20240821091316769"></p><p><img src="/../pic/image-20240821091319848.png" alt="image-20240821091319848"></p><p><img src="/../pic/image-20240821091322856.png" alt="image-20240821091322856"></p><p><img src="/../pic/image-20240821091325897.png" alt="image-20240821091325897"></p><h4 id="和尚套咖啡屋"><a href="#和尚套咖啡屋" class="headerlink" title="和尚套咖啡屋"></a><strong>和尚套咖啡屋</strong></h4><p><img src="/../pic/image-20240821091328898.png" alt="image-20240821091328898"></p><p><img src="/../pic/image-20240821091332093.png" alt="image-20240821091332093"></p><p><img src="/../pic/image-20240821091334865.png" alt="image-20240821091334865"></p><p><img src="/../pic/image-20240821091337628.png" alt="image-20240821091337628"></p><p><img src="/../pic/image-20240821091340006.png" alt="image-20240821091340006"></p><p><img src="/../pic/image-20240821091342855.png" alt="image-20240821091342855"></p><h3 id="边礁村："><a href="#边礁村：" class="headerlink" title="边礁村："></a><strong>边礁村：</strong></h3><p><img src="/../pic/image-20240821091346826.png" alt="image-20240821091346826"></p><p><img src="/../pic/image-20240821091350074.png" alt="image-20240821091350074"></p><p><img src="/../pic/image-20240821091352777.png" alt="image-20240821091352777"></p>]]></content>
    
    
    <categories>
      
      <category>旅行攻略</category>
      
    </categories>
    
    
    <tags>
      
      <tag>旅行攻略</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>技能树&amp;日记随笔</title>
    <link href="/2025/01/02/%E6%97%A5%E8%AE%B0%E9%9A%8F%E7%AC%94/"/>
    <url>/2025/01/02/%E6%97%A5%E8%AE%B0%E9%9A%8F%E7%AC%94/</url>
    
    <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">  <script id="hbeData" type="hbeData" data-hmacdigest="69d3497ced547454561ba28e4ee8addb5c0cb6e8460e8e808aff4bb90f57d40e">635085eb4c623103f9cd5174d710a34f9e73358e6df01fd0e2fd2b935943be9da5d5a139e0190dfb63981fac09c784701e36b9e963d8658f8333cda4fa959d35d92ff86d03b8d1fff8560175993235feb55e6d78c35279f075dc78068a011b11590b5b9a4d3ecfcba070af25267a6b3c3899eccf281442eaa20a79c10fa5b637f6eb81ce1ce2679f4a4c90ba1308de486eed41acf9a6d28ebd5ec35ee5ce965260c97c6c44d132989a15e6d1a45971b3081dea96d8d00441633a3df65dc172cde748842cc689c2f767db5235756dad6c8dd1ef03a15d2ebe73731c90abcc35002b3d34057e7a0511fede38e766bae3f91b7f937f78febd77c2d211d4a621abf88dcfa6240c96232087158b8f0d5e23727601c49f38ac58dd2116dc3beba795d8c255fca1f2df25c994392ee37a8032b9f147c6373971cc1893f5395f1a01a84b45e3bbdeb53249b763d71d5bb95ca20a9712704b6f00fc1b1adb0b47c5976f026a4c26a50a90204a5f449972426b4684871bbd51a9d3d818fca59100d3a96c32f09938dc9147ebae2876a5968f1aea5e63ff178317039832d7686c9cd088cc0c124f7f38d6dd46fa6f9d6aefc51eec308a31ba49d0ec3db1ea43f6747b1c2779b460b1b8cfcf9a6a59175fe7edab9a7ee6b006a9ff12c586a0448e66f75bae07f858097922bf5e3cd457bcfab7b4fce70faeb784207a93b4b85abee3e1890e7b4f0b7e350344ff209019416a50b6b4dda693e25a475b6928b8230909225fa8b0a02591786dffa211fc45715c032e505b2a9374f5407a31764d624ff3e062e37a1a7970cdc51b72ba0446d42363c9fcf3efde46b13b64aa26703c41451912b9dd75154de0dbe7baca9d96512793589db179c449e359d5518203d3b5e3e04ac81c8aa8f2aeb7a0f074a5658ecc86a8c59589205a0da881b12d1c9c2dbe846dc3172389884e4fd838614cbf5e34e54244e39f4adec8f7147bb719ca5b8385b03c40b35b12b52c2a20fd1310b7623550860d56a75e8a29750a1fdf76a4e59f1a156306a5ff778a9da144f4790b84ca94299fbd44c9cf2e90b73bde150f65e2472c3394b1e81be44f9a58258338effd6f4cb26e1c9489d8f3765295a90a91536eaf0417ab89a087e73b0fb7b2eb18b468c23c30a4e06611041b2dcd66f4c44ea3baf1c5ab3380ebd3a3a397dbe2572e53a1b99858e1027ccca08920d09af4856d2fbd96b7bd03ec45653a199ee0a062918bb7e1ea159b8556da54ae837cf4f744c59b0bcb13db961e1da2fb60da5f6728a0d83e09f5566a20efb792ee7e17c0f6bdf7c17580eecb8260801ec310bf376743b3dbe8e73401e5fb9f5a0b0e92353e9bb5075515681a47a651aad0211ae1421fa36a8af0f4832ef877aadbc5175b8ce21e491e7b55847d50762a849d8eda266c3cfdcd05f8fa14027c2d11192651771bbb9d14bf0efb6c00a47c9a92b51ee587d66a5965bd26f8f73e0dfdcfa77d525aea7cfb75c846bde4c15397fcd480132ee365d41666066f17cb7a20119fa9b2bad65ddbe641e626fb496402041e5de8baac6b3e910b5f6ef2f538b862227c93ddbfc67a1915df5686b92601f0dc266138d5fbb2e08ec1917b0dcb2e9f3d7b3319eff55f240ec14d6aaccc9ad8b3081d6b6a21781e116e7d679b1a3f3e9b906c675ef0ba9b01191b95519e0603de6f6163b21f55dc95d14b83ac13996682026249d21ea91b12cfabdd13c5869aeb245e912cd6e637a3360507fdaebc79f0d3cbc6f1539c4dcec7cf8febb7848cc4a515af69795ea9573e889e23c10465ea74b7b7f3084cb36392cc55b00d6cf2e1061f1bd5bc3515a632ffca9615304408894113f3fcd302293cfa00058c844275cd6a91149866b24788d48558525f339496180b145272de463dfd61ec3df8862d33afdcad74a00549c854802b8f10ae4786a73410e10eed6806ea692716d8f715db8df959fe6c63ce193bc91b593fb430af042ace2bc859f18200a0158f86e23ec3737bdd6418f30bfc27492876a3259034b4846a225450c75afd155f605cf29c827a2cf135910b8dcddcf72384f9f662ddd1e31e80f307d049a2c14bb9d2bce836f3c447e3484563e7d0cf0c421c9082325237bfe46396a6ae58f6a0a4708e79e69310736fcd507ef2fd8cdd7921a2be688c70550bbcb885366c324a70c6c872eaf7bb421600162e630d8addb9d90b96f1ae978cbef5baa92ab2541e08baf518d2c6c135fefc0b015940435f204f8801558fba7c825d840df8a15b1b5fc28361c14270efdbd450904c07a185b23ed5de07d0333917fffbaf1f127873ddc4f03ec2bcd3636aa8a3bdee3c407bc7461018623d2a3a8bebead4c21fbbda99d439dafc97c3f0edd8efabea0dec1a500ec261aef62bf56e4bebce6be6c22f853cbeb207889907c516c6ac85d9d33d6edf6e56a26b1046f8fd55bb5b39e3e829dfb28f88b5112c3cf19cafa76fadf496c3b9ac39d7be9232800358535fabb6ab8b761fe5ea72861bd4c9010f41f0541be1920d5dda61fed4b0d298a153ed6f1f26cdceb19ee13884441b0c7a4777db9e758e7e5c3069adf8d9c958d84fcecd0a6e5e44ccb4cc932ff8260273326971ab174f66cf37055b27bc8a36310f55335856598a585850e2e7b6d719641bb4cc25883bef06e58e9f5fb4ea0e32602e2695c51d87a754799260ce870269dd81f21f37f7eb498387733b2aae97e4ff7cf3d51e82e4e6c28787f8421af18835e6379bd84ceb891d233cdec8ecf2a335f0e9584c422dd4fe26ca61453345f0bce191b50c81551887f572494ad6fdd285fe0d3194dea6b09801105581a7d390e7eb74f8393d83a2593c3ae7e76a358298c7d70865135ce6ad3bc8a42ac85e86ba5d2f570b4f6f8742d1965ba3a118d8932f522d108f707b05c0cb8d159f4a7922a8c93916410e7ead0bf52ff27505d3784acbe94ef550edbc215042980bca07825a55b455cdd5177f0e7fa2483efd98632db7e956fba801b70253cf5dc254132692e823ddfbd37d09d660d7bea649f949e949d5826ee9e3f4e68412fc777073f691269ca7863f80eca49aaf7258020e82800d1de9fb1c776b37585ece98aa080e5398d520dc84b69d218444be88a670c757de723dd9e1de747ec7243af1842a81747f3c58240286089fa486946e5064728338bbe01b25fbd363131c13d93621f259dcea05b177efe56a0917beb1364b9754b6d496ef4e5b7c1c85458e8f8cb617c7cd1795faa4c43b539be4c48a7800b3db355063ff677cf10886de10ee538e29c6414850bffcd88e17da94c15f1009ef8ee78783c0cc5bad542c2cdd021c29c9fd0a99ed5de13f1aebc14e59f0f7109178f6cf8de14530bbf27ba19a345cc9a466647695a8b97df1c3bcfe8c758d0a3f213f9933dd5e8c23b634e1e0050b40f2a4a408d938ed41e4abc2a1dc5f498cb4e3ac96824592c5d8ee4b0b0006f05753437125c56e82e98c8d7645f4d48f762c7f49e94b93fcc31163ee4bca574dd548280b75a732abae031960d4dbc4417f6467c568112a654b28dc60261d51b082e6cb0ba77cbefe9cb3a69c05dac19f1037fcf3e1439052db02d0e431c4a8ec1d0d15b3d6b6d21e026e23de168e5c9a0ffda658757363de90c9f88e63f7d475e9d05a066d27d5f4bbb61d021b659e05ca47b3ea53fb5f391e8ac5b2c60435785ee92428a892eebb7487b88ec2a0c4985d2c62bf18321712269dda76e1d15cab071b1a5a3b02e73170285f0275db8a522870975d348e5ed90e862f7e7b98b15cba45a1fcf22f4a70b24f3ead2bdf54c10fd062bc50f3f0a78681522fbaf59312ddb699f893de420fb9e514a27c08069ea8dd511c3a30db2a202612c6b0a5c493b10b02664e390294e3b624c8b749042490aa0b63f6faded9a2f2c368ca7aaf806ed9027591eace64051a44eacf74a5be0ff353f52f66c727cbb7ef3076fd4c1c388c11c70b4aa44352809b18a6ec8d8dfa252ddad7d934090897a01b8479c626458e225895fbab4116a1270f544cfedc4a2f668b634ae0e8a85523eb27a42c0e585d842faf2582d40055ff02c70faa9b6cfcff46b900f07e4cb16611c94be26cbe6189f94191a562abeff28ecd3e2d83370ad6e5344a5f1e10be4710fb08388fb93045230ec66ba009d11a3a74816148dbe93f6eb52b6342204bb0769f428101ce5033e9830551da5c69e85919d110986fb8d8ec95f7c455c31bae55586639e6fe33554ae7f3ceac66900d56a734ca3d17f039026a0d08411245236e107babee476afea5d89f22093a95b866b1a9b60cbe9098f222106a08e81bec291fcfd8e6315ccd006c321743a00f5a867e68dc9d20b865749a935c3bac03783a359229adc88d4eafaa69feb704c537c30a96c1d0fe34ad7bc7f3dda582ab9dc31f2ae8e46d60f5a9352ae2fb21e3ac193035845a46c613ff38d50531b4e425111fda12f6bfc2de5e577dc3cab3fb23cfe8508913cbb4d0338be83f88578e7d1bc2a8ccc346bcce04ce0317ac2f6508a16998f9f422fec90a878b21a54013225d842659095a90226289c1af3c153f172f6d1bd0225e08f9684a723b20191133fff95b3ce5c4f71f5c52383478023978a68177b63bacbf169d27a8ed99c12e77204bf33cf4ff7de9936bb67b440fbba18f328730508398b5bde93869078595e7058f4e3cf6c7740626bd9f7f1b9d6a05e2c18603acc6b8d45ccbcb23d50f8bd8ca6addeb9c685e1c7a6c2a79749e0ae08e67cd181086d1cccc5134d52dd213c4ee3da7b4084b3320fa475f34e5bac0379a49944c673b33fb9161eeb7958179ac280609a893cb46463cc33353c0a697953bed1ee71e8fcc9f2683ff3e5438e094ed28fe314b68462a29fff17723b6653dd1fb1bc9382023cd383979fd42b5a4056f94027c628b5539b149e27ee2b5f8cd49edb8452aa49ab73823bd8278460eb196abcf9ce27a776a60b58421c0bbb397deb4652b5cb47e2e1f5b3c1e9eae17e964357834409c08079dd5b41424eeb515979b1dbbc19a2741846b284149efa7b21012c61a74a069e95b80b9b60f6725f7da56baf91c470dae1b0a19d4128d449be54bd53b13d78e876f5327a771d14c0840a295e1acdd0a0540df7a311a2c7ac0eb441ac71122660debe1169261af39c873a7afdb5ecfbf6ed0e33e1a7bd04078d76efc570880b0651e0585264fe92c1204e39c4845ae33010709a37831f4781e9de40ff4c72a4be0f5a4837b3dee2ab1255a6f891709d1714acf448f13bc9ef9800b329a0801a2ad2df95bc02475e32daefe03426dc940f1a4b01ef7709cf673611b3a7fa81824f4e2ea49b084d7d2b43b4556f08c0b2d0fc30be0da936e60f0f95c1afeca2e98b70420722b5dbf6f3535ccbbf79bcdaa5cba1c5e8dfa51febe13e0419a8bcedf2a3e524f3fcf9c26aaea52ae6f21f5ee5dc6a4ab81070a97c45c674b25377da564b4bfe88a557b2933e34d7edec15407b8a5742d14d5cdc8d6fd4ffa5aea8e750343b509bda15320912f2270902a112451c83085397e4b27cf17f42a0e4061c063d2f87a3529d321896f2e3831b6528c7666ba95cb688532ac0faba77a43463e16980af10682403b3264ab7a139230c0b498cef5f4cc7db2c57d292d3a64c50df467b161a125104fa82deda89cd03c681af6a6843835beb07425052e564abde17bb9095824d8842d0b807e7ffe89b856126b3bf2fd891e84d4fcfa5034c81c3d9de2973267ffffacbcc7b8f1632369fc95189f5d2eddd8961d18735a8c7046737ee07aa1b4833a46944c67fdb3ec0ba1b77af5a2569c0e3ce817243984df7be4933e9af181715543f1075d33171fc859295d4df4d15af3f124db1f639bfda59b726cc3c0a0b9b743a2dc1a4c8148c605327d34db9dead946b953ba319e9802c5f67e89ce9677024214b30afb4a9a03b2749fec21f5dc5fc0b2f8a7631091aa1de46457ce0bb4cedfa1978181e13afe1f8497c2407c4b140a4c28824935c2ff8b8bac70b964747a72bc0f24b69c641b68656abed6364cce6f04d86c01207e4bab5fb25c545a130bf818209e483f9e91382966fab50aad054eac475d5fd89383d43f32689784cc816314059f7f5ecece580e05b8443a3585f2ba1cf1f29e7ea96ee4b88bb59754ba04e462f6fbdfd54c70fc0f423df3a5c10ae3cc9094fb3c9c66f408ba3d75708e796a5efe0796e8bd18e6cba7030e3183ca600b3a07b24012cfcef6d7b519db9d4db3644d6562faa63502dde60e7b287a2eea5fe7c0d6d6cffb61922171bc91e673c520ff7093cb9a48c16562015bee09e2fa737f2fe18259a647bd4bde9cb0f32a2fb20164140f1cc5d807b75a8fb8c2d7e9072fdb1c50da699e44fdcefbaeb3c8254fbfd0bf91ab33bd9ce6fc95b295a196a57a80525fab8f88f71f88bff25dd441378f096af5e40ec8eaa42a908bfdd2809402f83c2943b5ba3b1bdb166e1badf2ff14edb05115f97535048536a1845e373dab65b0e629ba8003272829e6290576585ab6f47e51c18e93c2f91649eb7516367619e95c01b1ea64d391fe461a00e016d02112061af7cb1789baa2f5fc5b6e493bd82d8d91e78a870609128aee288855ec8b296cdd92685f579356fc22072b2e2984dbb06f6e4a47fe878b3ebf5dd1d12217518f690baffa3b0e920076f22d1df5a1cb1dd51ddbb7e0a87b6c21d797e2b12e60397111c656f28c08ddf00506fcd616de4e580115f7acbfac037f55558f8e195589c9b5d0df03cc65efefe1500a7cf434670346bc0dad1ae980584895f5a354ab771bacaa881d3ba78a72a2fe477ba00419bafa32bca69c92a7e40179a97481ab2f78e4bab92fa4bbfc76c924d914ce8dac21944ecc0f378fad45f7e83be78eaa14a703f229cbd92c48e9b2579fd9e63469305df739f8014e2bbd463d4dc83744395eb4c75dcfcb190ee5c9cd988b1a42c4b9ac69f3d3a7ea43b379529b59b484e361b481d42e140a4b17ebee7c0e597c5229751d4cb902a86a5753ed425129a2dac0a851bd96e8c7532a7fe8f2090ffcdd223ceff145bda0d4bb7a4417b2ff562d3944f78ab8e32b7d1e20a4b27c1c61fdb9f2905d76b836d7b30b0f48d5b131ce4272abac2b7092cdfc522618495786e379789bd8bf4bb88a9654acf4ad80487cbde965189fb2351fdad7ee74a27de6bf8de7d909aa76fd9547e7f468a2139188666b3f290989f3a1dd6c60aefbf16cd34a387745aa46d5eede6923bfb0c31c0eda80daec77b8b509a83d5527d9e198d10b6f0030a57c8eba8d31ab3d0dc2e4b38e1d3e469af12e6a9e016131afe8db786d22fe0eadf3af33ef63fff15c42acbfd20bfac0ba7a22e180e636a8948e21cf6ab03775fd00ec78b62454c79e0675c10fdddf29a53fccb70be22cfc9bb4fc110f3bfc14a8f43b898c0972706a0dd25acc5ef8fdcabe41f29dae3d9225045bfcae3edf59e20edaa90f6a9b5cf26b621db994770cffe7f33c2447771c40ec78e1273ebfd546a47e37de402693b8fa0aab3b8a2decd2fc2e7538c613defcc9770258a84e4250619e1518f120849679368b0cc809a522839dbd3872cb4c431d0906a9b0c9a1f4a5f6b6c08cb85654970cdcc260e9866c7c6493c2e809d540d096f18d0096c31ade851714a8ce8d250c99aef39940ef049aa85ae3d091e7d37e5df3ee9de48f0665e4740c350e5b08fead5ab34337a31e22de2cfe91cc4b766859a8517939ed34452166a5aa95e74731c3cbecefa89aa12c1062ff244b798cd3e4122cedee3ef37858103676a4bbeb0d1767f744f92e64ec937b1b0af8cc8814ca22e2c8fc7dc4862feee39cd15be77a83f655c65a9b324a52d3c3b8bc6ec8f505ff1c5bca9b3b0ea4a9143276fa4f5b79e3de0ac4d323956ff47995360537baa776ab3aed86848a6c456968aa249f0dedfad6e89cb180e1ec69728b2edcf306dbd51939049045746089926cd927ef91fc044218ea59b3bfa21b1974b15e80db5c211f13b9e331c26affc9302f4600c2d3267d3d038cab1a145b07b18f20710921f2ae288b47226dc069800e3fb29c7d3e2888e820aeb679c8a3f49749ebf31325000ad521200d729ae917f59e7277fd9b8dbd242557dca2ed00a509d03c3b36bb53d6c395d2f1c2d2ee3ff73cd97cdc5d5581b8cca6e7fc6a4338261c193c5f0abd718d1bf3590374e44cd6b926eb3850e1c752c264660816532f795402a48de3098872d74a1d9f7f3779712c8837be053e100fdd739fd35aa49c933ee80a23e6b1c30000454e657c6edca6f78e6f394d89c49f72362f97170f629eaa86a713ff23ef0c8ed770980b5e02ea815cd647c075fbbe9790cf67c4dc5636507931a11d47cf3c0b9ffd3f8f238ce93a526186852da4e1f2819828bfbc252fdef3c593feb94c7926f2132a10cd08201b4ed2ef62a5c48086299e04851d49efc55ac44a8d0672c626c876737ca3b8e7117d0b8a6ea79f0a8dd3eb116f72414d684dcdf8a032056fdf544c55f7f55a4aff00842703801622beebe609e18687c431f5d9897230988407de6295a62e4df45a12b18d21baba911dbbe05313c6f3fd8cd5b3eacdf0fdb7ce6950477c0b8ea3b46cd77aff7e58e16e602cc2b42e6f7434f6f4c1b95380ed85ce2c0ce384514045de604c21e2add4b232222224a1b3988a76bdcec7964d4beb28a7b2de5a9534ce83d5741537899252534dae694d60604d1444a655f8f7b13c6fd23b69bd288debe749e657f32cacd3521f238720748676faf32dce1836e1c448cb3e578009eefb661ed25eff6feff7a313b3f9ddd225b1175e088d7d02032f18c71fe2fc1aa7048d11b6fc45fcd58f84d784d3f7d17c44aa2505b294d02b8d31f3f5be25dcd3dfd0ae15403a8444896a7752501e7e3f91f8ea36fc7bc3c1160f914b21a8eb2bbd4cdc067c48f9787457d96d0d5b1178b7ee654ba201b654067e607cc3246114b29925a33f42acd19c75d1c431b1ee7bf0068c389d732ce85eea608d99bf0e31d30b0d4074b9c5ae1b9335e58929c8e6ad31b96901bb564cd6e4567a011121380c14de9a28d8ac235f7c09756aab0bba474d1d2bb36b49b454099c2d535ad151fb65f11d12de5b7320e89a616062ccf025476503bbeb3adcbeca6bd420a483c82f1e9d12b71271ef21d774e6060d2869b68224ca1f1b62c213cde8d3c2104d78a128d854d5049f5fefccdd824b0231db3b95f87ce01386509bfd2b1e76d8362b60392fde560f543e0cb8917198f848a5623ba2513f44792eacaf8d38aac84b1ac2523c6fef211b4b2979b32d6c85457d256447dde509e4c43ee5183b0fc32910f72f66999441c613e1332b8512a25ac804468423716560bed428e78790b433758eee4c5b57560dedf1fdef5063ee208689e12d4106ac40b91a07376a4d8c345b6f76f735aca63f466a0b095a4aa89c6bfa90998a15109a40be29854fb93e540a3b7669998132c5e6baea5e17dc0e83d22a4a5f227666fdf6f25f52bd6508a3cf2f844d3aef0952c17f63e1500abab24fc2b9a0fedd5219abcdd8370a4d539f93357de4250a6531cd44820d97152c5deb33e0ba86058ab2a9b42f5974feefc58a57b1cbc15323cdfd8f6715d324f7da23a1f251852c079bf05fb3336a86c97856766e2577da613a134e3cdea797b44b7594cda61a73d087a2d35b695a506755c8b7aa426812b8f474b8c48e37a5727d5f065fe7a9b1daffc61a6f6611952fb9bebc46f500633cc352b74a905955aebb3dc7f4d497927db483b99463507b73dbb868f9be52dbbf9d4fe528e4a4842d531c156212de627c16afe2e29b0c6b87cc626a0d24ee3c9ebd06e4279369af95f7bbe456348dce3e7f672d54b1acea6b0d3b4cec6827845bfda65ecec1ad43d89928ab8f28e8c2f34881f92dac53110efc7bf3a159849fa35834df1b17fd4e0f6caa9966130e53776e279f53f69fa05c8afe89ee48b69cb0d23562933b915d17c64e1774358c57bbaf7e883e78e5e07826cf00bb130a252d9a0252bdb5fd06303c50a25787a8f21ebaa57c4b845ac43195f28b0d5fcee439ac1b766fcde3234253109f87fb973b37225bffb40796b3cde5d565186ada7e46a3e72d919e34b62b344dae78f9c391eb9e9bd9affa132118183999b0282ea4fb92089c5a141773adfdfab8b882a457bc6f814aa730ded36f9724bc8618abea3dae3103dff9de0ef1a6f40f8278a7760356deabacfb9fb134ce17f9b4ae4bd29b824f78a19ab8887f4872d4b55915978b183a389c833f1ed86848ee97e1151840fad3bea6daab658bd8d1d85b73066cb687798eec318efb3f856f98b98958c2e90b8418e63da3809a9678f6bb934f2b88e1a982cfc07ae04abbefdcbffc5b678927c94919dc4aad00cc349cdf2a91dc159bccf43dbddf437f5e4ae5c3125227723a76e20186cbb024b451dd256e7955a596fa645f1945848c895e5d18619d1dc5d9db9d5061a7d53287bb2e6cbe8dac047a6872db5d1adfaf0fa0db659b5bb941522cca8275d92792a134f9e5d6fedb679e41d9d6a122ef0cb366757b1f4f0cc70b31764689007ac7fd73f23af0085aa466037a23f723b5f4d92ab6ec60ce8ea9552d40b87da43c02f58559e6b57da613fe0df0f8d08b85f1eb07720a933eb50ca083c447cebbe96ab478f8a7b083d519813a3454b767cbd2a4206727614e34681e4b7ffb9e5e85b96536e2d3d3e7af21b06b9f3fba03e02accd1796d611a1c6e910f2db9c73972c557e989fbf14b0c0f02548a015d92b4ab95354cde65d99188a9e4f4b3646d61a519c3cd3031a817c4828c9974a36d05dbde5e8c1a2502e1d2eacd6d26de055d7a1c11615ffd0285cdb26a9772d2f360de54fa45d310f934c2306dd1c46cac7dc87d8bbcdc288f4b7d5f19d2136945663878a118a4b5c5fae216dda15a0fa20752861df00c24321c944caab5bed13c62117e1d94880aa1adc0a0caa128473571183a09af1ec48d9550d0b04f49bcd67bd8c2ba0a77a48730b2cb5a6b60e04f2148f2eb82770add49e8198f5fbcb7506e6ae5cfefb770edf091e941a7fafa87aa9248110eca87d228c18c6aed029cd63c74f7ba04a414d651ccb12e8dc804a621d491d5430436fad2de2482ba3a1532af905121e4d48fd9e5a538763c53e9c1d30ab52df392ea96a4b101ed636015d1729810372f3cc0ec269593e9dc4667f454f4093c5799ecb1f6445076480efa7fe9ce3da3715245b521126c1c520548d0bf273fbd4a090cbd583c81486b4f3817436abac641f954437d4c625e8241974a61c55be424f75e102f38d79ea2ea6f8167cd8be8d9a143d398b95f1c8069d97068f5b405ed2c8ab40b596b25ce39415a03c299916034519759aeeb61da7d84885c17df3881e9a41592e8be548f673ba610362ebdcfc63e46a6ffad682ff0c76be5c79e0a688a323dd4ac92dac9b0df52383d1788f6b3970efe8b92a8ae4bc44267da8965e679834e94e46af3f2fe699ef437ac733a5bf894b32f9e912259b53df4931c20e4cbd4b03b2e4710ade0b2f6b2ee6fdf08c821609343dfbe7e5928c514cdea19cce3cae8abbfabdc840a9d3209528d24a035931a5e23613e22e946e05963499252ae817efd564baa5c2ea7c2547602d905297cab999fe4c9c2e349e7363a70c2092585ee4e93375c3e08834f3a3c18b4541f075e36be65ca475fde4d6dbdd331a7fffe63999b5290a9e54a74a29a1eb7718c8494dbc4fea14564c92413a1a92e6c3cfafb67cb34e68206454a7a8667f8e891e3a137a6fccbf2bcacd66a81252013f144ae3077aaed9faba4e926aeef55c9757349e68ed8640325b45b6ccd529fb7fd6a93fe712e185d11f36927e8390dcaf0b4783f0eb2316657ecdde8d4774b674f0dabe265f442fb35aa3bcf0fb88255ea8a68b568be06dedcba669c02e453cc39ab8847ec6e0a50f6800aee01f6a454e36a41371c2bf3f576054ebbed13020e4bae4e8b1959d71e16114d4892fe73e0c73fd04f6a5843982a98f4a5566a3e4d23bbbc30b1eed5c4bb4d32c75cbfd99ff630f2370f3de287cb28dcc94a1e55174b67f9978aed7cd84cfad00b8fd841979ba80be84f1d11258b6f59aa4e0cc8b07437d6f7d6c608f597be8d832ebb888fe4195b2f3ddcb822e42ae578288acb0ef72f4bfeafe4d9a014ca2e0c2bc5e7eaaa91dbe4e9035d635d175c6fabe2cabc45343e41f8449dec107773f1c038c89390a44179daf7604a26b174231bdb40500c79d92cccf3f9cd07e9c55694d5f0982de3c1a4726e4676b26d37918236c690ff4887aa8378dbf8118ebfa858b923a2e89f744cbd74f828e7f2167836cf77d91685c70bf31ff14e5f4e0922658372ab86bd2fb5b8dd438784f0f7ab0ee507db713ae90c3751316166b69e65fe06c046ce25e3e5b7f6b4c00225638a1597d56b39fc3662164f40b1cc461a9f54b27b99d1ddcb362e3608e17f1c9ec0dce5178619be4fd1fde4303cac5e37a74c5caa1b17ad365a3672ef1d3f9003ff7b28aa2d09400e42bc4c6cf7ba2bbfde2cd7bbf36f1eab4e50d832347e2ea7ce373f8e85c8dc4ace2f3fdeba728ed5aae3516364a40cf949be04ed605b5544abf7de20d1aed70ce9b55827909f96432c681cadd2091ab57f901557195839e74c75e1ca17b5cf10dd831ab50bc00eae2a4a2e12f53040f7e2c45f5094d2592ba1b57d59a268f4883dedbbde65ba5fc14f078bd1dec387c27db171b278cffb01f9b3c6d1d369123286585e155ebae9b836f972dd3fc647e88eb16c4063ba656e638cdef02a8370c9b9107080f76fc3397e4537b0565482bd8034aff3b7f56a4f8043fc6ad1e222c718ac9b4f8b462c881ed8b98d618eebced9e36b30482c9d0fe6384878fc010cc761678e3daf05fdf517b18791267ac72b2c0a05c75fd7f2bc8e7f29608e3af9c66236319279194d12edf25a78d59f713b9be1fa8f3f9c1dd1f30e52755cfa688209be848c0aab8865e346484317cd59722a1bd09bc7d7642a6b66d46786ca26dfb265029045d55c6155342855ece0d6b38849db94ab9063ede5210c55c0ccc5dc6d3d096fd175986735ebfc677ae5f877961e65336c07ba157868f303314bd2241014beac18d91b054ae63d3e428b9b8b584c75b1a747d49d55063559aa16f8107b22c0dffd975b543dc7a10b869a21ec3619e6d0bb5b063e8e33da5c74e93ada09f29158635a1004033f1b047c475fc8279cb6eadc9523b06693fe175c0b612810095db359ae1d45058fd5303ab72a0f82c0b20420315ddefc3ef912c78d2af24aea27fd05042195efc9d21705f3549de99f23d5673b1b3cee218f0a588fac2dcdb46883d663ef1838c6af1d27a0d838562cc5c7105b4e950d8362c9770467083a49d777ada45fbb6867671e4616e9d0db258e0dfb11fb39bddb3b435e65b73fd7ff8da8d828025654e8bbda45df9a33963767bf8828debf91eacf99e7617c8e81f836a1db2eddae07d51624c8ae68f82d64edd6e0d5be62cd2a5ad9d4ce7f08d3a6af5b76df57c3ef5fd1223363eac8d0f784ca165105b544f8b8d1308ecc22133e7248645e2e39d1f46e317052cc5e1dc35f9e98624b66698f88800e7e5f2eb6a1697bff5eefac35d6f56d08e1c078433f957e295b5cc3d72d07297134e86ae92a6a037103af8dcbde9c464231a58c5b09235cb06a74d2e765e8adf71d5aa514c4286045dd1b93f863e0a851c82b3f66b6e8fa9bceecc28e160c3ba059d4685c8c06d1f7aa41d14838d0cfe2a10d13ebdcbd0762840c19f6cb695adcae98c18c8cc5325f709b5e4780e40e254b997a0b6f9cfedf5cb4127d2c02358b44591f678765ee7b4c567f4cfa49d4e3fb05f64bee50dd929db380f0a82ff52efe0dfa999f27a4e2db0376705870aa859f7e645e6a1691fc2b0ebf1d3c9fe52a3cf224e40411c2fa7ea7008bf071466ad9580889143f596d5780e4574c029bfc85861dc7ac23dd116a2c5627b01333f19d5cba2fde859f6faf16d8a78f839587da7d47ac9d46bde0f2013fcb003f8e7768f5baf3e60df1e89944e0c4127978e37cc81a545018c717ef5827b6d09bcc4de21bec59f2d5a3f2d33f1150af4e9a1633a61db85bb9989c6dad38ce22859f0612548e00511d5374226bfcc3009ee360bee41e0e1a134198d87c633188898c545a5a517d23ead13adc37e1efa31230b3ddfadc71c6d5455d89245f5da98dba4d5f97eb65de7b5bed79233a549666cea1ab9ba2ac8409319ecb63fe7e78edf279af0bfbffd717f8bee66a0eae340f9bf1c3aa7e0ab8f2bfb63b952c9e2837ee7b798278119e7918fcc1f0ffa91d3b305f3dbee0850f3462533a884072e8e080f90083de89fdd2527c09ccc68f74f61bff5d3e4cd23e3022272d8861b83fdc49c3321a76a3f89c0cea85fb4101d34ef56077a55f268ed69f22baaa904061b3c69db36eb4e6098062dd278d3551fc739a203bcddfe6dd53810445d202337bda90ebc98fa95139b31e95960aff50de11b54af3de87505522b04e65903b7bc46a72e6b9b2ecb112ae4b6fd7351a88c752f65b6ea86f25921e36ab1e7f87ba54776df6f3397b308a6884330dde1279206230a3a269bac3c1c0e9f2693a7e15e708dbcd7c4b3dc867684d9ad606fb00aac68d0691f20aed0b34c899de1df169a53d1051b5a795f1c98eb14b1756abcb4d49813d3cb9ce8f0e1a0c9dd93856e4505f4a040b</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">Hey, password is required here.</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
    
    
    <categories>
      
      <category>Thinking</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Thinking</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>模电</title>
    <link href="/2025/01/02/%E6%A8%A1%E7%94%B5/"/>
    <url>/2025/01/02/%E6%A8%A1%E7%94%B5/</url>
    
    <content type="html"><![CDATA[<h1 id="一、常用半导体器件2-9"><a href="#一、常用半导体器件2-9" class="headerlink" title="一、常用半导体器件2~9"></a>一、常用半导体器件2~9</h1><h2 id="1-1-PN结"><a href="#1-1-PN结" class="headerlink" title="1.1 PN结"></a>1.1 PN结</h2><p><strong>P区形成</strong>： 纯Si区(本征半导体)掺加少量(相比于Si的量)   3价元素 Be    多数载流子(多子)：空穴(空穴移动&#x3D;自由电子反向移动)       少子：自由电子</p><p><strong>N区形成</strong>：纯Si区(本征半导体)掺加少量(相比于S i的量)  5价元素 P      多数载流子(多子)：自由电子                                                  少子：空穴</p><p>本征激发：电子脱离空穴形成自由电子和空穴，但是自由电子多到一定程度，复合加快，达到动态稳定→动态稳定浓度受温度影响 </p><p>温度影响少子浓度更剧烈、少子本来浓度低。多子浓度变化0.5倍，少子浓度变化一定大于0.5倍→<strong>少子决定的特性受温度影响大</strong>。</p><p><strong>PN结形成：</strong></p><p><img src="/../pic/84087674ee2e089c513ed9ca53881fe9_720.png" alt="PN结形成"></p><p><strong>P&#x2F;N区内两种运动：</strong></p><blockquote><p>热运动(本征激发—空穴 、电子分离)              本征激发速度↑，温度↑，浓度↑</p></blockquote><blockquote><p>复合(空穴 自由电子结合)                                 浓度↑，复合速度↑，浓度↓</p></blockquote><blockquote><p>两者动态平衡类似与化学的离子电离</p></blockquote><p>PN结内两种运动</p><blockquote><p>扩散运动：浓度差(高浓度→低浓度)导致P&#x2F;N区多子(空穴&#x2F;电子)向N&#x2F;P区运动。      形成电势差。</p></blockquote><blockquote><p>漂移运动：因为P&#x2F;N结电势差在  少子被加速漂移过去。</p></blockquote><blockquote><p>扩散运动越剧烈，PN结越厚，少子更容易飘过去，最终两者运动动态平衡</p></blockquote><p><img src="/../pic/image-20240531193247107.png" alt="PN结两种运动和空间电荷区(耗尽层)的形成"></p><p><strong>PN结正偏</strong>：使阻止漂移运动的电势差削弱，耗尽层缩小，削弱漂移运动，增强扩散运动，但是因为产生扩散运动的多子浓度高，所以正向电流大。</p><p>正向电流指数增长原因：少部分需要削弱一点，多部份需要更多电压，多子数量随需要的电势指数增长→电流随电压指数增长。</p><p><img src="/../pic/image-20240531194003444.png" alt="PN结正偏"></p><p><strong>PN结反偏</strong>：使阻止漂移运动的电势差加强，耗尽层变宽，增强漂移运动，进一步削弱多子扩散运动，让扩散运动主要是少子，所以电流反向，但是少子浓度低，所以反向电流小。</p><p><img src="/../pic/image-20240531194026100.png" alt="PN结反偏"></p><p><strong>温度影响少子浓度多，所以反向饱和电流受温度影响多。</strong></p><p><strong>PN结伏安特性</strong></p><p><img src="/../pic/image-20240531194333516.png" alt="PN结伏安特性"></p><p>PN结伏安方程：$i &#x3D; I_s(e^{U&#x2F;u_{T}}-1)$</p><blockquote><p>正向死区</p></blockquote><blockquote><p><strong>反向击穿</strong></p><p>​<strong>雪崩击穿(粒子加速器 )<strong>：反向电压增强耗尽层，增强漂移运动的做功能力，是少子能量高，撞开其他共价键。造成雪崩效应   发生情况：</strong>掺杂浓度低</strong>使耗尽层宽，加速距离足够长。</p><p>​温度↑，热运动加剧，电子空穴之间<strong>更容易复合</strong>，需要更大的耗尽层距离加速，需要更高雪崩击穿电压。</p><p>​<strong>齐纳击穿(价电子被电场破坏)<strong>：电场很大使共价键破裂。                                                                                                                              发生情况：</strong>掺杂浓度高</strong>已经很高了使电场强度很高，把价电子破坏。</p><p>​温度↑，<strong>价电子更容易被破坏</strong>，需要齐纳击穿电压低。</p></blockquote><blockquote><p>反向斜率无穷大：稳压二极管</p></blockquote><blockquote><p>电容特性：</p><p>​势垒电容(漂移运动)：耗尽层厚度变化</p><p><img src="/../pic/image-20240531200326128.png" alt="势垒电容"></p><p>​扩散电容(扩散运动—非平衡少子(P区的多子扩散到N区变成N区的少子))：电压升高，扩散得到非平衡少子浓度变多</p><p><img src="/../pic/image-20240531200413301.png" alt="扩散电容"></p></blockquote><blockquote><p>温度特性：</p><p>​温度每升高一度开通压降小2-2.5mV</p><p>​温度每升高10度反向电流翻1倍</p></blockquote><h2 id="1-2-二极管"><a href="#1-2-二极管" class="headerlink" title="1.2  二极管"></a>1.2  二极管</h2><h3 id="1-2-1-主要参数"><a href="#1-2-1-主要参数" class="headerlink" title="1.2.1 主要参数"></a>1.2.1 主要参数</h3><p>IF：最大平均电流，发热参数</p><p>UR：最高反向工作电压(击穿)</p><p>IR：反向饱和电流    IR小，反向特性好</p><p>fM：最高工作频率，电容特性 容抗不可忽略     高频电路重要</p><h3 id="1-2-2-等效模型"><a href="#1-2-2-等效模型" class="headerlink" title="1.2.2 等效模型"></a><strong>1.2.2 等效模型</strong></h3><p><img src="/../pic/image-20240531213720705.png" alt="等效模型"></p><h3 id="1-2-3-微变等效电路"><a href="#1-2-3-微变等效电路" class="headerlink" title="1.2.3 微变等效电路"></a>1.2.3 微变等效电路</h3><p>用叠加定理(交流信号比较小，近似成线性模型)，先求静态工作点，再求动态工作等效电路。<strong>相当于</strong> 用叠加定理(交流信号比较小，近似成线性模型)，非线性方程在直流处线性化，求线性等效模型。</p><h3 id="1-2-4-稳压二极管"><a href="#1-2-4-稳压二极管" class="headerlink" title="1.2.4 稳压二极管"></a>1.2.4 稳压二极管</h3><p>小于4V(高掺杂高浓度，场强已经很高了)：齐纳击穿，掺杂浓度高，更容易击穿。</p><p>大于7V(低掺杂，需要增加更厚耗尽层增加 加速距离)：雪崩击穿，掺杂浓度低，更难击穿。</p><p>主要参数：</p><h2 id="1-3-BJT-三极管"><a href="#1-3-BJT-三极管" class="headerlink" title="1.3 BJT 三极管"></a>1.3 BJT 三极管</h2><p><img src="/../pic/image-20240601084252087.png" alt="三极管"></p><p>b（base）：薄，掺杂浓度低，收集载流子能力低</p><p>c（collector）：掺杂浓度低、面积大</p><p>e（emitter）：掺杂浓度高</p><p>发射结：be</p><p>集电结：cb</p><h3 id="BJT放大原理"><a href="#BJT放大原理" class="headerlink" title="BJT放大原理"></a>BJT放大原理</h3><p><img src="/../pic/image-20240601085345264.png" alt="NPN BJT放大原理"></p><p>发射结正偏加强扩散运动：$I_{EP}\ I_{EN}$<br>集电结反偏加强少子漂移运动：$I_{CBO}$</p><p>$I_E &#x3D; I_{EN} + I_{EP} &#x3D;  I_{CN} + I_{BN}  + I_{EP}$<br>$I_B &#x3D; I_{BN} + I_{EP}$<br>$I_C &#x3D; I_{CN} + I_{CBO}$</p><p>B区掺杂浓度低→ $I_{EP} &lt;&lt; I_{BN}$<br>B区面积薄，收集载流子能力弱→ $I_{BN} &lt;&lt;  I_{CN}$<br>集电极反偏，少子漂移产生$I_{CBO}→I_{CBO}&lt;&lt;I_{BN}&lt;&lt;I_{CN}$</p><p>因此：<br>$I_E ≈ I_{CN} + I_{BN}$<br>$I_B ≈ I_{BN}$<br>$I_C ≈ I_{CN}$</p><p>又因为b，c区面积一定，掺杂浓度一定收集载流子能力固定，c为b的β倍，所以$I_E ≈ I_{CN} + I_{BN} &#x3D; βI_{BN} + I_{BN}$</p><p>参数：</p><p>$β$：放大倍数</p><p>$I_{CEO}$：穿透电流   b开路。ce电流  （$I_B&#x3D; 0$）</p><p>$I_{CBO}$：cb反向电流</p><h3 id="BTJ-端口特性"><a href="#BTJ-端口特性" class="headerlink" title="BTJ 端口特性"></a>BTJ 端口特性</h3><p><strong>输入特性</strong>（PN结特性）：$i_B &#x3D; f(u_{be})|u_{ce} &#x3D; c$ </p><p><img src="/../pic/image-20240601092356924.png" alt="输入特性"></p><p>que:为什么超过1V，曲线不右移了</p><p>分析：UCE&#x3D;0v时，集电极与射极短路，就是PN结的伏安特性曲线。<br>当集电极电压逐渐增大的时候，集电结的正偏慢慢的变成了反偏，漂移运动逐渐增强，集电结收集电子的能力逐渐增强，所以当相同UBE的情况下面，UCE变大流向基极的电流IB变小。而当UCE&#x3D;1v的时候，集电结已经将发射结扩散到基区的电子全部收集走，所以当UCE&gt;1v的时候，曲线几乎不再左移。</p><p><strong>输出特性</strong>：$i_C &#x3D; f(u_{ce})|i_{b} &#x3D; c$ </p><p><img src="/../pic/image-20240601092922342.png" alt="输出特性"></p><p><strong>三个工作区域</strong></p><p>$u_{be}&lt;u_{th}$：截止区</p><p>$u_{be}&gt;u_{th}(发射结正偏) , 集电结正偏$：饱和区       饱和理解：对于小信号交流IB增大，IC也增大，但是IC增大，Vce因为限流电阻分压变小，UCE很小，导致集电结趋于正偏，IC也变小，所以IB的增大换不来IC的增大，就是饱和了。 最大Icmax由外电路决定。</p><p>此时用来做开关管，uce电压比较小，损耗低。</p><p>$u_{be}&gt;u_{th}(发射结正偏) , 集电结反偏$：放大区   $i_c&#x3D;βi_{b}$   </p><p><strong>判断区域</strong>：算ib，再算Icmax。比较βib Icmax大小</p><h3 id="主要参数："><a href="#主要参数：" class="headerlink" title="主要参数："></a>主要参数：</h3><p>决定器件选型。书上。</p><p><strong>温度特性：</strong></p><ul><li>导通压降 $u_{th}$</li><li>反向电流$I_{CBO}$</li><li>Bib</li><li></li></ul><h2 id="1-4-MOSFET（P8-P9）"><a href="#1-4-MOSFET（P8-P9）" class="headerlink" title="1.4 MOSFET（P8-P9）"></a>1.4 MOSFET（P8-P9）</h2><h3 id="1-4-1-结型EFT"><a href="#1-4-1-结型EFT" class="headerlink" title="1.4.1 结型EFT"></a>1.4.1 结型EFT</h3><p>用的少 暂时不看。</p><h3 id="1-4-2-绝缘栅型FET-MOSFET"><a href="#1-4-2-绝缘栅型FET-MOSFET" class="headerlink" title="1.4.2 绝缘栅型FET(MOSFET)"></a>1.4.2 绝缘栅型FET(MOSFET)</h3><h4 id="N沟道增强型MOSFET"><a href="#N沟道增强型MOSFET" class="headerlink" title="N沟道增强型MOSFET"></a>N沟道增强型MOSFET</h4><p><img src="/../pic/image-20250312185958917.png" alt="N沟道增强型MOSFET"></p><p> <img src="/../pic/image-20250312190523842.png" alt="NMOS导通原理"></p><p><img src="/../pic/image-20250312190934291.png" alt="Uds产生预夹断"></p><h4 id="N沟道耗尽型MOSFET"><a href="#N沟道耗尽型MOSFET" class="headerlink" title="N沟道耗尽型MOSFET"></a>N沟道耗尽型MOSFET</h4><p>在绝缘层加入正电荷，让N沟道天生形成。</p><h1 id="二、基本放大电路10-27-5"><a href="#二、基本放大电路10-27-5" class="headerlink" title="二、基本放大电路10~27.5"></a>二、基本放大电路10~27.5</h1><p>放大：对正弦波信号(小电压、电流)放大，使其不失真(对所有频率的放大倍数几乎一样)</p><h2 id="2-1-构建放大电路"><a href="#2-1-构建放大电路" class="headerlink" title="2.1 构建放大电路"></a>2.1 构建放大电路</h2><blockquote><p>目标：小功率→大功率</p></blockquote><blockquote><p>条件：放大特性器件、电源</p></blockquote><blockquote><p>方法：</p><p>​放大器件：三极管、MOSFET</p><p>​小信号输入：$u_{be}$控制$i_{b}$,$i_{b}$控制$i_{c}$</p><p>​大信号输出：$i_{c}$控制输出</p></blockquote><h2 id="2-2-共射放大电路"><a href="#2-2-共射放大电路" class="headerlink" title="2.2 共射放大电路"></a>2.2 共射放大电路</h2><h4 id="基本共射"><a href="#基本共射" class="headerlink" title="基本共射"></a>基本共射</h4><p><img src="/../pic/image-20240601111619191.png" alt="共射放大电路"></p><p><img src="/../pic/image-20240601111826275.png" alt="共射波形分析"></p><p>$R_c$把变化的电流转化为变化的电压</p><h4 id="直接耦合共射放大电路"><a href="#直接耦合共射放大电路" class="headerlink" title="直接耦合共射放大电路"></a>直接耦合共射放大电路</h4><p><img src="/../pic/image-20240601112248686.png" alt="直接耦合共射放大电路"></p><p>直流通路→交流通路→放大倍数RiRo</p><h4 id="阻容耦合放大电路"><a href="#阻容耦合放大电路" class="headerlink" title="阻容耦合放大电路"></a>阻容耦合放大电路</h4><p><img src="/../pic/image-20240601112655038.png" alt="阻容耦合放大电路"></p><p> <img src="/../pic/30c34c6860928bf8ad059671bfd43b00_720.png" alt="分析过程"></p><h4 id="电路分析"><a href="#电路分析" class="headerlink" title="电路分析"></a>电路分析</h4><p>直流分析：电容断路，交流电压源短路。</p><p>交流分析：电容短路，直流电压源短路。</p><h4 id="性能指标"><a href="#性能指标" class="headerlink" title="性能指标"></a>性能指标</h4><p><img src="/../pic/image-20240601114809443.png" alt="输入输出等效电阻"></p><p><strong>输入电阻</strong>：对于输入信号，接收信号的等效电阻。         输入电阻大好，有利于减小小信号电源电流，减小信号源失真，分得到的电压多，有利于放大。</p><p><strong>输出电阻</strong>：对于输出信号，电压源的等效内阻。             输出电阻小好，输出分压大，有利于放大。</p><p><strong>放大倍数</strong>：$A_{uu},A_{ui},A_{iu},A_{ii}$</p><p><strong>通频带：</strong>电容阻抗特性原因</p><p><img src="/../pic/image-20250313003113176.png" alt="放大电路通频带"></p><p>其他特性</p><blockquote><p><strong>非线性失真：</strong></p></blockquote><blockquote><p><strong>最大不失真输出电压：</strong></p></blockquote><blockquote><p><strong>最大输出功率和效率：</strong></p></blockquote><p><img src="/../pic/image-20240601115737833.png" alt="多级串联"></p><p>放大倍数相乘</p><p>前一级输出电阻等于后一级的电压源内阻</p><p>后一级输入电阻等于前一级输出电 压源的负载</p><h2 id="2-3-分析方法"><a href="#2-3-分析方法" class="headerlink" title="2.3 分析方法"></a>2.3 分析方法</h2><h3 id="2-3-1-直流通路"><a href="#2-3-1-直流通路" class="headerlink" title="2.3.1 直流通路"></a>2.3.1 直流通路</h3><p>分析直流通路，确定静态工作点，得到小交流信号线性化模型。</p><p>交流信号源短路$u_i &#x3D; 0$，电容断路。</p><h3 id="2-3-2-交流通路"><a href="#2-3-2-交流通路" class="headerlink" title="2.3.2 交流通路"></a>2.3.2 交流通路</h3><p>根据静态工作点，小交流信号线性化模型，得到小交流信号放大特性。</p><p>直流信号源短路$V_{CC} &#x3D; 0$，电容短路(大电容对高频信号阻抗近似为零)。</p><p><img src="/../pic/image-20240601232635185.png" alt="直流交流通路分析"></p><p><img src="/../pic/image-20240601232534026.png" alt="直流交流通路分析"></p><p><img src="/../pic/image-20240601232224065.png" alt="直流交流通路分析"></p><h3 id="2-3-3-找静态工作点"><a href="#2-3-3-找静态工作点" class="headerlink" title="2.3.3 找静态工作点"></a>2.3.3 找静态工作点</h3><blockquote><p>图解法：横坐标，纵坐标两个未知数，在图上找交点。</p></blockquote><blockquote><p>解非线性方程：两个非线性方程，解两个未知数。  </p></blockquote><h3 id="2-3-4-BJT-交流信号等效模型"><a href="#2-3-4-BJT-交流信号等效模型" class="headerlink" title="2.3.4 BJT 交流信号等效模型"></a>2.3.4 BJT 交流信号等效模型</h3><blockquote><p>$I_B$:电流直流分量</p><p>$i_b$:电流交流分量</p><p>$i_B$:电流 直流+交流 分量 </p><p>$\dot{I_B}$:电流交流分量的向量 </p><p>$I_b$:有效值</p></blockquote><p>$r_{be} &#x3D; r_{bb}(基区体电阻) + (1+β)\frac{U_T}{I_E}(PN结特性) &#x3D; r_{bb}(基区体电阻) + \frac{U_T(1+β)}{I_E}(PN结特性)$</p><p>PN结特性：$i &#x3D; I_s(e^\frac{u}{U_T}-1)$</p><p><strong>h参数等效模型数学推导过程：</strong>(P13)</p><p>用全微分形式推导，忽略Uce的影响，因为Uce对端口的影响小。</p><p>。。。。。。。。。。。。。。。。。。。。</p><p>。。。。。。。。。。。。。。。。。。。。</p><p>忽略误差(Uce对Ib影响，Uce对Ic影响忽略不计)得到 简化的h参数等效模型：</p><p><img src="/../pic/image-20250313110804746.png" alt="简化的h参数等效模型"></p><p> <img src="/../pic/image-20240602001606433.png" alt="r_be 推导"></p><p>$\delta u_{ce} &#x3D; i_{be}r_{bb} + I_e(r_{be})&#x3D;i_{be}r_{bb} + (1+β)i_{be}(r_{be})$  $r_e$非常小可忽略，因为e区掺杂浓度高。</p><blockquote><p>一端等效为电阻</p><p>另一端等效为流控电流源</p></blockquote><h3 id="2-3-5-BJT放大电路动态分析方法"><a href="#2-3-5-BJT放大电路动态分析方法" class="headerlink" title="2.3.5 BJT放大电路动态分析方法"></a>2.3.5 BJT放大电路动态分析方法</h3><p>①直流通路，静态工作点(在某点线性化方程)。</p><p>求$I_{EQ}、r_{be}$，判断$βI_b I_{Cmax}$大小，确定BJT工作区间（饱和区，放大区）</p><p>②小信号交流等效模型替代BJT得到交流通路</p><p>③求$A_{u} &#x3D; \frac{R_{i}上的电压}{R_o上的电压}$、$R_i$、$ R_o$、求$A_{s}$、再求$A_{us}$</p><p>que：$R_o$大稳定输出电流、$R_o$小稳定输出电流。（对于不同的负载$R_L$，对电压电流的影响）</p><p>分析：$U &#x3D; \frac{R_L}{R_L + R_o}$ 、$i &#x3D; \frac{U}{R_L + R_o}$</p><h2 id="2-4-稳定静态工作点"><a href="#2-4-稳定静态工作点" class="headerlink" title="2.4 稳定静态工作点"></a>2.4 稳定静态工作点</h2><h3 id="2-4-1-两种失真"><a href="#2-4-1-两种失真" class="headerlink" title="2.4.1 两种失真"></a>2.4.1 两种失真</h3><ul><li>输入$i_b$太小导致$u_{be}&lt;u_{on}$，进入截止区,电阻不能近似成直线斜率（$\frac{d_{u_{be}}}{d_{i_b}}≠K$ ），线性化模型失效</li></ul><p><img src="/../pic/image-20240602103509210.png" alt="截止失真"></p><ul><li>输入$i_b$太大导致$βi_b &lt; I_{Cmax}$，进入饱和区，$i_c≠βi_b$，线性化模型失效</li></ul><p><img src="/../pic/image-20240602103624330.png" alt="饱和失真"></p><p>影响因素：</p><blockquote><p>温度：温度升高，放大倍数变大，需要电路改进</p><p>电源波动：外部改进，电路没办法</p><p>元器件老化：外部改进，电路没办法</p></blockquote><p>解决办法：引入负反馈抑制影响</p><p><img src="/../pic/image-20240602105009423.png" alt="负反馈电阻Re和RB1 RB2 确定工作点的稳定工作点电路"></p><ul><li><p>$I_{B_2}&gt;&gt;I_B$使β的变化对$u_{b}$的影响非常小。</p></li><li><p>$R_E$负反馈电阻，温度↑，$I_B$↑，$I_E$↑，$U_{BE}$↓，$I_B$↓</p></li></ul><h3 id="2-4-2-静态工作点稳定电路"><a href="#2-4-2-静态工作点稳定电路" class="headerlink" title="2.4.2 静态工作点稳定电路"></a>2.4.2 静态工作点稳定电路</h3><p><img src="/../pic/image-20240602110225446.png" alt="阻容式耦合静态工作点稳定电路"></p><p>$C_e$在交流通路短路 $R_e$ 进而不影响放大倍数，直流通路中$R_e$稳定静态工作点。</p><p>缺点：有大电容($C_e$)，大电感不能集成 </p><p><img src="/../pic/image-20240602110626692.png" alt="其他静态工作点稳定电路"></p><p>自己分析</p><h2 id="2-5-共集放大电路（射级输出-跟随器）"><a href="#2-5-共集放大电路（射级输出-跟随器）" class="headerlink" title="2.5 共集放大电路（射级输出&#x2F;跟随器）"></a>2.5 共集放大电路（射级输出&#x2F;跟随器）</h2><p><img src="/../pic/image-20240602111034231.png" alt="共集放大电路"></p><p>分析方法同前面。</p><p>特性：</p><blockquote><p>电压放大倍数接近一,但放大电流</p></blockquote><blockquote><p>$R_o$很小</p></blockquote><blockquote><p>$R_i$很大</p></blockquote><h2 id="2-6-共基放大电路"><a href="#2-6-共基放大电路" class="headerlink" title="2.6 共基放大电路"></a>2.6 共基放大电路</h2><p><img src="/../pic/image-20240602113727901.png" alt="共基放大电路"></p><p>分析方法同共射放大电路。</p><p>特性：</p><blockquote><p>通频带宽</p></blockquote><blockquote><p>$A_u &#x3D; \frac{\beta i_b R_C&#x2F;&#x2F;R_L}{i_b R_{be}+(1+\beta)i_bR_E}$，$R_E$一般很小→放大倍数接近共射</p></blockquote><blockquote><p>$R_i&#x3D;R_e+\frac{r_{be}}{1+\beta}$</p></blockquote><blockquote><p>$R_o &#x3D; R_C$</p></blockquote><h2 id="2-7-三种放大电路特性对比"><a href="#2-7-三种放大电路特性对比" class="headerlink" title="2.7 三种放大电路特性对比"></a>2.7 三种放大电路特性对比</h2><h2 id="2-8-复合放大电路"><a href="#2-8-复合放大电路" class="headerlink" title="2.8 复合放大电路"></a>2.8 复合放大电路</h2><h3 id="2-8-1-复合管"><a href="#2-8-1-复合管" class="headerlink" title="2.8.1 复合管"></a>2.8.1 复合管</h3><p><img src="/../pic/image-20240602171347769.png" alt="复合管"></p><p>背景：很难做到两个特性相近的NPN  和 PNP，只能做到两个特性相近的NPN&#x2F;PNP</p><p>作用：形成PNP NPN特性相近的对管，增大放大倍数</p><h3 id="2-8-2-共射-共基放大电路"><a href="#2-8-2-共射-共基放大电路" class="headerlink" title="2.8.2 共射-共基放大电路"></a>2.8.2 共射-共基放大电路</h3><p><img src="/../pic/image-20240602172857953.png" alt="共射-共基放大电路"></p><p>作用：</p><h3 id="2-8-3-共集-共基放大电路"><a href="#2-8-3-共集-共基放大电路" class="headerlink" title="2.8.3 共集-共基放大电路"></a>2.8.3 共集-共基放大电路</h3><p><img src="/../pic/image-20240602172924676.png" alt="共集-共基放大电路"></p><p>作用：</p><h2 id="2-9-MOSFET放大电路分析"><a href="#2-9-MOSFET放大电路分析" class="headerlink" title="2.9 MOSFET放大电路分析"></a>2.9 MOSFET放大电路分析</h2><p><img src="/../pic/image-20240602173151568.png" alt="基本共源放大电路"></p><p><img src="/../pic/image-20240602172948082.png" alt="MOSFET放大电路"></p><p><img src="/../pic/image-20240602173951231.png" alt="MOS小信号交流等效模型"></p><p><img src="/../pic/image-20240602174302776.png" alt="image-20240602174302776"></p><p>que：</p><blockquote><p>$R_{g3}$  作用—</p><p>$R_{s}$  作用—</p></blockquote><p><img src="/../pic/image-20240602174402990.png" alt="image-20240602174402990"></p><h1 id="三、集成运算放大电路27-5-29-5"><a href="#三、集成运算放大电路27-5-29-5" class="headerlink" title="三、集成运算放大电路27.5~29.5"></a>三、集成运算放大电路27.5~29.5</h1><p>多级放大电路作用：结合多种放大电路优点，$R_i R_o A_{uu}$</p><h2 id="3-1-耦合方式"><a href="#3-1-耦合方式" class="headerlink" title="3.1 耦合方式"></a>3.1 耦合方式</h2><h3 id="3-1-1-直接耦合"><a href="#3-1-1-直接耦合" class="headerlink" title="3.1.1 直接耦合"></a>3.1.1 直接耦合</h3><p><img src="/../pic/image-20240602181313110.png" alt="直接耦合"></p><p>a图问题：T2管$u_{be}&#x3D;0.7$，T1 $u_{ce1} &#x3D; u_{be2} &#x3D;0.7$，T1容易进入饱和区</p><p>改进b图：加电阻$R_{e2}$抬电压</p><p>改进c图：加二极管，但是需要很多二极管串联，所以加稳压二极管，并且加R提供稳定稳压二极管进入稳压区的电流。但是需要的VCC更大，所以改进为d图</p><p><strong>优点</strong>：低频特性好(无电容，低频电容容抗高)，容易集成</p><p><strong>缺点</strong>：难调试，前后静态工作点有耦合（确定静态工作点难，静态工作点与很多参数有关系）</p><h3 id="3-1-2-阻容耦合"><a href="#3-1-2-阻容耦合" class="headerlink" title="3.1.2 阻容耦合"></a>3.1.2 阻容耦合</h3><p><img src="/../pic/image-20240602182558716.png" alt="阻容耦合"></p><p>优点：调试简单，静态工作点好确定</p><p>缺点：大电容集成不了。低频电容阻抗高，不适合低频</p><h3 id="3-1-3-变压器耦合"><a href="#3-1-3-变压器耦合" class="headerlink" title="3.1.3 变压器耦合"></a>3.1.3 变压器耦合</h3><p><img src="/../pic/image-20240602182702935.png" alt="变压器耦合"></p><p>优点：变压器阻抗变换，调整功率</p><p>缺点：</p><h3 id="3-1-4-光电耦合"><a href="#3-1-4-光电耦合" class="headerlink" title="3.1.4 光电耦合"></a>3.1.4 光电耦合</h3><p><img src="/../pic/image-20240602182928808.png" alt="光电耦合"></p><h2 id="3-2-动态分析"><a href="#3-2-动态分析" class="headerlink" title="3.2 动态分析"></a>3.2 动态分析</h2><p>逐级分析 $R_i R_o A_{uu}$</p><p> $R_i$：后级的$R_i$是前级的$R_L$</p><p> $R_O$：前级的$R_O$是后级的$R_s$</p><h2 id="3-3-多级放大电路"><a href="#3-3-多级放大电路" class="headerlink" title="3.3 多级放大电路"></a>3.3 多级放大电路</h2><h3 id="3-3-1直接耦合放大电路零点漂移"><a href="#3-3-1直接耦合放大电路零点漂移" class="headerlink" title="3.3.1直接耦合放大电路零点漂移"></a>3.3.1直接耦合放大电路零点漂移</h3><p><strong>直接耦合放大电路的好处</strong>：容易集成，对低频信号能够放大 但 前后级工作点存在耦合，容易受温度影响</p><p>零点漂移现象：$U_i &#x3D; 0 ,U_o ≠0$</p><p><img src="/../pic/image-20240602201452732.png" alt="零点漂移现象"></p><p>产生原因：温漂</p><p>抑制方法：</p><blockquote><p>负反馈  $R_e$，但是放大倍数 $A_{uu}$ 会减小</p></blockquote><blockquote><p>差分放大 温漂同时产生抵消掉</p></blockquote><h3 id="3-3-2-差分放大电路"><a href="#3-3-2-差分放大电路" class="headerlink" title="3.3.2 差分放大电路"></a>3.3.2 差分放大电路</h3><p><img src="/../pic/image-20240602203507063.png" alt="差分放大电路"></p><p>优点：</p><p>①$R_e$稳定单个管子静态工作点相当于两倍$R_e$作用，</p><p>②交流等效模型$R_e$被消除，不影响放大倍数</p><p>③能完全抑制温漂等共模信号，对共模信号放大倍数为零。</p><p>交流分析：</p><p>最关键的是化简交流等效电路</p><p>求$A_{uu}，R_i，R_o$</p><h3 id="3-3-3-其他接法"><a href="#3-3-3-其他接法" class="headerlink" title="3.3.3 其他接法"></a>3.3.3 其他接法</h3><p>排列组合：双入双出 单入双出 双入单出 单入单出</p><ul><li>双入单出</li></ul><p><img src="/../pic/image-20240602204608723.png" alt="双入单出"></p><ul><li>单入双出</li></ul><p><img src="/../pic/image-20240602210311406.png" alt="单入双出"></p><p>单端输入分解成 差模信号+共模信号</p><ul><li>单入单出</li></ul><p><img src="/../pic/image-20240602210445865.png" alt="单入单出">、</p><p>改进：</p><p>①电流源代替 $R_e$</p><p>②MOSFET代替BJT</p><h3 id="3-3-4-互补输出级"><a href="#3-3-4-互补输出级" class="headerlink" title="3.3.4 互补输出级"></a>3.3.4 互补输出级</h3><p><strong>多级放大电路要求：</strong></p><p>输入级抑制温漂，干扰(差分放大电路)、输入电阻大(mosfet)—差分放大电路、mosfet</p><p>中间级放大电压电流—共射放大电路</p><p>输出级输出电阻小(射级输出器)，不失真，输出功率高，效率高</p><p><strong>甲乙丙功放区分：</strong></p><p><img src="/../pic/image-20240602211544838.png" alt="甲乙丙功放区分"></p><p>按照BJT对于交流信号的导通角度确定。</p><p>甲类：静态工作点太高，直流电压高，一直在耗电，效率低，但不失真。</p><p>乙类：静态工作点在截止区，只有正半轴信号通过，没有直流损耗不高但是只有一半不到的信号，有失真。</p><p>解决办法：两个乙类结合，正半轴  负半轴分开通过。</p><ul><li>互补输出级</li></ul><p><img src="/../pic/image-20240602212946749.png" alt="交越失真"></p><p>但是 $U_i$要克服 $U_{th}$死区产生失真。</p><p>解决办法：增加一个PN结的偏置。←二极管</p><p><img src="/../pic/image-20240602213420829.png" alt="交越失真互补输出级"></p><p>b对a的改进。</p><h3 id="3-3-5-直接耦合多级放大电路"><a href="#3-3-5-直接耦合多级放大电路" class="headerlink" title="3.3.5 直接耦合多级放大电路"></a>3.3.5 直接耦合多级放大电路</h3><p><img src="/../pic/image-20240602215054262.png" alt="直接耦合多级放大电路"></p><p>输入级：差分放大电路，消除共模干扰，温漂</p><p>中间级：达林顿管得到更大的放大倍数，共射放大电路的负载为电流源，放大倍数更大。</p><p>互补输出级：$R_o$小，功耗小，达林顿管构成NPN PNP。</p><p><strong>交流等效电路：</strong></p><p><img src="/../pic/image-20240602215854974.png" alt="交流等效电路"></p><h3 id="3-3-6-电流源电路"><a href="#3-3-6-电流源电路" class="headerlink" title="3.3.6 电流源电路"></a>3.3.6 电流源电路</h3><p>作用：提供静态稳定电路，$R_E足够大$，且不需要很大电压。 </p><h4 id="镜像电流源"><a href="#镜像电流源" class="headerlink" title="镜像电流源"></a>镜像电流源</h4><p><img src="/../pic/image-20250322104055028.png" alt="镜像电流源"></p><p>$U_{CE0} &#x3D;U_{BE0}→T_0工作在放大状态$ </p><p>$V_{B0} &#x3D; V_{B1} → I_{B0} &#x3D; I_{B1} →  I_{C0} &#x3D; I_{C1} → \frac{V_{CC}-0.7}{R}\frac{\beta}{(2+\beta)} &#x3D; I_{C0}&#x3D;I_{C1} $</p><p>缺点：</p><p>输出电流大→电阻R小，$I^2R$消耗过大功率，发热严重，损耗高</p><h4 id="比例电流源"><a href="#比例电流源" class="headerlink" title="比例电流源"></a>比例电流源</h4><p><img src="/../pic/image-20250322105426536.png" alt="比例电流源"></p><p>$I_{E0}R_{e0}+u_{be0} &#x3D; I_{E1}R_{e1}+u_{be1}  PN结特性→u_{be1}≈u_{be0}→ I_{E0}R_{e0} &#x3D; I_{E1}R_{e1}→I_{C1} &#x3D; \frac{I_{E0}R_{e0}}{R_{e1}}\frac{\beta}{1+\beta}$</p><h4 id="微电流源"><a href="#微电流源" class="headerlink" title="微电流源"></a>微电流源</h4><p><img src="/../pic/image-20250322110041576.png" alt="微电流源"></p><h4 id="射级输出器-电流源"><a href="#射级输出器-电流源" class="headerlink" title="射级输出器 电流源"></a>射级输出器 电流源</h4><p><img src="/../pic/image-20250322110429506.png" alt="射级输出器 电流源"></p><p>进一步减小R上电流。</p><p>$R_{e2}$稳定射级输出器电流。</p><p>威尔逊电流源</p><p><img src="/../pic/image-20250322110732248.png" alt="威尔逊电流源"></p><p>优点：</p><p>$I_{C2} ≈I_R$更相近</p><p>上面电流源做负载稳定$T_2$静态工作点</p><h4 id="多比例电流源"><a href="#多比例电流源" class="headerlink" title="多比例电流源"></a>多比例电流源</h4><p><img src="/../pic/image-20250322111321990.png" alt="多比例电流源"></p><h4 id="多集电极多路电流源"><a href="#多集电极多路电流源" class="headerlink" title="多集电极多路电流源"></a>多集电极多路电流源</h4><p><img src="/../pic/image-20250322111331157.png" alt="多集电极多路电流源"></p><p>MOS多路电流源</p><p><img src="/../pic/image-20250322111420024.png" alt="image-20250322111420024"></p><h3 id="3-3-7-电流源-作-有源负载"><a href="#3-3-7-电流源-作-有源负载" class="headerlink" title="3.3.7 电流源 作 有源负载"></a>3.3.7 电流源 作 有源负载</h3><p>电流源特性：</p><blockquote><p>电源固定</p><p>电压由负载电阻和电流源大小决定</p><p>输出电阻无穷大—用这一特性做负载</p></blockquote><h4 id="有源负载差分放大电路"><a href="#有源负载差分放大电路" class="headerlink" title="有源负载差分放大电路"></a>有源负载差分放大电路</h4><p><img src="/../pic/image-20250322132549936.png" alt="有源负载差分放大电路"></p><h3 id="F007内部电路"><a href="#F007内部电路" class="headerlink" title="F007内部电路"></a>F007内部电路</h3><p><img src="/../pic/image-20250322132906659.png" alt="F007内部电路"></p><p>UA741运放内部电路：<a href="https://blog.csdn.net/weixin_55255438/article/details/142438170">https://blog.csdn.net/weixin_55255438/article/details/142438170</a></p><h1 id="四、放大电路的频率响应-P23-P27"><a href="#四、放大电路的频率响应-P23-P27" class="headerlink" title="四、放大电路的频率响应(P23~P27)"></a>四、放大电路的频率响应(P23~P27)</h1><p>高频时PN结结间电容不可忽略！</p><p><img src="/../pic/image-20240602220516238.png" alt="放大倍数频率特性"></p><p>低频：耦合电容</p><p>高频：结间电容</p><h2 id="4-1-幅频特性概述"><a href="#4-1-幅频特性概述" class="headerlink" title="4.1 幅频特性概述"></a>4.1 幅频特性概述</h2><p>我是自控大王，不记了。</p><h2 id="4-2-BJT-Π型-高频不可忽略等效模型-23-27后面在看"><a href="#4-2-BJT-Π型-高频不可忽略等效模型-23-27后面在看" class="headerlink" title="4.2 BJT Π型 高频不可忽略等效模型(23-27后面在看)"></a>4.2 BJT Π型 高频不可忽略等效模型(23-27后面在看)</h2><p><img src="/../pic/image-20240602224112890.png" alt="BJT高频不可忽略等效模型"></p><p>简化高频不可忽略等效模型等效模型</p><p><img src="/../pic/image-20240602224215604.png" alt="简化高频不可忽略等效模型等效模型"></p><h2 id="4-3-MOSFET-高频不可忽略等效模型"><a href="#4-3-MOSFET-高频不可忽略等效模型" class="headerlink" title="4.3 MOSFET 高频不可忽略等效模型"></a>4.3 MOSFET 高频不可忽略等效模型</h2><h2 id="4-4-单级放大电路频率响应"><a href="#4-4-单级放大电路频率响应" class="headerlink" title="4.4 单级放大电路频率响应"></a>4.4 单级放大电路频率响应</h2><h2 id="4-5-多级放大电路频率响应"><a href="#4-5-多级放大电路频率响应" class="headerlink" title="4.5 多级放大电路频率响应"></a>4.5 多级放大电路频率响应</h2><h1 id="五、放大电路中的反馈29-5-35"><a href="#五、放大电路中的反馈29-5-35" class="headerlink" title="五、放大电路中的反馈29.5~35"></a>五、放大电路中的反馈29.5~35</h1><h2 id="5-1-反馈的判断"><a href="#5-1-反馈的判断" class="headerlink" title="5.1 反馈的判断"></a>5.1 反馈的判断</h2><p>反馈定义：输出量影响净输入量。</p><p>正反馈：输出量增大净输入量</p><p>负反馈：输出量减小净输入量</p><p>正负反馈判断：瞬时极性法，设输入增大，净输入量增大，$U_o$增大，净输入量增大或减小。</p><p>直流反馈：直流通路存在反馈。</p><p>交流反馈：交流通路存在反馈</p><p>直流交流反馈判断：直流通路 or 交流通路 判断反馈。</p><h2 id="5-2-反馈-四种组态"><a href="#5-2-反馈-四种组态" class="headerlink" title="5.2 反馈 四种组态"></a>5.2 反馈 四种组态</h2><p>反馈量取自电压，则为<strong>电压反馈</strong>，稳定电压。</p><p>反馈量取自电流，则为电流反馈，稳定电流。</p><p>反馈量和输入流以电压方式叠加，则为<strong>串联反馈</strong>。</p><p>反馈量和输入流以电流方式叠加，则为<strong>并联反馈</strong>。</p><p><strong>判断方法：</strong></p><p>令输出电压为零，判断是否还有反馈。还有就是电流负反馈，没有反馈就是电压负反馈。</p><p>输入和输出叠加的方式，在不同端口就是串联，同意端口就是并联。</p><h2 id="5-3-负反馈放大电路-方框图-表达式"><a href="#5-3-负反馈放大电路-方框图-表达式" class="headerlink" title="5.3 负反馈放大电路 方框图 表达式"></a>5.3 负反馈放大电路 方框图 表达式</h2><h3 id="5-3-1-负反馈方框图"><a href="#5-3-1-负反馈方框图" class="headerlink" title="5.3.1 负反馈方框图"></a>5.3.1 负反馈方框图</h3><p><img src="/../pic/image-20240605155725030-1717578528831-1.png" alt="方框图"></p><blockquote><p>环路放大倍数(开环放大倍数)：$\dot A\dot F&#x3D;\frac{\dot X_f}{\dot X_i^&#96;}$</p></blockquote><blockquote><p>闭环放大倍数：$\dot A_f &#x3D;  \frac{\dot X_o}{\dot X_i}$</p></blockquote><blockquote><p>反馈系数：$\dot A  &#x3D;  \frac{\dot X_o}{\dot X_i^&#96;}$</p></blockquote><blockquote><p>放大倍数：$\dot F &#x3D;  \frac{\dot X_f}{\dot X_o}$</p></blockquote><h3 id="5-3-2-四种组态方框图"><a href="#5-3-2-四种组态方框图" class="headerlink" title="5.3.2 四种组态方框图"></a>5.3.2 四种组态方框图</h3><p><img src="/../pic/image-20240605160332394-1717578528831-2.png" alt="四种组态方框图"></p><p>四种组态参数意义比较</p><p><img src="/../pic/image-20240605160430888-1717578528831-3.png" alt="四种组态参数意义比较"></p><h3 id="5-3-3-负反馈放大电路-表达式"><a href="#5-3-3-负反馈放大电路-表达式" class="headerlink" title="5.3.3 负反馈放大电路 表达式"></a>5.3.3 负反馈放大电路 表达式</h3><p>$\dot A_f &#x3D;  \frac{\dot X_o}{\dot X_i} &#x3D;  \frac{\dot A}{1+\dot A \dot F} ≈ \frac{1}{\dot F}$</p><p>因为$\dot A \dot F&gt;&gt;1$，所以计算负反馈状态下的放大倍数，只需要算 $\dot F$近似就行了。</p><h2 id="5-4-负反馈放大倍数分析"><a href="#5-4-负反馈放大倍数分析" class="headerlink" title="5.4 负反馈放大倍数分析"></a>5.4 负反馈放大倍数分析</h2><h3 id="5-4-1-深度负反馈实质"><a href="#5-4-1-深度负反馈实质" class="headerlink" title="5.4.1 深度负反馈实质"></a>5.4.1 深度负反馈实质</h3><p>当$\dot A \dot F&gt;&gt;1$，及 $ \dot X_i^<code> \dot A \dot F&gt;&gt;\dot X_i^</code>$，即净输入量 对于放大后的净输入量对输出的影响可忽略不计。</p><p>串联负反馈忽略电压。</p><p>并联负反馈忽略电流。</p><h3 id="5-4-2-5-4-3-反馈网络分析"><a href="#5-4-2-5-4-3-反馈网络分析" class="headerlink" title="5.4.2+5.4.3 反馈网络分析"></a>5.4.2+5.4.3 反馈网络分析</h3><p>求$\dot F $就行了。</p><h3 id="5-4-4-理想运放的放大倍数分析"><a href="#5-4-4-理想运放的放大倍数分析" class="headerlink" title="5.4.4 理想运放的放大倍数分析"></a>5.4.4 理想运放的放大倍数分析</h3><p>理想运放：</p><blockquote><p>差模放大倍数：Ad&#x3D;∞</p></blockquote><blockquote><p>共模放大倍数：Ac&#x3D;0</p></blockquote><blockquote><p>输入电阻：$R_i&#x3D;∞$，输出电阻：$R_o&#x3D;0$</p></blockquote><blockquote><p> 失调电压，失调电流，温漂&#x3D;0</p></blockquote><blockquote><p>上限截止频率：∞</p></blockquote><p>虚短：负反馈下，忽略净输入量，$U_+ &#x3D; U_-$。</p><p>续断：$R_i&#x3D;∞$，输入电流趋于零。</p><p>正因为引入负反馈，运放才工作在线性区，不至于饱和。</p><h2 id="5-5-负反馈对-性能-影响"><a href="#5-5-负反馈对-性能-影响" class="headerlink" title="5.5 负反馈对 性能 影响"></a>5.5 负反馈对 性能 影响</h2><p><strong>稳定放大倍数：</strong></p><p>$A_f &#x3D; \frac{A}{1+AF}$</p><p>$\frac{d_{A_f}}{d_A} &#x3D; \frac{1}{(1+AF)^2}→ \frac{d_{A_f}}{A_f} &#x3D; \frac{1}{1+AF}\frac{d_{A}}{A}$</p><p><strong>改变输入电阻：</strong></p><p>串联增大输入电阻：$R_{i}&#x3D;\frac{U_i^<code>&#125;&#123;I_i&#125;、R_&#123;if&#125;=\frac&#123;U_i&#125;&#123;I_i&#125; = \frac&#123;U_i^</code>AFU_i^&#96;}{I_i}$</p><p>并联减小输入电阻：$R_{if}&#x3D;\frac{U_i}{I_i}$</p><p><strong>改变输出电阻：</strong></p><p>电压负反馈稳定输出电压，减少输出电阻：</p><p>电流负反馈稳定输出电流，增大输出电阻：</p><p><strong>展宽频带：</strong></p><p><strong>减小非线性失真：</strong></p><p><strong>一般原则：</strong></p><blockquote><p> 静态工作点—支流负反馈、动态性能—交流负反馈</p></blockquote><blockquote><p>电压型输入信号源—串联、电流型输入信号源—并联</p></blockquote><blockquote><p> 输出电压—电压负反馈、输出电路—交流负反馈</p></blockquote><h2 id="5-6-负反馈放大电路稳定性"><a href="#5-6-负反馈放大电路稳定性" class="headerlink" title="5.6 负反馈放大电路稳定性"></a>5.6 负反馈放大电路稳定性</h2><p><strong>自激振荡：</strong></p><p>类似自动控制原理的描述函数振荡点；</p><p>AF环节与 某一频率的信号幅值有关，当信号幅值小于某一幅值$|X_0|$，系统不稳定，幅值增大，当信号幅值大于这一幅值$|X_0|$，系统趋于稳定，幅值减小。</p><p>条件：</p><p>$|AF|&#x3D;1$</p><p>$\angle(AF) &#x3D; -180°$</p><p>对于信号的频率$f $幅值$|X_0|$有解。</p><p>且信号幅值减小系统不稳定：即$|\dot A \dot F| &gt;1$，当信号幅值→0时。</p><h3 id="5-6-4-消除自激振荡"><a href="#5-6-4-消除自激振荡" class="headerlink" title="5.6.4 消除自激振荡"></a>5.6.4 消除自激振荡</h3><p><strong>滞后补偿</strong>：</p><blockquote><p>简单滞后补偿</p></blockquote><blockquote><p>RC滞后补偿</p></blockquote><blockquote><p>密勒效应补偿</p></blockquote><p><strong>超前补偿</strong>：</p><h2 id="5-7-其他反馈形式"><a href="#5-7-其他反馈形式" class="headerlink" title="5.7 其他反馈形式"></a>5.7 其他反馈形式</h2><h1 id="六、信号的运算和处理36-39"><a href="#六、信号的运算和处理36-39" class="headerlink" title="六、信号的运算和处理36~39"></a>六、信号的运算和处理36~39</h1><p>运放工作前提：引入负反馈，让运放工作在线性区。</p><p>分析出发点：</p><blockquote><p>虚短：引入负反馈，且运放放大倍数很大。两端电压近似相等。</p><p>虚断：输入电阻无穷大，流入运放电流等于零。</p></blockquote><h2 id="6-1-基本运算电路"><a href="#6-1-基本运算电路" class="headerlink" title="6.1 基本运算电路"></a>6.1 基本运算电路</h2><h3 id="6-1-2-比例运算电路"><a href="#6-1-2-比例运算电路" class="headerlink" title="6.1.2 比例运算电路"></a>6.1.2 比例运算电路</h3><h4 id="反向比例运算电路"><a href="#反向比例运算电路" class="headerlink" title="反向比例运算电路"></a>反向比例运算电路</h4><p><img src="/../pic/image-20240603225740429.png" alt="反向比例运算电路"></p><p>$R^&#96;$是平衡电阻，保证运放输入级差分放大电路的对称性，保证两者的静态工作点相同，当没有输入时，输出等于零。</p><p>缺点：输入电阻&#x3D;R，当要求输出电阻大时，$R_f &#x3D; βR$，导致$R_f$很大，阻值太大存在误差，且运放内阻不可忽略。</p><h4 id="T型网络反向比例运算电路"><a href="#T型网络反向比例运算电路" class="headerlink" title="T型网络反向比例运算电路"></a>T型网络反向比例运算电路</h4><p><img src="/../pic/image-20240603230243964.png" alt="T型网络反向比例运算电路"></p><h4 id="同相比例运算电路"><a href="#同相比例运算电路" class="headerlink" title="同相比例运算电路"></a>同相比例运算电路</h4><p><img src="/../pic/image-20240603230502042.png" alt="同相比例运算电路"></p><h4 id="电压跟随器"><a href="#电压跟随器" class="headerlink" title="电压跟随器"></a>电压跟随器</h4><p><img src="/../pic/image-20240603230513465.png" alt="电压跟随器"></p><h3 id="6-1-3-加减运算电路"><a href="#6-1-3-加减运算电路" class="headerlink" title="6.1.3 加减运算电路"></a>6.1.3 加减运算电路</h3><h4 id="反向求和运算电路"><a href="#反向求和运算电路" class="headerlink" title="反向求和运算电路"></a>反向求和运算电路</h4><p><img src="/../pic/image-20240603230541189.png" alt="反向求和运算电路"></p><h4 id="同向求和运算电路"><a href="#同向求和运算电路" class="headerlink" title="同向求和运算电路"></a>同向求和运算电路</h4><p><img src="/../pic/image-20240603230612988.png" alt="同向求和运算电路"></p><h4 id="加减运算电路"><a href="#加减运算电路" class="headerlink" title="加减运算电路"></a>加减运算电路</h4><p><img src="/../pic/image-20240603230559663.png" alt="加减运算电路"></p><h3 id="6-1-4-微积分运算电路"><a href="#6-1-4-微积分运算电路" class="headerlink" title="6.1.4 微积分运算电路"></a>6.1.4 微积分运算电路</h3><h4 id="积分运算电路"><a href="#积分运算电路" class="headerlink" title="积分运算电路"></a>积分运算电路</h4><p><img src="/../pic/image-20240603230710154.png" alt="积分运算电路"></p><p>$R_f$防止低频信号增益过大。</p><h4 id="微分运算电路"><a href="#微分运算电路" class="headerlink" title="微分运算电路"></a>微分运算电路</h4><h5 id="基本微分运算电路"><a href="#基本微分运算电路" class="headerlink" title="基本微分运算电路"></a>基本微分运算电路</h5><p><img src="/../pic/image-20240603230901771.png" alt="基本微分运算电路"></p><h5 id="实用微分运算电路"><a href="#实用微分运算电路" class="headerlink" title="实用微分运算电路"></a>实用微分运算电路</h5><p><img src="/../pic/image-20240603231019425.png" alt="实用微分运算电路"></p><p>$R_1$：当输入信号为阶跃信号时，限制电流突变</p><p>$D_{z1} D_{z2}$：限制输出电压幅值，保证BJT工作在放大区。</p><p>$C_1$：相位补偿，防止产生自激振荡。</p><h5 id="逆函数型微分运算电路"><a href="#逆函数型微分运算电路" class="headerlink" title="逆函数型微分运算电路"></a>逆函数型微分运算电路</h5><p><img src="/../pic/image-20240603231529589.png" alt="逆函数型微分运算电路"></p><h3 id="6-1-5-对数-指数运算电路"><a href="#6-1-5-对数-指数运算电路" class="headerlink" title="6.1.5 对数&#x2F;指数运算电路"></a>6.1.5 对数&#x2F;指数运算电路</h3><h4 id="对数运算电路"><a href="#对数运算电路" class="headerlink" title="对数运算电路"></a>对数运算电路</h4><h5 id="二极管-对数运算电路"><a href="#二极管-对数运算电路" class="headerlink" title="二极管 对数运算电路"></a>二极管 对数运算电路</h5><p><img src="/../pic/image-20240603231552472.png" alt="二极管 对数运算电路"></p><h5 id="BJT-对数运算电路"><a href="#BJT-对数运算电路" class="headerlink" title="BJT 对数运算电路"></a>BJT 对数运算电路</h5><p><img src="/../pic/image-20240603231606835.png" alt="BJT 对数运算电路"></p><h5 id="集成-对数运算电路"><a href="#集成-对数运算电路" class="headerlink" title="集成 对数运算电路"></a>集成 对数运算电路</h5><p><img src="/../pic/image-20240603231617458.png" alt="集成 对数运算电路"></p><h4 id="指数运算电路"><a href="#指数运算电路" class="headerlink" title="指数运算电路"></a>指数运算电路</h4><p><img src="/../pic/image-20240603231629360.png" alt="指数运算电路"></p><h2 id="6-2-模拟乘法器应用"><a href="#6-2-模拟乘法器应用" class="headerlink" title="6.2 模拟乘法器应用"></a>6.2 模拟乘法器应用</h2><h2 id="6-3-运放有源滤波电路"><a href="#6-3-运放有源滤波电路" class="headerlink" title="6.3 运放有源滤波电路"></a>6.3 运放有源滤波电路</h2><h2 id="6-4-预处理放大电路"><a href="#6-4-预处理放大电路" class="headerlink" title="6.4 预处理放大电路"></a>6.4 预处理放大电路</h2><h3 id="6-4-1-仪表放大器"><a href="#6-4-1-仪表放大器" class="headerlink" title="6.4.1 仪表放大器"></a>6.4.1 仪表放大器</h3><p><img src="/../pic/image-20240603233102656.png" alt="三运放仪表放大器"></p><h1 id="七、波形的发生和信号的转换40-45"><a href="#七、波形的发生和信号的转换40-45" class="headerlink" title="七、波形的发生和信号的转换40~45"></a>七、波形的发生和信号的转换40~45</h1><h1 id="八、功率放大电路（视频没有，自学）"><a href="#八、功率放大电路（视频没有，自学）" class="headerlink" title="八、功率放大电路（视频没有，自学）"></a>八、功率放大电路（视频没有，自学）</h1><p>参考：</p><p>视频-郑益慧 <a href="https://www.bilibili.com/video/BV1Gt411b7Zq?spm_id_from=333.788.videopod.episodes&vd_source=a22df97d952bf6fe9e5ff104f2f90e57">https://www.bilibili.com/video/BV1Gt411b7Zq?spm_id_from=333.788.videopod.episodes&amp;vd_source=a22df97d952bf6fe9e5ff104f2f90e57</a></p><p>电子教材：<a href="https://pan.baidu.com/s/1UUJqst5gtyuQtx45O6Yexg?pwd=1234">https://pan.baidu.com/s/1UUJqst5gtyuQtx45O6Yexg?pwd=1234</a></p>]]></content>
    
    
    <categories>
      
      <category>课程</category>
      
      <category>专业课</category>
      
    </categories>
    
    
    <tags>
      
      <tag>电路</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>科研</title>
    <link href="/2025/01/02/%E7%A7%91%E7%A0%94idea/"/>
    <url>/2025/01/02/%E7%A7%91%E7%A0%94idea/</url>
    
    <content type="html"><![CDATA[<h1 id="科研方法"><a href="#科研方法" class="headerlink" title="科研方法"></a>科研方法</h1><h1 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h1><p>线圈偏移</p><h1 id="撰写"><a href="#撰写" class="headerlink" title="撰写"></a>撰写</h1><p>写文章思路：提出问题，针对这个问题已经有的研究，但是还是存在的缺陷。本文相比前文做的工作。</p><h3 id="论文格式"><a href="#论文格式" class="headerlink" title="论文格式"></a>论文格式</h3><p>摘要和引言的缩写要独立</p><p>尖锐说法：不要说 完全 没有，很差。</p><p>变量斜体  标量加粗  下标 图里的也是</p><p>图和符号的来源要解释</p><p>参数问题要实际测</p><h1 id="共模噪声实验"><a href="#共模噪声实验" class="headerlink" title="共模噪声实验"></a>共模噪声实验</h1><h2 id="传导噪声测试平台"><a href="#传导噪声测试平台" class="headerlink" title="传导噪声测试平台"></a>传导噪声测试平台</h2><p><strong>LISN作用</strong>：</p><blockquote><p>不同地区电网侧阻抗不同，会影响传导噪声的幅值，为了实验结果在不同地区可以复现，规定一个稳定的标准阻抗，都按这个阻抗来测试传导噪声。</p></blockquote><blockquote><p>滤除电网测的噪声，使测量到的都为EUT（）产生的噪声。</p></blockquote><blockquote><p>把电流转化为电压信号，CE测试的频率范围为：150kHz到30MHz，其本质是噪声电流，但是我们最终将噪声电流转换为噪声电压来测量，这个过程就是LISN在起作用。</p></blockquote><blockquote><p>提供接口给EMI接收机&#x2F;频谱仪</p></blockquote><p><img src="/../pic/image-20240705090614906.png" alt="LISN作用"></p><p><img src="/../pic/image-20240705090753781.png" alt="LISN内部结构"></p><p><strong>1uF和5uH作用</strong>：对于高频传导噪声电流，1uF低阻抗和5uH高阻抗，电网侧干扰从1uF支路过滤掉，使接收机测量到的噪声是EUT产生的。</p><p>电网侧电流噪声来源：一个地区的电网上连接着很多用电器，这些用电器在工作的同时会向电网上注入干扰。CE顺着导体传播的。所以电网侧电源并不是“干净”的，这些干扰如果不经过过滤，直接连接到接收机里，测试结果有偏差，而且使得结果没有可重复性。</p><p><strong>0.1uF</strong>作用：直流分量会损坏接收机，0.1uF用于隔直通交，测试过程中，被测电压瞬态有存在尖峰的可能性，损坏频谱分析仪，电容能吸收尖峰。0.1uF对于150k到30M之间的CE干扰成分视作短路，不影响测试结果，同时对50Hz工作频率表现为大阻抗，不损耗功率传输。</p><p><strong>50Ω作用</strong>：接收机内部其作用是将噪声电流转换为噪声电压。   虚拟负载保持L、N线对称性。</p><p><strong>1kΩ作用：</strong>给0.1uF的电容放电。</p><p>明确传导干扰实验步骤&#x2F;器件如何连接：</p><p><a href="https://www.bilibili.com/video/BV1uK4y1F7qq/?spm_id_from=333.1365.top_right_bar_window_history.content.click&vd_source=b9b657465c6a8feca7c2a3699702b4c7">https://www.bilibili.com/video/BV1uK4y1F7qq/?spm_id_from=333.1365.top_right_bar_window_history.content.click&amp;vd_source=b9b657465c6a8feca7c2a3699702b4c7</a></p><p><a href="https://www.bilibili.com/video/BV1Zw411H7FC/?spm_id_from=333.337.search-card.all.click&vd_source=b9b657465c6a8feca7c2a3699702b4c7">https://www.bilibili.com/video/BV1Zw411H7FC/?spm_id_from=333.337.search-card.all.click&amp;vd_source=b9b657465c6a8feca7c2a3699702b4c7</a></p>]]></content>
    
    
    <categories>
      
      <category>科研</category>
      
    </categories>
    
    
    <tags>
      
      <tag>科研</tag>
      
      <tag>研究生</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>自动控制原理</title>
    <link href="/2025/01/02/%E8%87%AA%E5%8A%A8%E6%8E%A7%E5%88%B6%E5%8E%9F%E7%90%86/"/>
    <url>/2025/01/02/%E8%87%AA%E5%8A%A8%E6%8E%A7%E5%88%B6%E5%8E%9F%E7%90%86/</url>
    
    <content type="html"><![CDATA[<h1 id="拉氏变换："><a href="#拉氏变换：" class="headerlink" title="拉氏变换："></a>拉氏变换：</h1><p>意义：求解微分方程、分频分析</p><p>$L[f(t)] &#x3D; \int_0^{+∞}f(t)e^{-st}dt$</p><h1 id="常见拉氏变换："><a href="#常见拉氏变换：" class="headerlink" title="常见拉氏变换："></a>常见拉氏变换：</h1><p>$sin(wt) → \frac{w}{s^2 + w^2}$</p><p>$cos(wt) → \frac{s}{s^2 + w^2}$</p><blockquote><p>$sinwt &#x3D; \frac{e^{jwt} - e^{-jwt} }{2j}$→$\int_0^{+∞}{sinwt}{e^{-st}}dt &#x3D; \int_0^{+∞}{\frac{e^{jwt} - e^{-jwt} }{2j}}{e^{-st}}dt &#x3D; \frac{w}{s^2 + w^2}$</p></blockquote><blockquote><p>$coswt &#x3D; \frac{e^{jwt} + e^{-jwt}}{2}$→$\int_0^{+∞}{coswt}{e^{-st}}dt &#x3D; \int_0^{+∞}{\frac{e^{jwt} + e^{-jwt} }{2}}{e^{-st}}dt &#x3D; \frac{s}{s^2 + w^2}$</p></blockquote><p>$A →  \frac{A}{s}$</p><blockquote><p>$\int_0^{+∞}{A}{e^{-st}}dt  &#x3D; \frac{A}{s}$</p></blockquote><h1 id="拉氏变换性质："><a href="#拉氏变换性质：" class="headerlink" title="拉氏变换性质："></a>拉氏变换性质：</h1><p>线性可加性：$L[K_1f_1(t) + K_2f_2(t) ] &#x3D; K_1F_1(S) + K_2F_2(s)$</p><p>微分定理：$L[\frac{df(t)}{dt}  ] &#x3D; sF(s) - f(0)$、$L[\frac{d^2f(t)}{dt^2}  ] &#x3D; s^2F(s) - \dot{f(0)}-sf(0)$</p><p>位移定理：$L[f(t-a)] &#x3D; e^{-at}F(s)$</p><p>复数域位移定理：</p><p><strong>初值定理：</strong>$L[\frac{df(t)}{dt}  ] &#x3D; sF(s) - f(0)&#x3D;\int_0^∞f(t)e^{-st}dt $、当s→无穷$sF(s) - f(0)&#x3D;0→f(0)&#x3D;\lim_{s \to \infty}sF(s)$ </p><p><strong>终值定理：</strong>$L[\frac{df(t)}{dt}  ] &#x3D; sF(s) - f(0)&#x3D;\int_0^∞f(t)e^{-st}dt $、当s→0$sF(s) - f(0)&#x3D; f(\infty)- f(0)→f(\infty)&#x3D;\lim_{s \to 0}sF(s)$ 求稳态误差</p><p>卷积定理：</p><h1 id="二阶系统单位阶跃响应时域推导"><a href="#二阶系统单位阶跃响应时域推导" class="headerlink" title="二阶系统单位阶跃响应时域推导"></a>二阶系统单位阶跃响应时域推导</h1><p><strong>传递函数：</strong></p><p>$\Phi_{(s)} &#x3D; \frac{1}{s^2 + 2 \epsilon w_ns + w_n^2}$</p>]]></content>
    
    
    <categories>
      
      <category>课程</category>
      
      <category>专业课</category>
      
    </categories>
    
    
    <tags>
      
      <tag>自动控制原理</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Simplorer_Maxwell联合仿真</title>
    <link href="/2025/01/02/Simplorer_Maxwell%E8%81%94%E5%90%88%E4%BB%BF%E7%9C%9F/"/>
    <url>/2025/01/02/Simplorer_Maxwell%E8%81%94%E5%90%88%E4%BB%BF%E7%9C%9F/</url>
    
    <content type="html"><![CDATA[<p>Maxwell线圈自感建模：</p><p>资料教程：<a href="https://pan.baidu.com/s/1MdFJy7BNmWE-VoBvgyQ1sw?pwd=1234">https://pan.baidu.com/s/1MdFJy7BNmWE-VoBvgyQ1sw?pwd=1234</a></p><p>Maxwell螺旋线圈自互感建模：</p><p>线圈设置：<a href="https://www.bilibili.com/video/BV1LM4m1Z7KP/?spm_id_from=333.788.top_right_bar_window_history.content.click&vd_source=b9b657465c6a8feca7c2a3699702b4c7">https://www.bilibili.com/video/BV1LM4m1Z7KP/?spm_id_from=333.788.top_right_bar_window_history.content.click&amp;vd_source=b9b657465c6a8feca7c2a3699702b4c7</a></p><p><a href="https://www.bilibili.com/video/BV1Se4y1X7r4/?spm_id_from=333.337.search-card.all.click&vd_source=b9b657465c6a8feca7c2a3699702b4c7">https://www.bilibili.com/video/BV1Se4y1X7r4/?spm_id_from=333.337.search-card.all.click&amp;vd_source=b9b657465c6a8feca7c2a3699702b4c7</a></p><p>激励设置：<a href="https://www.bilibili.com/video/BV1EB4y1t7g9?spm_id_from=333.788.videopod.sections&vd_source=b9b657465c6a8feca7c2a3699702b4c7">https://www.bilibili.com/video/BV1EB4y1t7g9?spm_id_from=333.788.videopod.sections&amp;vd_source=b9b657465c6a8feca7c2a3699702b4c7</a></p><p>Maxwell参数化扫描：</p><p>参考：<a href="https://www.bilibili.com/video/BV1Lv4y1f7pR?p=3&vd_source=b9b657465c6a8feca7c2a3699702b4c7">https://www.bilibili.com/video/BV1Lv4y1f7pR?p=3&amp;vd_source=b9b657465c6a8feca7c2a3699702b4c7</a></p><p>Maxwell互感建模：</p><p>参考：<a href="https://www.bilibili.com/video/BV1Lv4y1f7pR?p=3&vd_source=b9b657465c6a8feca7c2a3699702b4c7">https://www.bilibili.com/video/BV1Lv4y1f7pR?p=3&amp;vd_source=b9b657465c6a8feca7c2a3699702b4c7</a></p><p>Maxwell Simplorer联合仿真：</p><p>在maxwell里面添加激励，通过激励把Maxwell和Simplorer联系起来。</p><p>参考：</p><p><a href="https://www.bilibili.com/video/BV1ra411v7Jb/?spm_id_from=333.337.search-card.all.click&vd_source=b9b657465c6a8feca7c2a3699702b4c7">https://www.bilibili.com/video/BV1ra411v7Jb/?spm_id_from=333.337.search-card.all.click&amp;vd_source=b9b657465c6a8feca7c2a3699702b4c7</a></p><p><a href="https://www.bilibili.com/video/BV1hp4y1W7nG/?spm_id_from=333.788.recommend_more_video.2&vd_source=b9b657465c6a8feca7c2a3699702b4c7">https://www.bilibili.com/video/BV1hp4y1W7nG/?spm_id_from=333.788.recommend_more_video.2&amp;vd_source=b9b657465c6a8feca7c2a3699702b4c7</a></p>]]></content>
    
    
    <categories>
      
      <category>工具</category>
      
      <category>仿真工具</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Maxwell</tag>
      
      <tag>Simplorer</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>WPT</title>
    <link href="/2025/01/02/WPT/"/>
    <url>/2025/01/02/WPT/</url>
    
    <content type="html"><![CDATA[<h1 id="拓扑公式"><a href="#拓扑公式" class="headerlink" title="拓扑公式"></a>拓扑公式</h1><h2 id="LCC-LCC"><a href="#LCC-LCC" class="headerlink" title="LCC-LCC"></a>LCC-LCC</h2><p><img src="/../pic/clip_image002.jpg" alt="img"></p><p>副边阻抗Zs、反射阻抗 Zr、原边输入阻抗Zp</p><p>谐振：</p><p><img src="/../pic/clip_image004.jpg" alt="img"></p><p><strong>无损耗模型：</strong>忽略补偿电感、补偿电容、传能线圈内阻</p><p><img src="/../pic/clip_image006.jpg" alt="img">谐振后化简<img src="/../pic/clip_image008.jpg" alt="img"></p><p><img src="/../pic/clip_image010.jpg" alt="img"></p><p><strong>损耗模型：</strong>考虑传能线圈内阻Rp、Rs （补偿电感内阻小，忽略）</p><p><img src="/../pic/clip_image012.jpg" alt="img"> 化简<img src="/../pic/clip_image014.jpg" alt="img"></p><p>电气参数</p><p><img src="/../pic/clip_image016.jpg" alt="img"></p><p>仅考虑线圈铜损</p><p><img src="/../pic/clip_image018.jpg" alt="img"></p><p><img src="/../pic/clip_image020.jpg" alt="img"></p><h2 id="LCC-S"><a href="#LCC-S" class="headerlink" title="LCC-S"></a>LCC-S</h2><p><img src="/../pic/clip_image002.png" alt="img"></p><p>系统谐振时：</p><p><img src="/../pic/clip_image002-1718586598598-2.png" alt="img">        （1)</p><p>即</p><p><img src="/../pic/clip_image006.png" alt="img">              （2）</p><p><img src="/../pic/clip_image008.png" alt="img">            （3）</p><p><img src="/../pic/clip_image010.png" alt="img">               （4）</p><p>副边阻抗表示为：</p><p><img src="/../pic/clip_image012.png" alt="img">      （5）</p><p>副边反射到原边的反射阻抗表示为：</p><p><img src="/../pic/clip_image014.png" alt="img">          （6）</p><p>原边阻抗表示为：</p><p><img src="/../pic/clip_image016.png" alt="img">   （7）</p><p>忽略电源内阻，当<img src="/../pic/clip_image018.png" alt="img">时，将式(2)和式(3)带入式(7)，原边阻抗化简得：</p><p><img src="/../pic/clip_image020.png" alt="img">        （8）</p><p>推导过程：</p><p><img src="/../pic/clip_image022.png" alt="img"></p><p>逆变电流表示为：</p><p><img src="/../pic/clip_image024.png" alt="img">             （9）</p><p>原边线圈电流代入式(2)和式(3)后，化简后表示为：</p><p><img src="/../pic/clip_image026.png" alt="img">      （10）</p><p>带入式(8)后化简为：</p><p><img src="/../pic/clip_image028.png" alt="img">          （11）</p><p>或由基尔霍夫电压定律得：</p><p><img src="/../pic/clip_image030.png" alt="img"></p><p><img src="/../pic/clip_image032.png" alt="img"></p><p>带入式(4)后，副边线圈电流表示为：</p><p><img src="/../pic/clip_image034.png" alt="img">     （12）</p><p>负载输出电压：</p><p><img src="/../pic/clip_image036.png" alt="img">       （13）</p><p>负载输出功率：</p><p><img src="/../pic/clip_image038.png" alt="img">       （14)</p><h2 id="S-S"><a href="#S-S" class="headerlink" title="S-S"></a>S-S</h2><p><img src="/../pic/%E6%8B%93%E6%89%91_%E9%A1%B5%E9%9D%A2_1.png" alt="拓扑_页面_1"></p><p><img src="/../pic/%E6%8B%93%E6%89%91_%E9%A1%B5%E9%9D%A2_2.png" alt="拓扑_页面_2"></p><p><img src="/../pic/%E6%8B%93%E6%89%91_%E9%A1%B5%E9%9D%A2_3.png" alt="拓扑_页面_3"></p><p><img src="/../pic/%E6%8B%93%E6%89%91_%E9%A1%B5%E9%9D%A2_4.png" alt="拓扑_页面_4"></p><p><img src="/../pic/%E6%8B%93%E6%89%91_%E9%A1%B5%E9%9D%A2_5.png" alt="拓扑_页面_5"></p><p><img src="/../pic/%E6%8B%93%E6%89%91_%E9%A1%B5%E9%9D%A2_6.png" alt="拓扑_页面_6"></p><h1 id="719项目"><a href="#719项目" class="headerlink" title="719项目"></a>719项目</h1><p>时刻注意<strong>爬电距离</strong>1mm200v</p>]]></content>
    
    
    <categories>
      
      <category>科研</category>
      
    </categories>
    
    
    <tags>
      
      <tag>WPT</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>开关变换器的建模与控制</title>
    <link href="/2025/01/02/%E5%BC%80%E5%85%B3%E5%8F%98%E6%8D%A2%E5%99%A8%E7%9A%84%E5%BB%BA%E6%A8%A1%E4%B8%8E%E6%8E%A7%E5%88%B6/"/>
    <url>/2025/01/02/%E5%BC%80%E5%85%B3%E5%8F%98%E6%8D%A2%E5%99%A8%E7%9A%84%E5%BB%BA%E6%A8%A1%E4%B8%8E%E6%8E%A7%E5%88%B6/</url>
    
    <content type="html"><![CDATA[<p>建模与控制：PWM变换器 and 谐振变换器</p><p>书分为三部分：</p><p><strong>建模：</strong></p><blockquote><p>CCM变换器建模—基本建模、状态空间平均、开关元件平均法、开关网络平均法</p></blockquote><blockquote><p>DCM变换器建模—状态空间平均、开关元件平均法、开关网络平均法</p></blockquote><p><strong>控制：</strong></p><blockquote><p>开关调节系统基本知识—瞬态响应 频域分析</p></blockquote><blockquote><p>电压控制型设计</p></blockquote><blockquote><p>平均电流控制型设计</p></blockquote><blockquote><p>峰值电流控制型设计</p></blockquote><p><strong>仿真：</strong></p><blockquote><p>用PSpice仿真</p></blockquote><p><strong>简单介绍谐振变换器建模与控制：</strong></p><h1 id="一、CCM变换器建模"><a href="#一、CCM变换器建模" class="headerlink" title="一、CCM变换器建模"></a>一、CCM变换器建模</h1><p><img src="/../pic/image-20240819083611592.png" alt="DC-DC系统结构图"></p><p>$v(t)输出电压→V_{ref}→ \delta(t)（PWM方波信号） →d(t)（驱动方波信号）→v(t)输出电压$</p><p>输出信号：$v(t)$</p><p>输入信号：$d(t)、v_g(t)$</p><p><img src="/../pic/image-20240819083851731.png" alt="在Buck上具体实现"></p><p><img src="/../pic/image-20240819083937394.png" alt="PWM实现方式">、</p><p>锯齿波+比较器：大于电压输出0、小于电压输出1。</p><p><img src="/../pic/image-20240819084325041.png" alt="理想/实际波形图"></p><p>整流后电压存在低频谐波(工频交流电整流引起&#x2F;工频交流电扰动)：频率远小于开关频率，所以后面可以认为系统一直是稳态的。</p><p>这个低频谐波会给输出引入交流分量。</p><p><strong>忽略开关频率及谐波原因：</strong></p><p>系统转折频率 $f_0&lt;&lt;f_s$，开关分量被衰减。</p><p>按照传输信号种类分类：</p><blockquote><p>稳态模型</p></blockquote><blockquote><p>小信号模型：本章要讨论的</p></blockquote><blockquote><p>大信号模型</p></blockquote><p><strong>建模主要思路：</strong></p><blockquote><p>开关文纹波的忽略：对各变量在开关周期内求平均。</p></blockquote><blockquote><p>把平均变量表示为 直流信号+小交流信号</p></blockquote><blockquote><p>在直流工作点附近线性化系统</p></blockquote><h2 id="1-2-DC-DC小信号模型概述"><a href="#1-2-DC-DC小信号模型概述" class="headerlink" title="1.2 DC-DC小信号模型概述"></a>1.2 DC-DC小信号模型概述</h2><p>分析变换器低频动态特性</p><h3 id="1-2-1-基本建模法"><a href="#1-2-1-基本建模法" class="headerlink" title="1.2.1 基本建模法"></a>1.2.1 基本建模法</h3><p>以Boost为例。</p><p><img src="/../pic/image-20240819091333557.png" alt="Boost原理图"></p><p><strong>一、求平均变量</strong></p><p>因为$f_g(低频信号频率)&lt;&lt;f_s(开关频率)$ 相当于香农采样定理用$f_s$对系统取近似、$f_0(转折频率)&lt;&lt;f_s(开关频率)$ 开关频率分量纹波被衰减，且可以在一个开关周期内求平均变量、以忽略开关纹波。</p><p><img src="/../pic/image-20240819091620143.png" alt="理想Boost两种模态"></p><p><strong>模态a</strong><br>$$<br>v_g(t)&#x3D;L\frac{d_i(t)}{dt}\<br>C\frac{d_(t)}{dt}&#x3D;-\frac{v(t)}{R}<br>$$<br><strong>模态b</strong><br>$$<br>L\frac{d_i(t)}{dt}&#x3D;v_g(t)-v(t)\<br>C\frac{d_(t)}{dt}&#x3D;i(t)-\frac{v(t)}{R}<br>$$<br>每个周期变化率：</p><p>电感电流：$L\frac{d_i(t)}{dt}&#x3D;v_g(t)d(t)+(v_g(t)-v(t))(1-d(t))&#x3D;v_g(t)-(1-d(t))v(t)$</p><p>电容电压：$C\frac{d_(t)}{dt}&#x3D;-\frac{v(t)}{R}d(t)+(1-d(t))(\frac{v(t)}{R}-i(t))&#x3D;-\frac{v(t)}{R}+(1-d(t))i(t)$</p><p><strong>二、分离直流+小交流信号量</strong></p><p>前提：交流信号足够小，使线性化误差很小。<br>$$<br>v_g(t) &#x3D; V_g+dv_g(t)\<br>i(t) &#x3D; I+d{i}(t)\<br>v(t)&#x3D;V+d{v}(t)\<br>d(t) &#x3D; D+d_{d}(t)<br>$$<br><strong>三、线性化</strong></p><p>对电感电流、电容电压取微分。</p><p>$d(L\frac{d_i(t)}{dt})&#x3D;dv_g(t)-(1-D)d{v}(t)+Vd_{d}(t)$</p><p>$d(C\frac{d_(t)}{dt})&#x3D;-\frac{1}{R}d{v}(t)+(1-D)d{i}(t)-Id_{d}(t)$</p><h3 id="1-2-2-小信号等效电路"><a href="#1-2-2-小信号等效电路" class="headerlink" title="1.2.2 小信号等效电路"></a>1.2.2 小信号等效电路</h3><p><img src="/../pic/image-20240819102832152.png" alt="线性化后得到的交流小信号等效电路"></p><p><img src="/../pic/image-20240819103124422.png" alt="电感电容回路组合后得到的总交流小信号等效电路"></p><h3 id="1-2-3-小信号等效电路的分析"><a href="#1-2-3-小信号等效电路的分析" class="headerlink" title="1.2.3 小信号等效电路的分析"></a>1.2.3 小信号等效电路的分析</h3><p>传递函数：</p><blockquote><p>对输入电压：$G_{vg}(s)&#x3D;\frac{1}{D^\prime}\frac{1}{1+s\frac{L}{D^{\prime2}R}+s^2\frac{LC}{D^{\prime2}}}$</p></blockquote><blockquote><p>对占空比：$G_{vd}(s)&#x3D;\frac{V_g}{D^{\prime2}}\frac{1-\frac{L}{D^{\prime2}}s}{1+s\frac{L}{D^{\prime2}R}+s^2\frac{LC}{D^{\prime2}}}$</p></blockquote><blockquote><p>开环输入阻抗：$Z_{in}(s)&#x3D;D^{\prime2}R\frac{1+s\frac{L}{D^{\prime2}R}+s^2\frac{LC}{D^{\prime2}}}{1+sCR  }$</p></blockquote><blockquote><p>开环输出阻抗：$Z_{out}(s)&#x3D;\frac{L}{D^{\prime2}}\frac{s}{1+s\frac{L}{D^{\prime2}R}+s^2\frac{LC}{D^{\prime2}}}$</p></blockquote><p><strong>总结：</strong></p><p>三个假设：</p><blockquote><p>低频干扰： $f_g &lt;&lt; f_s$、香农采样定理</p></blockquote><blockquote><p>小纹波： $f_0&lt;&lt;f_s$、开关频率纹波被衰减</p></blockquote><blockquote><p>小信号：$交流分量&lt;&lt;直流分量$ 线性化误差足够小</p></blockquote><h2 id="1-3-状态空间平均法"><a href="#1-3-状态空间平均法" class="headerlink" title="1.3 状态空间平均法"></a>1.3 状态空间平均法</h2><p>用状态方程形式得到线性化后的方程。</p><p>一、求平均变量</p><p>根据基本建模法的两个模态，选取状态变量电感电流 $i_L$、 $v_c$、输入 $v_g$、输出 $v$。</p><p><strong>模态a</strong><br>$$<br>L\frac{d_i(t)}{dt}&#x3D;v_g(t)\<br>C\frac{d_(t)}{dt}&#x3D;-\frac{v(t)}{R}\</p><p>\dot{x} &#x3D; A_1 x+B_1 u\</p><p>\begin{bmatrix}<br>    \frac{d_i(t)}{dt}  \<br>    \frac{d_(t)}{dt}<br>\end{bmatrix}&#x3D;</p><p>\begin{bmatrix}<br>    0 &amp; 0 \<br>    0 &amp; -\frac{1}{RC}<br>\end{bmatrix}</p><p>\begin{bmatrix}<br>    \frac{d_i(t)}{dt}  \<br>    \frac{d_(t)}{dt}<br>\end{bmatrix}</p><ul><li></li></ul><p>\begin{bmatrix}<br>    \frac{1}{L}  \<br>    0<br>\end{bmatrix}</p><p>v_g<br>$$</p><p><strong>模态b</strong><br>$$<br>L\frac{d_i(t)}{dt}&#x3D;v_g(t)-v(t)\<br>C\frac{d_(t)}{dt}&#x3D;i(t)-\frac{v(t)}{R}\</p><p>\dot{x} &#x3D; A_2 x+B_2 u\</p><p>\begin{bmatrix}<br>    \frac{d_i(t)}{dt}  \<br>    \frac{d_(t)}{dt}<br>\end{bmatrix}&#x3D;</p><p>\begin{bmatrix}<br>    0 &amp; -\frac{1}{L} \<br>    -\frac{1}{C} &amp; -\frac{1}{RC}<br>\end{bmatrix}</p><p>\begin{bmatrix}<br>    \frac{d_i(t)}{dt}  \<br>    \frac{d_(t)}{dt}<br>\end{bmatrix}</p><ul><li></li></ul><p>\begin{bmatrix}<br>    \frac{1}{L}  \<br>    0<br>\end{bmatrix}</p><p>v_g<br>$$<br><strong>求平均变量</strong></p><p>$$<br>&lt;\dot{x}&gt; &#x3D; d(t)(A_1 d x+B_1 u)+(d^\prime)(t)(A_2 d x+B_2 u)\<br>→<br>\begin{bmatrix}<br>    \frac{d_i(t)}{dt}  \<br>    \frac{d_(t)}{dt}<br>\end{bmatrix}&#x3D;</p><p>\begin{bmatrix}<br>    0 &amp; -d^\prime\frac{1}{L} \<br>    -d^\prime\frac{1}{C} &amp; -\frac{1}{RC}<br>\end{bmatrix}</p><p>\begin{bmatrix}<br>    \frac{d_i(t)}{dt}  \<br>    \frac{d_(t)}{dt}<br>\end{bmatrix}</p><ul><li></li></ul><p>\begin{bmatrix}<br>    \frac{1}{L}  \<br>    0<br>\end{bmatrix}</p><p>v_g<br>$$<br><strong>二、分离直流+小交流信号量</strong></p><p><img src="/../pic/image-20240819164848241.png" alt="分离过程"></p><p><strong>三、线性化</strong></p><p>忽略二阶微分量得到交流变化量关系。</p><p><img src="/../pic/image-20240819164930534.png" alt="变化量方程"></p><p>直流变化量关系</p><p>$\dot{\bar{x}} &#x3D; D(A_1 d x+B_1 u)+(1-D)(t)(A_2 d x+B_2 u)&#x3D;\bar{A}  x+\bar{B} u$</p><p>令 $\dot{X}&#x3D;0$，求静态工作点。</p><p>$\bar{X} &#x3D;-\bar{A}^-\bar{B_1} u$</p><h3 id="1-3-2-用状态平均法对Buck建模"><a href="#1-3-2-用状态平均法对Buck建模" class="headerlink" title="1.3.2 用状态平均法对Buck建模"></a>1.3.2 用状态平均法对Buck建模</h3><h3 id="1-3-3-状态空间平均法基本步骤"><a href="#1-3-3-状态空间平均法基本步骤" class="headerlink" title="1.3.3 状态空间平均法基本步骤"></a>1.3.3 状态空间平均法基本步骤</h3><p><strong>基本步骤：</strong></p><blockquote><p>分模态列些方程，在一个开关周期内求平均量。</p></blockquote><blockquote><p>取直流分量部分令 $\dot{X}&#x3D;0$，求静态工作点。</p></blockquote><blockquote><p>取交流部分构建交流信号等效电路</p></blockquote><h3 id="1-3-4-小信号状态方程分析"><a href="#1-3-4-小信号状态方程分析" class="headerlink" title="1.3.4 小信号状态方程分析"></a>1.3.4 小信号状态方程分析</h3><p>由状态方程求传递函数<br>$$<br>\dot{\hat{x}}&#x3D;A\hat{x}+B\hat{u}\<br>\hat{y} &#x3D; C\hat{x}+E\hat{u}\<br>→s\hat{x}&#x3D;A\hat{x}(s)+B\hat{u}(s)\<br>→\hat{x}(s)&#x3D;(sI-A)^-B\hat{u}(s)\<br>\hat{y}(s) &#x3D; [C(sI-A)^-B+E] \hat{u}(s)<br>$$<br><strong>传递函数量：</strong></p><blockquote><p>输出对输入电压：</p></blockquote><blockquote><p>输出对控制量：</p></blockquote><blockquote><p>状态变量对输入电压：</p></blockquote><blockquote><p>状态变量对控制量：</p></blockquote><p>略………………</p><h2 id="1-4-开关元件-开关网络平均法"><a href="#1-4-开关元件-开关网络平均法" class="headerlink" title="1.4 开关元件 开关网络平均法"></a>1.4 开关元件 开关网络平均法</h2><p>​前面的 基本建模法 和 状态空间平均法 都是得到不同模态总体方程，再对单开关周期内求平均，用表达式在已知静态工作点上进行线性化。根据交流小信号方程得到 交流小信号等效电路 和 传递函数。</p><p>开关元件 开关网络平均法 ：先得到元件&#x2F;网络平均变量模型，用平均变量模型得到等效电路  和 传递函数。</p><p>开关元件平均法：对 开关元件 变量 求平均。</p><p>开关网络平均法：对 开关网络 端口变量 求平均。 通用性很高，很多拓扑开关网络都一样。</p><h3 id="1-4-1-开关元件平均模型法"><a href="#1-4-1-开关元件平均模型法" class="headerlink" title="1.4.1 开关元件平均模型法"></a>1.4.1 开关元件平均模型法</h3><p>大信号等效电路：同时包含幅值大的直流信号，也包含幅值较小的交流信号。</p><p><strong>基本步骤：</strong></p><blockquote><p>时变因素由开关元件导致，所以只需要把开关元件求平均，替换掉就得到大信号等效电路。（求平均变量）</p></blockquote><blockquote><p>大信号等效电路 分为 直流等效电路，交流等效电路。 （分离扰动）</p></blockquote><blockquote><p>直流等效电路用来求静态工作点，交流等效电路 求 传递函数。（直流电路线性化得到交流等效电路）</p></blockquote><p><strong>以Boost为例</strong></p><p><img src="/../pic/image-20240820083819024.png" alt="Boost变换器开关元件模型"></p><p>①列写 开关元件 不同模态方程</p><p><strong>模态a</strong><br>$$<br>i_{Q1} &amp; &#x3D; i_1(t)\<br>v_{Q1} &amp; &#x3D; 0 \<br>i_{D1} &amp; &#x3D; 0\<br>v_{D1} &amp; &#x3D; -v_2 \<br>$$<br><strong>模态b</strong><br>$$<br>i_{Q1} &amp; &#x3D; 0\<br>v_{Q1} &amp; &#x3D; v_2 \<br>i_{D1} &amp; &#x3D; i_2\<br>v_{D1} &amp; &#x3D; 0 \<br>$$<br><strong>求平均</strong><br>$$<br>i_{Q1} &amp; &#x3D; d i_1(t)\<br>v_{Q1} &amp; &#x3D; (1-d)v_2 \<br>i_{D1} &amp; &#x3D; (1-d)i_2\<br>v_{D1} &amp; &#x3D; -dv_2 \<br>$$<br><strong>用替代定理替代：</strong></p><p>$i_2$是电容和电阻电流的合并，不好表示，所以把二极管替代为电压源。</p><p>$v_2$是输入电压和电感电压的并联，不好表示，所以把MOSFET替代为电流源。</p><p>L C R 平均电压和平均电流和瞬时值关系相同。我们的目的就是用平均模型替代瞬时模型，他们平均和瞬时关系相同，所以不需要管。</p><p>电压源用单开关周期内的平均电压替换。</p><p>替代后得到上面的（b）图。</p><p>②<strong>分离扰动</strong>—用直流分量+交流分量 表示其变量。</p><p>③静态工作点确定 和 线性化</p><blockquote><p>消除二阶微分量得到等效电路，电感短路，电容开路分离得到直流通路。  </p></blockquote><blockquote><p>分离交流分量得到交流通路。分析 传递函数。</p></blockquote><h3 id="1-4-2-开关元件平均模型法-在-含寄生参数-电路的应用"><a href="#1-4-2-开关元件平均模型法-在-含寄生参数-电路的应用" class="headerlink" title="1.4.2 开关元件平均模型法 在 含寄生参数 电路的应用"></a>1.4.2 开关元件平均模型法 在 含寄生参数 电路的应用</h3><p>和前面理想电路一样。</p><h3 id="1-4-3-开关网络平均法"><a href="#1-4-3-开关网络平均法" class="headerlink" title="1.4.3 开关网络平均法"></a>1.4.3 开关网络平均法</h3><p>和 开关元件平均法 思路一样，只不过对象是对 二端口网络 (包含时变元件—开关管) 取平均。</p><p><strong>以Buck为例</strong></p><p><img src="/../pic/image-20240820091331710.png" alt="Buck型开关网络等效"></p><p>①列写 开关元件 不同模态方程</p><p><strong>模态a</strong><br>$$<br>i_1(t) &#x3D; i_2(t)\<br>v_1(t)  &#x3D; v_2(t) \<br>$$<br><strong>模态b</strong><br>$$<br>i_1(t) &amp; &#x3D; 0\<br>v_1(t) &amp; &#x3D; 外部电路决定 \<br>i_2(t) &amp; &#x3D; 外部电路决定\<br>v_2(t) &amp; &#x3D; 0 \<br>$$<br><strong>求平均</strong><br>$$<br>i_1(t) &amp; &#x3D; d i_2(t)\<br>v_1(t) &amp; &#x3D; 受外部电路影响 \<br>i_2(t) &amp; &#x3D; 受外部电路影响\<br>v_2(t) &amp; &#x3D; d v_1(t) \<br>$$<br><strong>用替代定理替代：</strong></p><p><img src="/../pic/image-20240820094925362.png" alt="替代后等效电路"></p><p>$i_2、V_1$受外部电路影响，不好表示，所以把原边替代为受控电流源，副边替代为受控电压源。</p><p>L C R 平均电压和平均电流和瞬时值关系相同。我们的目的就是用平均模型替代瞬时模型，他们平均和瞬时关系相同，所以不需要管。</p><p>电压源用单开关周期内的平均电压替换。</p><p>替代后得到上面的（b）图。</p><p>②<strong>分离扰动</strong>—用直流分量+交流分量 表示其变量。</p><p>③静态工作点确定 和 线性化</p><blockquote><p>消除二阶微分量得到等效电路，电感短路，电容开路分离得到直流通路。  </p></blockquote><blockquote><p>分离交流分量得到交流通路。分析 传递函数。</p></blockquote><h3 id="1-4-4-一般开关网络-等效"><a href="#1-4-4-一般开关网络-等效" class="headerlink" title="1.4.4 一般开关网络 等效"></a>1.4.4 一般开关网络 等效</h3><p><strong>以SEPIC为例</strong></p><p><img src="/../pic/image-20240821100002922.png" alt="SEPIC等效图"></p><h3 id="1-4-5-非理想-Flyback-变换器分析"><a href="#1-4-5-非理想-Flyback-变换器分析" class="headerlink" title="1.4.5 非理想 Flyback 变换器分析"></a>1.4.5 非理想 Flyback 变换器分析</h3><h1 id="二、-DCM-变换器建模"><a href="#二、-DCM-变换器建模" class="headerlink" title="二、 DCM 变换器建模"></a>二、 DCM 变换器建模</h1><p>和 CCM 变换器相比，就是多了一个模态，求平均变量前多分析一个模态的步骤。</p><p><strong>三个假设</strong>同样需要成立：</p><blockquote><p>低频干扰： $f_g &lt;&lt; f_s$、香农采样定理</p></blockquote><blockquote><p>小纹波： $f_0&lt;&lt;f_s$、开关频率纹波被衰减</p></blockquote><blockquote><p>小信号：$交流分量&lt;&lt;直流分量$ 线性化误差足够小</p></blockquote><h2 id="2-1-状态空间平均法-在DCM变换器-应用"><a href="#2-1-状态空间平均法-在DCM变换器-应用" class="headerlink" title="2.1 状态空间平均法 在DCM变换器 应用"></a>2.1 状态空间平均法 在DCM变换器 应用</h2><h3 id="2-1-1-状态空间平均法-对-DCM-变换器-建模"><a href="#2-1-1-状态空间平均法-对-DCM-变换器-建模" class="headerlink" title="2.1.1  状态空间平均法 对 DCM 变换器 建模"></a>2.1.1  状态空间平均法 对 DCM 变换器 建模</h3><p><strong>一、求平均变量</strong></p><p>模态①($0-d_1T_s$)：<br>$$<br>\dot{x}(t) &#x3D; A_1x(t)+B_1u(t)\<br>y(t) &#x3D; C_1x(t)+E_1u(t)<br>$$<br>模态②($d_1T_s-d_2T_s$)：<br>$$<br>\dot{x}(t) &#x3D; A_2x(t)+B_2u(t)\<br>y(t) &#x3D; C_2x(t)+E_2u(t)<br>$$<br>模态③($d_2T_s-d_3T_s$)：<br>$$<br>\dot{x}(t) &#x3D; A_3x(t)+B_3u(t)\<br>y(t) &#x3D; C_3x(t)+E_3u(t)<br>$$<br><strong>求平均：</strong><br>$$<br>&lt;\dot{x}(t)&gt;_{T_s} &#x3D; d_1(t)[A_1x(t)+B_1u(t)] + d_2(t)[A_2x(t)+B_2u(t)] +d_3(t)[A_3x(t)+B_3u(t)]\<br>&#x3D;A^\prime x(t)+B\prime u(t)<br>$$</p><p><strong>二、分离 直流+小交流信号量</strong></p><p>$d_1(t) &#x3D; D_1 + \hat{d_1}(t)$</p><p>$d_2(t) &#x3D; D_2 + \hat{d_2}(t)$</p><p>$d_3(t) &#x3D; D_3 + \hat{d_3}(t)&#x3D;1-d_1(t) - d_2(t)$</p><p><img src="/../pic/image-20240821094249772.png" alt="分离扰动"></p><p>令 $\dot{X}&#x3D;0$，求静态工作点。</p><p>$\bar{X} &#x3D;-\bar{A}^-\bar{B_1} u$</p><p><strong>三、线性化</strong></p><p>忽略二阶微分量得到交流变化量关系。</p><p><strong>直流变化量关系</strong></p><p>$\dot{\bar{x}} &#x3D; D(A_1 d x+B_1 u)+(1-D)(t)(A_2 d x+B_2 u)&#x3D;\bar{A}  x+\bar{B} u$</p><p>四、得到 直流&#x2F;交流等效电路 分析交流传递函数</p><h3 id="2-1-3-DCM-等效电路"><a href="#2-1-3-DCM-等效电路" class="headerlink" title="2.1.3 DCM 等效电路"></a>2.1.3 DCM 等效电路</h3><h3 id="2-1-5-理想-Buck-DCM模式分析"><a href="#2-1-5-理想-Buck-DCM模式分析" class="headerlink" title="2.1.5 理想 Buck DCM模式分析"></a>2.1.5 理想 Buck DCM模式分析</h3><p>不好用，但是需要掌握理解。</p><h2 id="2-3-开关网络-平均模型法-DCM-应用"><a href="#2-3-开关网络-平均模型法-DCM-应用" class="headerlink" title="2.3 开关网络 平均模型法 DCM 应用"></a>2.3 开关网络 平均模型法 DCM 应用</h2><h3 id="2-3-1-无损电阻-模型推导"><a href="#2-3-1-无损电阻-模型推导" class="headerlink" title="2.3.1 无损电阻 模型推导"></a>2.3.1 无损电阻 模型推导</h3><p><img src="/../pic/image-20240821200733790.png" alt="Buck-Boost 原理图"></p><p><img src="/../pic/image-20240821200625899.png" alt="DCM 模式 Buck-Boost 波形"></p><p>峰值电流： $i_{pk} &#x3D; \frac{v_gd_1T_s}{L}$</p><p><strong>一、求平均变量：</strong></p><p>$i_1(t) &#x3D; \frac{1}{2}i_{pk}d_1T_s&#x3D;\frac{d_1^2T_sv_g}{2L}$</p><p>$v_1(t)&#x3D;d_2(v_g-v_o)+(1-d_1-d_2)v_g$</p><p>$i_2(t) &#x3D; \frac{d_1d_2T_sv_g}{2L}$</p><p>$v_2(t) &#x3D; d_1(v_g-v_o)-(1-d_1-d_2)v_o$</p><p><strong>电感 DCM 条件：</strong> $d_1v_g+d_2v_o&#x3D;0→d_2&#x3D;-\frac{d_1v_g}{v_o}$</p><p>代入后得</p><p>$v_1(t)&#x3D;v_g$ 端口电压就是电源电压</p><p>$v_2(t)&#x3D;-v_o$端口电压就是输出电压</p><p>$i_1(t) &#x3D;\frac{d_1^2T_sv_g}{2L}&#x3D; \frac{d_1^2T_s}{2L}v_1(t)$→端口电压电流呈线性关系、可以等效为电阻。</p><p>$i_2(t) &#x3D; -\frac{d_1T_sv_g^2}{2Lv_o}→v_2(t)i_2(t)&#x3D;\frac{d_1T_sv_g^2}{2L}$→表现出端口的功率正好等于一次侧吸收的功率</p><p>所以等效为下面的模型：</p><p><img src="/../pic/image-20240821223529127.png" alt="等效模型"></p><p><img src="/../pic/image-20240821223552975.png" alt="Buck-Boost 等效模型"></p><p>相当于该等效电阻吸收的功率全部用来给二次侧输出。</p><p>$R_e(d_1) &#x3D; \frac{2L}{d_1^2T_s}$</p><h3 id="2-3-2-用-无损电阻模型-建立-直流等效电路-求解静态工作点"><a href="#2-3-2-用-无损电阻模型-建立-直流等效电路-求解静态工作点" class="headerlink" title="2.3.2 用 无损电阻模型 建立 直流等效电路 求解静态工作点"></a>2.3.2 用 无损电阻模型 建立 直流等效电路 求解静态工作点</h3><p><img src="/../pic/image-20240821223552975.png" alt="Buck-Boost 等效模型"></p><p>对于直流分量，电感短路、电容开路。</p><p><img src="/../pic/image-20240821223820541.png" alt="直流等效电路"></p><p>功率守恒：</p><p>$v_g^2&#x2F;R_e(D_1) &#x3D; V^2&#x2F;R$</p><h1 id="三、开关调节系统基础"><a href="#三、开关调节系统基础" class="headerlink" title="三、开关调节系统基础"></a>三、开关调节系统基础</h1><h2 id="3-1-开关调节系统"><a href="#3-1-开关调节系统" class="headerlink" title="3.1 开关调节系统"></a>3.1 开关调节系统</h2><p><img src="/../pic/image-20240824100718324.png" alt="开关调节系统"></p><h3 id="3-1-1-开关调压系统特点"><a href="#3-1-1-开关调压系统特点" class="headerlink" title="3.1.1 开关调压系统特点"></a>3.1.1 开关调压系统特点</h3><p><strong>系统特点：</strong></p><blockquote><p>主电路时间常数&gt;&gt;控制电路时间常数</p></blockquote><blockquote><p>高阶非线性系统：主电路是二阶系统，控制电路PI是一阶，PID是二阶。 占空比：0&lt;d&lt;1 即非线性</p></blockquote><blockquote><p>离散系统：PWM调制器</p></blockquote><h3 id="3-1-2-分析方法"><a href="#3-1-2-分析方法" class="headerlink" title="3.1.2 分析方法"></a>3.1.2 分析方法</h3><p>状态空间平均法：</p><p>离散时域法：</p><h3 id="3-1-3-开关调节系统-瞬态特性"><a href="#3-1-3-开关调节系统-瞬态特性" class="headerlink" title="3.1.3 开关调节系统 瞬态特性"></a>3.1.3 开关调节系统 瞬态特性</h3><p><img src="/../pic/image-20240824101605091.png" alt="阶跃输入对应输出特性"></p><p>阶跃输入对系统是最严峻的状态，如果阶跃输入动态性能比较好，其他输入也不会差。</p><h3 id="3-1-4-开关调压系统设计方法"><a href="#3-1-4-开关调压系统设计方法" class="headerlink" title="3.1.4 开关调压系统设计方法"></a>3.1.4 开关调压系统设计方法</h3><p>①确定技术指标、设计要求。 —输入电压，输出电压，输出电流，电压纹波。</p><p>②主电路设计。选择开关管，LC滤波器，磁芯种类。</p><p>③建立主电路小信号交流模型。得到稳态工作点，分析该工作点下传递函数，频率特性，输入输出阻抗。</p><p>④根据主电路频率特性设计控制器。</p><p><strong>控制器设计方法：</strong></p><blockquote><p>根据时域指标 转化→ 开环传递函数频域参数。</p></blockquote><blockquote><p>分析目前传递函数。根据伯德图得到控制器参数。</p></blockquote><blockquote><p>设计相应控制器。</p></blockquote><h2 id="3-2-时域-频域-性能指标"><a href="#3-2-时域-频域-性能指标" class="headerlink" title="3.2  时域  频域  性能指标"></a>3.2  时域  频域  性能指标</h2><p><strong>时域法特点：</strong></p><blockquote><p>只能应用于低阶系统，高阶系统求时域解太困难。</p></blockquote><p><strong>用时域法设计 补偿器(控制器)方法：</strong>试凑法</p><blockquote><p>给定控制器参数初值。</p></blockquote><blockquote><p>加节约输入，看系统瞬态响应。</p></blockquote><blockquote><p>不满足再修改直到满意为止。</p></blockquote><h3 id="3-2-1-时域-性能指标"><a href="#3-2-1-时域-性能指标" class="headerlink" title="3.2.1 时域 性能指标"></a>3.2.1 时域 性能指标</h3><p><img src="/../pic/image-20240824102946898.png" alt="阶跃响应图"></p><p><strong>时域 性能指标：</strong></p><blockquote><p>稳态误差$e_{ss}$：</p><p>​求法：得到闭环传递函数，终值定理。</p></blockquote><blockquote><p>延迟时间 $t_d$：0→0.5</p></blockquote><blockquote><p>上升时间：0.1→0.9</p></blockquote><blockquote><p>峰值时间 $t_p$：</p></blockquote><blockquote><p>调节时间 $t_p$：±5％、±2％</p></blockquote><blockquote><p>超调量 $\delta %$：</p></blockquote><p>其他性能指标：</p><blockquote><p>动态跌落： $\Delta V &#x3D; \frac{A}{V_{O1}}×100%$</p></blockquote><p><img src="/../pic/image-20240824103507464.png" alt="动态跌落特性"></p><p>跌落后由于干扰还存在会到达新的稳态 $V_{o2}$。</p><h3 id="3-2-2-频域-性能指标："><a href="#3-2-2-频域-性能指标：" class="headerlink" title="3.2.2 频域 性能指标："></a>3.2.2 频域 性能指标：</h3><p><strong>开环 频域 性能指标：</strong></p><p>穿越频率 $\omega_c$： $|\Phi_(\omega_c)| &#x3D; 1$</p><p>相位裕量 $\varphi_m$：$|\Phi_(\omega_c)| &#x3D; 1、\varphi_m &#x3D; 180°+\angle \Phi_(\omega_c)$</p><p>增益裕量 $K_g$： $\angle \Phi_(\omega_g)&#x3D;-180°、K_g &#x3D; \frac{1}{|\Phi_(\omega_c)|}$</p><p>谐振频率 $\omega_r$：$\frac{d|\Phi_(\omega)|_{w&#x3D;w_r}}{d\omega}&#x3D;0$</p><p>谐振峰值 $M_r$：$\frac{d|\Phi_(\omega)|<em>{w&#x3D;w_r}}{d\omega}&#x3D;0、M_r&#x3D;|\Phi</em>(\omega)|_{w&#x3D;w_r}$</p><p>中频宽度$h$：幅频特性，斜率为-20dBs&#x2F;dec穿过0dB的宽度。 $h&#x3D;\frac{\omega_2}{\omega_1}$、 $h$越大，系统相角裕量越大，但是高频噪声也越大。</p><p><strong>闭环 频域 性能指标：</strong></p><p>零频赋值 $M(0)$：直流增益，反应稳态控制精度。</p><p>​开环传递函数： $G(s)&#x3D;\frac{K}{s^v(1+Ts)}$→闭环传递函数： $\Phi(s)&#x3D;\frac{G(s)}{1+G(s)}&#x3D;\frac{K}{s^v(1+Ts)+K}$</p><p>​当系统为零型系统$v&#x3D;0,M(0)&lt;1$，当为Ⅰ，Ⅱ型系统， $v&gt;0,M(0)&#x3D;1$</p><p>谐振峰值 $M_r$：$\frac{d|\Phi_(\omega)|<em>{w&#x3D;w_r}}{d\omega}&#x3D;0、M_r&#x3D;|\Phi</em>(\omega)|_{w&#x3D;w_r}$</p><p>​对于典型二阶系统： $\phi(s) &#x3D; \frac{w_n^2}{s^2+2\xi w_n+w_n^2}$</p><p>​$M_r&#x3D;\frac{1}{2\xi\sqrt{1-\xi^2}}$，当 $\omega _r≈ \omega_c$， $M_r ≈ \frac{1}{sin\varphi_m}$，相位裕量增加，谐振峰值减小。当 $\varphi_m&lt;45°$，误差较小。</p><p>谐振频率 $\omega_r$：$\frac{d|\Phi_(\omega)|_{w&#x3D;w_r}}{d\omega}&#x3D;0$</p><p>​对于典型二阶系统： $\phi(s) &#x3D; \frac{w_n^2}{s^2+2\xi w_n+w_n^2}$， $t_s≈\frac{3}{\xi\omega_n}&#x3D;\frac{3\sqrt{1-2\xi^2}}{\xi\omega_r}$,谐振频率↑，调节时间 $t_s$↓。</p><p>闭环频带宽度：$|\Phi_(\omega_b)| &#x3D; 0.707M(0)$，$\omega_b$↑，调节时间↓。</p><p><img src="/../pic/image-20240824112033354.png" alt="闭环频带宽度"></p><h3 id="3-2-3-频域指标-和-时域指标-关系"><a href="#3-2-3-频域指标-和-时域指标-关系" class="headerlink" title="3.2.3 频域指标 和 时域指标 关系"></a>3.2.3 频域指标 和 时域指标 关系</h3><p><img src="/../pic/image-20240824112401814.png" alt="频域指标 和 时域指标 关系"></p><p><img src="/../pic/image-20240824112411434.png" alt="频域指标 和 时域指标 关系"></p><h2 id="3-3-开关变换器-传递函数-分析"><a href="#3-3-开关变换器-传递函数-分析" class="headerlink" title="3.3 开关变换器 传递函数 分析"></a>3.3 开关变换器 传递函数 分析</h2><h3 id="3-3-1-传递函数"><a href="#3-3-1-传递函数" class="headerlink" title="3.3.1 传递函数"></a>3.3.1 传递函数</h3><p>一、二章求的。</p><h3 id="3-3-2-求传函举例"><a href="#3-3-2-求传函举例" class="headerlink" title="3.3.2 求传函举例"></a>3.3.2 求传函举例</h3><h3 id="3-3-3-右半平面零点-物理意义"><a href="#3-3-3-右半平面零点-物理意义" class="headerlink" title="3.3.3 右半平面零点 物理意义"></a>3.3.3 右半平面零点 物理意义</h3><p>传递函数：$G(s) &#x3D; 1-Ts$</p><p>低频时$G(s)&#x3D;1$，输出等于输入。</p><p>高频时 $G(s)&#x3D;-Ts$，输出反相于输入。</p><p><img src="/../pic/image-20240824113012949.png" alt="右半平面零点举例d由0.4→0.6"></p><h3 id="3-3-4-闭环系统-传递函数"><a href="#3-3-4-闭环系统-传递函数" class="headerlink" title="3.3.4 闭环系统 传递函数"></a>3.3.4 闭环系统 传递函数</h3><p>怎么求闭环传函。</p><h2 id="3-4-开关调节系统-瞬态分析"><a href="#3-4-开关调节系统-瞬态分析" class="headerlink" title="3.4 开关调节系统 瞬态分析"></a>3.4 开关调节系统 瞬态分析</h2><h3 id="3-4-1-启动过程分析"><a href="#3-4-1-启动过程分析" class="headerlink" title="3.4.1 启动过程分析"></a>3.4.1 启动过程分析</h3><p>开环Buck为例，根据第一、二章求出大信号等效电路。</p><p><img src="/../pic/image-20240824190558797.png" alt="Buck大信号等效电路"></p><p>传递函数：$\Phi_(s)&#x3D;\frac{v_o(s)}{v_g(s)}&#x3D;\frac{D\omega_n^2}{s^2+2\xi\omega s+\omega^2}$→ $v_o(s)&#x3D;&#x3D;\frac{D\omega_n^2}{s^2+2\xi\omega s+\omega^2}\frac{V_g}{s}$</p><p>解时域响应，求性能指标：</p><p>略。</p><p><strong>分析结论：</strong></p><p>①电压过冲太高，占空比是固定的值导致，需要增加软起。</p><p>②电感电流峰值guogao.</p><p><strong>模型缺点：</strong></p><p>忽略主电路开关非线性。</p><p>忽略PWM占空比非线性。</p><p>该模型占空比固定，实际是可变的。</p><h3 id="3-4-2-过冲幅度-实验"><a href="#3-4-2-过冲幅度-实验" class="headerlink" title="3.4.2 过冲幅度 实验"></a>3.4.2 过冲幅度 实验</h3><h3 id="3-4-3-负载电流大幅变化实验"><a href="#3-4-3-负载电流大幅变化实验" class="headerlink" title="3.4.3 负载电流大幅变化实验"></a>3.4.3 负载电流大幅变化实验</h3><h3 id="3-4-4-大信号瞬态特性"><a href="#3-4-4-大信号瞬态特性" class="headerlink" title="3.4.4 大信号瞬态特性"></a>3.4.4 大信号瞬态特性</h3><p>一、Buck 大信号瞬态特性</p><blockquote><p>负载突然开路，滤波电感能量流入输出电容，电容两端电压骤然上升。可能损坏后级电路。</p><p>​解决方法：输出端与输入端接能量回馈二极管，让电感能量回馈输入源，限制输出电压。②增加输出过压保护电路和假负载，过压使开关管截止，停止传输能量，假负载维持电路正常工作。</p></blockquote><blockquote><p>输出端突然短路，电感电流单调上升，使电感磁芯饱和，烧坏主电路</p><p>​解决办法：增加电流保护电路，关断开关管。</p></blockquote><blockquote><p>启动时输出电压振荡过大，损坏后级电路。输入电流（浪涌电流）过大，给电容充电，烧坏保险丝，产生过大电磁干扰。</p><p>​解决办法：①提占空比软启动。②主电路增加启动限流电路。③启动流程，先软起，主电路达到稳态再开启控制电路。④轻载启动。</p></blockquote><blockquote><p>下电顺序，先关闭主电路，再关闭控制电路，让主电路储能先被负载消耗。控制电路 or 主电路 增加软关断。</p></blockquote><p>二、Boost </p><p>略。</p><h2 id="3-5-开关调节系统-频域设计-与-分析"><a href="#3-5-开关调节系统-频域设计-与-分析" class="headerlink" title="3.5 开关调节系统 频域设计 与 分析"></a>3.5 开关调节系统 频域设计 与 分析</h2><p>三频段理论：<a href="https://zhuanlan.zhihu.com/p/684765688">https://zhuanlan.zhihu.com/p/684765688</a></p><blockquote><p>低频：稳态性能</p></blockquote><blockquote><p>中频：动态性能</p></blockquote><blockquote><p>高频：抗干扰能力</p></blockquote><h3 id="3-5-1-DCM-Buck开关调节系统-开环传递函数"><a href="#3-5-1-DCM-Buck开关调节系统-开环传递函数" class="headerlink" title="3.5.1 DCM Buck开关调节系统  开环传递函数"></a>3.5.1 DCM Buck开关调节系统  开环传递函数</h3><p>主电路传递函数： $G_{vd}(s)&#x3D;\frac{G_{d0}}{1+\frac{s}{\omega_p}}$</p><p>假设补偿网络为积分环节： $G_c(s)&#x3D;\frac{K_1}{s}$</p><p>PWM传递函数：$G_M(s)&#x3D;\frac{1}{V_M}$</p><p>采样网络传递函数：$H(s)&#x3D;K_2$</p><p>系统开环传递函数： $G(s)&#x3D;G_{vd}(s)H(s)G_c(s)G_M(s)&#x3D;K_2\frac{1}{V_M}\frac{K_1}{s}\frac{G_{d0}}{1+\frac{s}{\omega_p}}&#x3D;\frac{K}{1+\frac{s}{\omega_p}}$</p><h3 id="3-5-2-典型Ⅰ型系统-跟随性能指标-和-参数-关系"><a href="#3-5-2-典型Ⅰ型系统-跟随性能指标-和-参数-关系" class="headerlink" title="3.5.2 典型Ⅰ型系统 跟随性能指标 和 参数 关系"></a>3.5.2 典型Ⅰ型系统 跟随性能指标 和 参数 关系</h3><p>后面设计的时候再看。</p><h3 id="3-5-3-典型Ⅰ型系统-抗扰动分析"><a href="#3-5-3-典型Ⅰ型系统-抗扰动分析" class="headerlink" title="3.5.3 典型Ⅰ型系统 抗扰动分析"></a>3.5.3 典型Ⅰ型系统 抗扰动分析</h3><h3 id="3-5-4-CCM-Buck开关调节系统-开环传递函数近似"><a href="#3-5-4-CCM-Buck开关调节系统-开环传递函数近似" class="headerlink" title="3.5.4 CCM Buck开关调节系统  开环传递函数近似"></a>3.5.4 CCM Buck开关调节系统  开环传递函数近似</h3><h3 id="3-5-5-典型Ⅱ型系统-跟随性能指标-和-参数-关系"><a href="#3-5-5-典型Ⅱ型系统-跟随性能指标-和-参数-关系" class="headerlink" title="3.5.5 典型Ⅱ型系统 跟随性能指标 和 参数 关系"></a>3.5.5 典型Ⅱ型系统 跟随性能指标 和 参数 关系</h3><h3 id="3-5-6-典型Ⅱ型系统-抗扰动分析"><a href="#3-5-6-典型Ⅱ型系统-抗扰动分析" class="headerlink" title="3.5.6 典型Ⅱ型系统 抗扰动分析"></a>3.5.6 典型Ⅱ型系统 抗扰动分析</h3><h2 id="3-6-系统频率特性测量"><a href="#3-6-系统频率特性测量" class="headerlink" title="3.6 系统频率特性测量"></a>3.6 系统频率特性测量</h2><h1 id="后面的内容和-控制环路设计-比较重合"><a href="#后面的内容和-控制环路设计-比较重合" class="headerlink" title="后面的内容和 控制环路设计 比较重合"></a>后面的内容和 控制环路设计 比较重合</h1><h1 id="4-电压控制型-开关调节系统设计"><a href="#4-电压控制型-开关调节系统设计" class="headerlink" title="4 电压控制型 开关调节系统设计"></a>4 电压控制型 开关调节系统设计</h1><h2 id="4-1-电压控制型-开关调节系统-基本问题"><a href="#4-1-电压控制型-开关调节系统-基本问题" class="headerlink" title="4.1 电压控制型 开关调节系统 基本问题"></a>4.1 电压控制型 开关调节系统 基本问题</h2><p><img src="/../pic/image-20240824203803905.png" alt="电压控制型Buck系统"></p><h3 id="4-1-1-PWM-数学模型"><a href="#4-1-1-PWM-数学模型" class="headerlink" title="4.1.1 PWM 数学模型"></a>4.1.1 PWM 数学模型</h3><p>$d(nT) &#x3D; u_c(nT)&#x2F;V_M$</p><p>近似成连续</p><p>$H(s)&#x3D;1&#x2F;V_M$</p><p><strong>PD(补偿器)校正：</strong></p><p>设补偿器 $G_c(s) &#x3D; K_c(\frac{1+\tau s}{1-\tau s})$</p><p>$该补偿器特性：$</p><p>$\angle G_c(s) &#x3D; arctan(\tau s)-arctan(a\tau s) &#x3D;arctan(\frac{(1-a)\tau \omega}{1+a\tau^2\omega^2})$</p><p>$令\frac{d(\frac{(1-a)\tau \omega}{1+a\tau^2\omega^2})}{dt}&#x3D;0，得到当 \omega&#x3D;\frac{1}{\sqrt{a}\tau}，补偿角最大。但|G_c(j\frac{1}{\sqrt{a}\tau})|&#x3D;20log^{\frac{1}{\sqrt{a}}}<em>{10}，幅值增大20log^{\frac{1}{\sqrt{a}}}</em>{10}$</p><p>当 $\omega&#x3D;\frac{1}{\sqrt{a}\tau}$，$\angle G_c(s)&#x3D;arcsin(\frac{1-a}{1+a})$，$|G_c(j\frac{1}{\sqrt{a}\tau})|&#x3D;20log^{\frac{1}{\sqrt{a}}}_{10}$。</p><p><strong>矫正步骤：</strong></p><blockquote><p>确定校正后期望剪切频率 $\omega_p$，一般为开关频率的 $\frac{1}{20}-\frac{1}{10}$，</p></blockquote><blockquote><p>求原系统$\omega_p$处相角，根据校正后期望相位裕度确定补偿器提供超前角度。根据 <strong>补偿器超前角度</strong> 和 **期望剪切频率$\omega_p$**得到补偿器，计算补偿器提供 幅值。</p></blockquote><blockquote><p>根据原系统$\omega_p$处幅值 和 补偿器增大的幅值确定 $K_c$。</p></blockquote>]]></content>
    
    
    <categories>
      
      <category>开关电源</category>
      
      <category>原理</category>
      
      <category>建模与控制</category>
      
    </categories>
    
    
    <tags>
      
      <tag>开关变换器建模与控制(读书笔记)</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>开关电源控制环路设计</title>
    <link href="/2025/01/02/%E5%BC%80%E5%85%B3%E7%94%B5%E6%BA%90%E6%8E%A7%E5%88%B6%E7%8E%AF%E8%B7%AF%E8%AE%BE%E8%AE%A1/"/>
    <url>/2025/01/02/%E5%BC%80%E5%85%B3%E7%94%B5%E6%BA%90%E6%8E%A7%E5%88%B6%E7%8E%AF%E8%B7%AF%E8%AE%BE%E8%AE%A1/</url>
    
    <content type="html"><![CDATA[<h1 id="一、环路控制基础（被自动控制原理包含）"><a href="#一、环路控制基础（被自动控制原理包含）" class="headerlink" title="一、环路控制基础（被自动控制原理包含）"></a>一、环路控制基础（被自动控制原理包含）</h1><h1 id="二、传递函数（被自动控制原理包含）"><a href="#二、传递函数（被自动控制原理包含）" class="headerlink" title="二、传递函数（被自动控制原理包含）"></a>二、传递函数（被自动控制原理包含）</h1><p><strong>求Boost-DCM传递函数</strong></p><p><strong>亥维赛展开公式</strong>：拉氏变换直接求时域解</p><h1 id="三、稳定判据（被自动控制原理包含）"><a href="#三、稳定判据（被自动控制原理包含）" class="headerlink" title="三、稳定判据（被自动控制原理包含）"></a>三、稳定判据（被自动控制原理包含）</h1><p><strong>求Buck 开环 闭环传递函数</strong></p><h2 id="3-1-振荡器"><a href="#3-1-振荡器" class="headerlink" title="3.1 振荡器"></a>3.1 振荡器</h2><p>闭环传递函数：</p><p>开环传递函数：</p><p>闭环特征方程：</p><p>产生振荡原理：当输入为零，系统输出最终不为零。用闭环传递函数计算输出。</p><p>当s为某一频率时，1+GH&#x3D;0，，Vin为零，→闭环特征方程极限为零，则输出不为零。</p><p>换个理解方式：1+GH&#x3D;0，存在实部为零，虚部不为零的解，系统震荡。</p><p>由闭环特征方程，研究开环传递函数，即开环传递函数，幅值为1，相位滞后180°。</p><p>对应某一频率信号通过开环传递函数后。相位滞后180°，幅值为1，然后又因为负反馈反向，再滞后180°，即该频率信号通过这个系统不衰减，一直存在，系统震荡。</p><h2 id="3-2-稳定性判据"><a href="#3-2-稳定性判据" class="headerlink" title="3.2 稳定性判据"></a>3.2 稳定性判据</h2><p>频率响应范围&#x2F;闭环带宽：闭环增益&gt;-3dB。(大于等于截止频率)</p><p>穿越频率fc：开环增益 为1处的频率。(对应于相位裕度)</p><p>经验结论：开环增益为0dB时，一般闭环增益为-3dB。</p><h3 id="3-2-1-增益裕度-条件稳定"><a href="#3-2-1-增益裕度-条件稳定" class="headerlink" title="3.2.1 增益裕度 条件稳定"></a>3.2.1 增益裕度 条件稳定</h3><p>在fΠ处的增益倒数。</p><p>条件稳定：系统增益曲线上移，下移，相位曲线不变，相角裕度变小，变大。</p><p>条件稳定原因：系统参数运行过程中可能会发生变化，电容电阻电感值随温度，时间。</p><h3 id="3-2-2-最小相位系统"><a href="#3-2-2-最小相位系统" class="headerlink" title="3.2.2 最小相位系统"></a>3.2.2 最小相位系统</h3><p>非最小相位系统：开环传递函数存在右半平面极点、零点。</p><p>左右半平面零极点，伯德图幅值曲线相同，相位曲线不同。所以不能用伯德图来反推系统特性。</p><h3 id="3-2-3-奈奎斯特曲线"><a href="#3-2-3-奈奎斯特曲线" class="headerlink" title="3.2.3 奈奎斯特曲线"></a>3.2.3 奈奎斯特曲线</h3><h3 id="3-2-4-奈奎斯特-特征信息"><a href="#3-2-4-奈奎斯特-特征信息" class="headerlink" title="3.2.4 奈奎斯特 特征信息"></a>3.2.4 奈奎斯特 特征信息</h3><p>穿越角频率(对应穿越频率)：开环增益&#x3D;1，对应相角裕度。</p><p>增益裕度：对应fΠ。</p><h3 id="3-2-5-模值裕度-ΔM"><a href="#3-2-5-模值裕度-ΔM" class="headerlink" title="3.2.5 模值裕度(ΔM)"></a>3.2.5 模值裕度(ΔM)</h3><p>离(-1，0j)最短的距离的频率的开环增益的导数。</p><p>经验：ΔM&gt;0.5时，GM&gt;6dB，相位裕度&gt;30°。</p><h2 id="3-3-二阶系统-品质因数-阻尼比-相位裕度-动态响应"><a href="#3-3-二阶系统-品质因数-阻尼比-相位裕度-动态响应" class="headerlink" title="3.3 二阶系统 品质因数(阻尼比) 相位裕度 动态响应"></a>3.3 二阶系统 品质因数(阻尼比) 相位裕度 动态响应</h2><h3 id="3-3-1-RLC电路"><a href="#3-3-1-RLC电路" class="headerlink" title="3.3.1 RLC电路"></a>3.3.1 RLC电路</h3><p>闭环传递函数：</p><p>特征方程三种解：</p><p>①Q&lt;0.5 阻尼比&gt;1：两个不重合根，虚部为零。</p><p>②Q&#x3D;0.5 阻尼比&#x3D;1：两个重合根</p><p>③Q&gt;0.5 阻尼比&lt;1：两个不重合根，虚部不为零，振荡衰减。</p><p>可用根轨迹分析阻尼比变化的</p><h3 id="3-3-2-单位阶跃响应求解"><a href="#3-3-2-单位阶跃响应求解" class="headerlink" title="3.3.2 单位阶跃响应求解"></a>3.3.2 单位阶跃响应求解</h3><p>当Q&gt;0.5：</p><p>性能指标：</p><p>上升时间tr</p><p>峰值时间tp：</p><p>超调量：</p><p>调节时间(包络线)：</p><p>延迟时间:道到达一半需要的时间。</p><h3 id="3-3-3-相位裕度-品质因数-关系"><a href="#3-3-3-相位裕度-品质因数-关系" class="headerlink" title="3.3.3 相位裕度 品质因数 关系"></a>3.3.3 相位裕度 品质因数 关系</h3><p>二阶闭环系统开环传递函数：</p><p>穿越频率计算：</p><p>相位裕度：</p><p>即阻尼比越大(品质因数越小)，相角裕度越大。</p><p>结论：当Q&gt;0.5，品质因数越小，其中一个闭环极点离虚轴越近，响应速度变慢。所以要综合考虑相角裕度和响应速度。</p><h3 id="3-3-4-相位裕度测量"><a href="#3-3-4-相位裕度测量" class="headerlink" title="3.3.4 相位裕度测量"></a>3.3.4 相位裕度测量</h3><h3 id="3-3-5"><a href="#3-3-5" class="headerlink" title="3.3.5"></a>3.3.5</h3><h3 id="3-3-6-PWM-模块传函"><a href="#3-3-6-PWM-模块传函" class="headerlink" title="3.3.6 PWM 模块传函"></a>3.3.6 PWM 模块传函</h3><p><strong>增益模块：</strong></p><p>占空比：$D &#x3D;\frac{V_{err}}{Vpeak}→d_D &#x3D; \frac{1}{Vpeak}d_{V_{err}}$ </p><p>则PWM模块传递函数：$\frac{1}{Vpeak}$</p><p>包括增益模块和延时模块。</p><p><strong>延时模块：</strong>$f(t) &#x3D; f(t-\tau) 其中\tau是延迟的时间、t&#x3D;\tau才能看到0时刻系统状态$</p><h3 id="3-3-7-拉普拉斯算子-近似"><a href="#3-3-7-拉普拉斯算子-近似" class="headerlink" title="3.3.7 拉普拉斯算子 近似"></a>3.3.7 拉普拉斯算子 近似</h3><p>用双线性近似延迟环节。</p><p>$e^{-st} &#x3D; \frac{1-\frac{s}{w_\tau}}{1+\frac{s}{w_\tau}} &#x3D; \frac{1-0.5st}{1+0.5st}$</p><p><strong>推导：$e^{-st} &#x3D; \frac{e^{-0.5st}}{e^{0.5st}}在s&#x3D;0处展开→&#x3D; \frac{1-0.5st}{1+0.5st}$</strong></p><h3 id="3-3-8-延迟裕度"><a href="#3-3-8-延迟裕度" class="headerlink" title="3.3.8 延迟裕度"></a>3.3.8 延迟裕度</h3><p>在穿越频率处，的相位裕度换算成时间。意味着在延迟多少秒就会造成相位裕度为零，系统震荡。</p><h2 id="3-4选取穿越频率"><a href="#3-4选取穿越频率" class="headerlink" title="3.4选取穿越频率"></a>3.4选取穿越频率</h2><h3 id="3-4-1-简化的Buck电路-研究穿越频率对输出阻抗的影响。"><a href="#3-4-1-简化的Buck电路-研究穿越频率对输出阻抗的影响。" class="headerlink" title="3.4.1 简化的Buck电路(研究穿越频率对输出阻抗的影响。)"></a>3.4.1 简化的Buck电路(研究穿越频率对输出阻抗的影响。)</h3><p><img src="/../pic/image-20240803154844508.png" alt="简化Buck电路"></p><p><strong>输出阻抗</strong>：$Z_{out} &#x3D; (L_{out}s + r_L)||(r_c+\frac{1}{C_{out}s}) &#x3D; \frac{r_L+L_{out}s}{L_{out}C_{out}s^2+r_LC_{out}s+1}(忽略r_c)$</p><p><strong>对s求导得到最大阻抗对应频率</strong>： $w_0 &#x3D; \frac{1}{\sqrt{L_{out}C_{out}}}$ </p><p><strong>特征阻抗</strong>：$Z_0 &#x3D; \sqrt{w_0L_{out}}&#x3D;\frac{1}{\sqrt{C_{out}w_0}}&#x3D;\sqrt{\frac{L_{out}}{C_{out}}}$</p><p><strong>最大阻抗</strong>：$Z_{out,max} &#x3D; \frac{Z_0^2}{r_L}\sqrt{1+(\frac{r_L}{Z_0})^2}$</p><p><img src="/../pic/image-20240803155239029.png" alt="输出阻抗频率曲线"></p><h1 id="四、补偿"><a href="#四、补偿" class="headerlink" title="四、补偿"></a>四、补偿</h1><p>几种PID补偿公式写法：</p><h2 id="4-1-时域写法"><a href="#4-1-时域写法" class="headerlink" title="4.1 时域写法"></a>4.1 时域写法</h2><p>$v_c(t) &#x3D; k_p\epsilon(t)+k_i\int_{0}^{t}\epsilon(t)dt+k_d\frac{d_{\epsilon(t)}}{dt}$</p><p>$v_c(t) &#x3D; k_p[\epsilon(t)+\frac{1}{\tau_i}\int_{0}^{t}\epsilon(t)dt+\tau_d\frac{d_{\epsilon(t)}}{dt}]$</p><h3 id="4-1-1-S域PID"><a href="#4-1-1-S域PID" class="headerlink" title="4.1.1 S域PID"></a>4.1.1 S域PID</h3><p>$v_c(t) &#x3D; k_p[\epsilon(t)+\frac{1}{\tau_i}\int_{0}^{t}\epsilon(t)dt+\tau_d\frac{d_{\epsilon(t)}}{dt}]$</p><p>→拉氏变换$G(s)&#x3D; \frac{v_c{s}}{\epsilon(s)}&#x3D;k_p[1+\frac{1}{\tau_is}+\tau_ds]$</p><p><strong>微分项缺点：</strong>对高频干扰十分敏感，加入滤波环节（一个极点抵消高频增益）</p><p>$\frac{\tau_ds}{1+\frac{\tau_ds}{N}}$</p><p><strong>改进后总PID补偿传函：</strong>$G(s)&#x3D; \frac{v_c{s}}{\epsilon(s)}&#x3D;k_p[1+\frac{1}{\tau_is}+\frac{\tau_ds}{1+\frac{\tau_ds}{N}}]$</p><h3 id="4-1-2-补偿器和零极点转化"><a href="#4-1-2-补偿器和零极点转化" class="headerlink" title="4.1.2 补偿器和零极点转化"></a>4.1.2 补偿器和零极点转化</h3><p>零极点形式：</p><p>$G(s) &#x3D; \frac{(1+\frac{s}{w_{z1}})(1+\frac{s}{w_{z1}})}{\frac{s}{w_{p0}}(1+\frac{s}{w_{p1}})}&#x3D;G(s)&#x3D; \frac{v_c{s}}{\epsilon(s)}&#x3D;k_p[1+\frac{1}{\tau_is}+\frac{\tau_ds}{1+\frac{\tau_ds}{N}}]$</p><p><strong>解方程：</strong></p><p><img src="/../pic/image-20240804111154987.png" alt="参数求解1"></p><p><img src="/../pic/image-20240804111211104.png" alt="参数求解2"></p><p><img src="/../pic/image-20240804111350147.png" alt="PID补偿器实现"></p><h3 id="4-1-3-PI补偿器实际实现"><a href="#4-1-3-PI补偿器实际实现" class="headerlink" title="4.1.3 PI补偿器实际实现"></a>4.1.3 PI补偿器实际实现</h3><p>PI补偿器：</p><p><img src="/../pic/image-20240804111313917.png" alt="PI补偿器"></p><h3 id="4-1-4-PID-在Buck中-使用"><a href="#4-1-4-PID-在Buck中-使用" class="headerlink" title="4.1.4 PID 在Buck中 使用"></a>4.1.4 PID 在Buck中 使用</h3><p><strong>求传递函数  $\frac{V_{out}}{V_{c}}$、得到频率响应曲线：</strong></p><blockquote><p>实验测量</p></blockquote><blockquote><p>小信号分析推导</p></blockquote><blockquote><p>平均模型仿真</p></blockquote><h2 id="4-2-零极点配置补偿变换器（主要是自动控制原理的校正）"><a href="#4-2-零极点配置补偿变换器（主要是自动控制原理的校正）" class="headerlink" title="4.2 零极点配置补偿变换器（主要是自动控制原理的校正）"></a>4.2 零极点配置补偿变换器（主要是自动控制原理的校正）</h2><h3 id="4-2-1-设计步骤"><a href="#4-2-1-设计步骤" class="headerlink" title="4.2.1 设计步骤"></a>4.2.1 设计步骤</h3><p>设计步骤：</p><blockquote><p>求$H(s)$，确定期望穿越频率$f_c$的幅值和相位</p></blockquote><blockquote><p>引入极点(积分环节)，提高直流增益，抑制干扰</p></blockquote><blockquote><p>确定补偿器 极点 零点位置。①保证穿越频率在期望频率 $f_c$。②</p></blockquote><blockquote><p>检查闭环 幅值裕度 相位裕度。  再通过扫描得到实际具有寄生参数的系统，再检查。</p></blockquote><h1 id="剩下的全都是用实际运放搭建补偿器，可以用到了再来看。"><a href="#剩下的全都是用实际运放搭建补偿器，可以用到了再来看。" class="headerlink" title="剩下的全都是用实际运放搭建补偿器，可以用到了再来看。"></a>剩下的全都是用实际运放搭建补偿器，可以用到了再来看。</h1><h1 id="五、运放补偿器"><a href="#五、运放补偿器" class="headerlink" title="五、运放补偿器"></a>五、运放补偿器</h1><h1 id="六、跨导运放-补偿器"><a href="#六、跨导运放-补偿器" class="headerlink" title="六、跨导运放 补偿器"></a>六、跨导运放 补偿器</h1><h1 id="七、TL431补偿器"><a href="#七、TL431补偿器" class="headerlink" title="七、TL431补偿器"></a>七、TL431补偿器</h1><h1 id="八、分流调节器-补偿器"><a href="#八、分流调节器-补偿器" class="headerlink" title="八、分流调节器 补偿器"></a>八、分流调节器 补偿器</h1><h1 id="九、实例"><a href="#九、实例" class="headerlink" title="九、实例"></a>九、实例</h1>]]></content>
    
    
    <categories>
      
      <category>开关电源</category>
      
      <category>原理</category>
      
    </categories>
    
    
    <tags>
      
      <tag>开关电源控制环路设计</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>开关电源项目</title>
    <link href="/2025/01/02/%E5%BC%80%E5%85%B3%E7%94%B5%E6%BA%90%E9%A1%B9%E7%9B%AE/"/>
    <url>/2025/01/02/%E5%BC%80%E5%85%B3%E7%94%B5%E6%BA%90%E9%A1%B9%E7%9B%AE/</url>
    
    <content type="html"><![CDATA[<h1 id="Buck变换器-恒压-横流源"><a href="#Buck变换器-恒压-横流源" class="headerlink" title="Buck变换器(恒压&#x2F;横流源)"></a>Buck变换器(恒压&#x2F;横流源)</h1><p>输入要求：12-15V</p><p>输出要求：9V  2A</p><p>器件选型：</p><h2 id="模块介绍："><a href="#模块介绍：" class="headerlink" title="模块介绍："></a>模块介绍：</h2><h3 id="主回路"><a href="#主回路" class="headerlink" title="主回路"></a>主回路</h3><h3 id="采样回路"><a href="#采样回路" class="headerlink" title="采样回路"></a>采样回路</h3><h4 id="输入电压采样"><a href="#输入电压采样" class="headerlink" title="输入电压采样"></a>输入电压采样</h4><p>采样电阻取值原则：</p><p>①损耗小→电阻大</p><p>②0.6Uadc_max&lt;保持采样值&lt;Uadc_max，采样误差小且不超量程</p><p>两种方式：</p><p>①直接分压接ADC采样</p><p>②分压后接电压跟随器，接ADC。减小ADC电流的导致的采样误差。再串联可调电阻调节。</p><h3 id="辅助电源部分："><a href="#辅助电源部分：" class="headerlink" title="辅助电源部分："></a>辅助电源部分：</h3><p>单片机3.3V供电：LDO  AMS1117-3.3 </p><p>LM358运放7V供电：LDO AMS1117-ADJ  </p><h2 id="驱动部分-IR2104"><a href="#驱动部分-IR2104" class="headerlink" title="驱动部分 IR2104"></a>驱动部分 IR2104</h2><p><img src="/../pic/image-20240613233819390.png" alt="驱动IR2104"></p><p>R5防止电位变化产生振铃，R8产生Vgs驱动MOS。</p><h3 id="控制回路"><a href="#控制回路" class="headerlink" title="控制回路"></a>控制回路</h3><p>STM32C8T6最小核心：</p><p><img src="/../pic/image-20240524215019580.png" alt="image-20240524215019580"></p><p>3路ADC：输出电流，输出电压，输入电压</p><p>PWM驱动</p><p>两路IO</p><h3 id="其他部分"><a href="#其他部分" class="headerlink" title="其他部分"></a>其他部分</h3><ul><li>按键</li></ul><p><img src="/../pic/image-20240524214335010.png" alt="image-20240524214335010"></p><p>电容消抖</p><ul><li>显示</li></ul><p>OLED 0.96 IIC 通信，用通用IO就行</p><h2 id="其他典型控制芯片："><a href="#其他典型控制芯片：" class="headerlink" title="其他典型控制芯片："></a>其他典型控制芯片：</h2><p>UC3842</p><p>TLL494</p><p>参考：</p><h1 id="谐振电容板"><a href="#谐振电容板" class="headerlink" title="谐振电容板"></a>谐振电容板</h1><p>电容 并联 电阻：</p><p>电阻作用：①泄放②均压</p><p>铝基板绝缘层耐压：上面一层 和 最下面一层</p><p><strong>均压电阻：</strong></p><p>封装决定散热决定功耗决定阻值，但是阻值越大均压效果更差，因为电容之间的充放电更慢。</p><p>并联电容 要和 均压电阻并联：</p><p><strong>电容：</strong></p><p>考虑耐压 耐流</p><p>连接线要足够粗</p>]]></content>
    
    
    <categories>
      
      <category>开关电源</category>
      
      <category>项目</category>
      
    </categories>
    
    
    <tags>
      
      <tag>开关电源</tag>
      
      <tag>项目</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>电路原理</title>
    <link href="/2025/01/02/%E7%94%B5%E8%B7%AF%E5%8E%9F%E7%90%86/"/>
    <url>/2025/01/02/%E7%94%B5%E8%B7%AF%E5%8E%9F%E7%90%86/</url>
    
    <content type="html"><![CDATA[<p>简介：参考书籍：  邱关源 《电路》</p><h1 id="第三章-列方程求解电路"><a href="#第三章-列方程求解电路" class="headerlink" title="第三章 列方程求解电路"></a>第三章 列方程求解电路</h1><p>定义：</p><p>结点：</p><p>支路：</p><p>回路：</p><p>树：n个结点，有n-1个树枝。</p><h2 id="3-2-KCL-KVL独立方程个数"><a href="#3-2-KCL-KVL独立方程个数" class="headerlink" title="3-2 KCL KVL独立方程个数"></a>3-2 KCL KVL独立方程个数</h2><p>对于b个支路，电压，电流两个变量，所以有2b个未知数。</p><p>n个结点  b个支路</p><p>KCL：n-1个独立电流源方程。（对于每一个结点，流入流出相等）</p><p>KVL：b-n+1个独立电压源方程。（对于每一个结点，流入流出相等） b(支路数)-(n-1(树枝数))</p><p>对于支路元件特性，有b个方程</p><p><strong>所以2b个未知数，有2b个方程。</strong>能完全求解。</p><p>求解步骤：</p><p>①简单的串并联简化</p><p>②找结点个数，根据结点找支路个数</p><p>③使用方法</p><blockquote><p>支路电流：用支路电流表示电压来消去电压。得到b个方程。</p></blockquote><blockquote><p>网孔电流：设网孔电流。用网孔电流线性表示支路电流用支路电流法。(仅适用于平面电路)</p></blockquote><blockquote><p>回路电流：确定树，根据树找连枝。得到回路(类似网孔)(既适用于平面电路又适用于非平面电路)</p></blockquote><blockquote><p>结点电压：用结点电压表示电流来消去电流。得到b个方程。</p></blockquote><h1 id="第四章-电路定理"><a href="#第四章-电路定理" class="headerlink" title="第四章 电路定理"></a>第四章 电路定理</h1><h2 id="4-1-叠加"><a href="#4-1-叠加" class="headerlink" title="4-1 叠加"></a>4-1 叠加</h2><h2 id="4-2-替代定理"><a href="#4-2-替代定理" class="headerlink" title="4-2 替代定理"></a>4-2 替代定理</h2><p>已知电压，电流波形，用相同电压源、电流源替代器件不影响外部电路。</p><ul><li>变压器替代</li></ul><p>变压器模型用一对电压电流源替代。</p><p><img src="/../pic/image-20240722172705573.png" alt="变压器替代模型"></p><p><strong>为什么不两个都替代为电压源？</strong></p><p><img src="/../pic/image-20240722172909762.png" alt="两个电压源"></p><p>既然如此，原边电流如何求？</p><h2 id="4-3-戴维南-诺顿"><a href="#4-3-戴维南-诺顿" class="headerlink" title="4-3 戴维南 &amp; 诺顿"></a>4-3 戴维南 &amp; 诺顿</h2><h2 id="4-4-最大功率传输"><a href="#4-4-最大功率传输" class="headerlink" title="4-4 最大功率传输"></a>4-4 最大功率传输</h2><h2 id="4-5-特勒根"><a href="#4-5-特勒根" class="headerlink" title="4-5 特勒根"></a>4-5 特勒根</h2><h2 id="4-6-互易"><a href="#4-6-互易" class="headerlink" title="4-6 互易"></a>4-6 互易</h2><h2 id="4-7-对偶"><a href="#4-7-对偶" class="headerlink" title="4-7 对偶"></a>4-7 对偶</h2><h1 id="第十一章-频率响应"><a href="#第十一章-频率响应" class="headerlink" title="第十一章 频率响应"></a>第十一章 频率响应</h1><h3 id="11-2-RLC-串联谐振"><a href="#11-2-RLC-串联谐振" class="headerlink" title="11-2 RLC 串联谐振"></a>11-2 RLC 串联谐振</h3><p>谐振频率：输出阻抗纯阻性。 即当$w &#x3D; \sqrt \frac{1}{LC}$</p><p>品质因数定义：当RLC系统谐振，电感上的电压幅值与 输入电压幅值之比</p><p> $Q &#x3D; \frac{w_0 L}{R} &#x3D; \frac{1}{w_0RC} &#x3D; \frac{1}{R} \sqrt \frac{L}{C}$</p><p><img src="/../pic/image-20240618104459085.png" alt="RLC串联电路"></p><p>推导：</p><p>$\frac{U_{L(S)}}{U_{i(S)}} &#x3D; \frac{LC}{R+LS+\frac{1}{CS}}$</p><p>当$w &#x3D; \sqrt \frac{1}{LC}$，$|\frac{U_{L(S)}}{U_{i(S)}}| &#x3D; \frac{1}{w_0RC} $</p>]]></content>
    
    
    <categories>
      
      <category>课程</category>
      
      <category>专业课</category>
      
    </categories>
    
    
    <tags>
      
      <tag>电路</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>电路基础知识</title>
    <link href="/2025/01/02/%E7%94%B5%E8%B7%AF%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/"/>
    <url>/2025/01/02/%E7%94%B5%E8%B7%AF%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/</url>
    
    <content type="html"><![CDATA[<p>简介：介绍基本知识</p><h1 id="器件基本知识"><a href="#器件基本知识" class="headerlink" title="器件基本知识"></a>器件基本知识</h1><h2 id="参数定义"><a href="#参数定义" class="headerlink" title="参数定义"></a>参数定义</h2><p>电流：单位时间流过单位截面积的电荷量。</p><p>电压：两点电势之差。 电场强度的积分。</p><p>能量：电荷在两点之间移动需要的能量。</p><p>功率：单位时间内电荷在两点之间移动需要的能量。</p><h2 id="电容"><a href="#电容" class="headerlink" title="电容"></a>电容</h2><p>结构：</p><p><img src="/../pic/image-20240622105457776.png" alt="电容结构"></p><p>导电材料+介电材料+导电材料</p><p><strong>特性参数：</strong></p><blockquote><p>容值： 与温度 工作电压(陶瓷电容) 频率 使用时间有关</p></blockquote><blockquote><p>容差：相对于容值的偏差范围</p></blockquote><blockquote><p>工作温度范围：</p></blockquote><blockquote><p>温度系数：容值随温度变化的变化率</p></blockquote><blockquote><p>额定电压：电压峰值，最大值</p></blockquote><blockquote><p>体积效率：单位体积的电容</p></blockquote><blockquote><p>漏电流：电容非理想模型，等效为一个大电阻（$R_p$）并联到电容两端</p></blockquote><p>电容等效模型：</p><p><img src="/../pic/image-20240622102423648.png" alt="电容等效模型"></p><blockquote><p>ESR：交流损耗 和 纹波原因</p></blockquote><blockquote><p>ESL：高频电容失效</p></blockquote><p><img src="/../pic/image-20240622102659732.png" alt="阻抗-频率特性"></p><h3 id="电容种类"><a href="#电容种类" class="headerlink" title="电容种类"></a>电容种类</h3><ul><li>电解电容</li></ul><blockquote><p>铝电解电容：氧化层薄,容值高。容差大，便宜，电压范围宽，ESR大(功耗高)，漏电流高。极化特性，用于直流。   用于直流滤波，去耦。</p></blockquote><p><img src="/../pic/image-20240622104814299.png" alt="铝电解电容"></p><blockquote><p>钽电容：钽相对介电常数高，所以体积效率高。容值小，容差也大。ESR小，能吸收纹波。温度特性稳定。寿命长，因为是固体。对电压尖峰和反极性特别敏感。</p></blockquote><p><img src="/../pic/image-20240622104801026.png" alt="钽电容"></p><ul><li>陶瓷电容</li></ul><p>介电材料为陶瓷材料</p><blockquote><p>Ⅰ类</p><p>相比Ⅱ类</p></blockquote><p>稳定，容值与温度 工作电压(陶瓷电容) 频率 使用时间相关性小。</p><p>容差小</p><p>体积效率低</p><p>低ESR，低漏电流。 高频特性好</p><blockquote><p>Ⅱ类</p></blockquote><p>相比Ⅰ类，</p><p>不够稳定，容值与温度 工作电压(陶瓷电容) 频率 使用时间相关性小。</p><p>体积效率高</p><p>用于直流滤波 去耦。</p><p><img src="/../pic/image-20240622110339041.png" alt="陶瓷电容"></p><p><img src="/../pic/image-20240622110325454.png" alt="MLCC"></p><p><img src="/../pic/image-20240622110354838.png" alt="MLCC结构"></p><ul><li>薄膜电容</li></ul><p>塑料薄膜做介电材料（聚丙烯）</p><p><img src="/../pic/image-20240622110546612.png" alt="薄膜电容"></p><p>聚丙烯</p><blockquote><p>低ESR ESL </p></blockquote><blockquote><p>漏电流低</p></blockquote><blockquote><p>温度特性高</p></blockquote><blockquote><p>体积效率低</p></blockquote><p>聚酯</p><ul><li>超级电容</li></ul><p><img src="/../pic/image-20240622111109136.png" alt="超级电容"></p><ul><li><p>可变电容</p></li><li><p>云母电容</p></li></ul><h2 id="电阻"><a href="#电阻" class="headerlink" title="电阻"></a>电阻</h2><p>阻值定义：</p><p><img src="/../pic/image-20240626135946767.png" alt="image-20240626135946767"></p><p><strong>性能参数：</strong></p><blockquote><p>额定功率  选取原则2-4倍实际功率</p></blockquote><p><img src="/../pic/image-20240626140317117.png" alt="功率降额曲线"></p><blockquote><p>容差</p></blockquote><blockquote><p>温度系数</p></blockquote><blockquote><p>频率响应： 实际电阻模型如下，高频下电容不可忽略。</p></blockquote><p><img src="/../pic/image-20240626140839655.png" alt="实际电阻模型"></p><p><strong>实际电阻类型：</strong></p><p>碳电阻器： 缺点太大不再使用</p><blockquote><p>温度系数差</p></blockquote><blockquote><p>稳定性差</p></blockquote><blockquote><p>精度低</p></blockquote><p>薄膜电阻</p><p>碳膜电阻：高温高压应用</p><p><img src="/../pic/image-20240626141349942.png" alt="薄膜电阻"></p><blockquote><p>低成本</p></blockquote><blockquote><p>噪音低</p></blockquote><p>金属膜电阻：</p><p><img src="/../pic/image-20240626141510697.png" alt="金属膜电阻"></p><blockquote><p>噪声小</p></blockquote><blockquote><p>容差低</p></blockquote><p>金属氧化膜：</p><p><img src="/../pic/image-20240626141607843.png" alt="金属氧化膜"></p><blockquote><p>低成本</p></blockquote><blockquote><p>稳定性、噪声、容差、温度系数 差于金属膜电阻</p></blockquote><blockquote><p>用于高温、高浪涌应用</p></blockquote><p><strong>线绕电阻：</strong>用铜银绕线。</p><p><img src="/../pic/image-20240626142010110.png" alt="线绕电阻"></p><p><img src="/../pic/image-20240626142018336.png" alt="线绕电阻"></p><blockquote><p>高精度</p></blockquote><blockquote><p>温度系数低</p></blockquote><blockquote><p>适合高功率，高精度应用</p></blockquote><blockquote><p>不适用于高频</p></blockquote><p><strong>贴片电阻：</strong></p><p><img src="/../pic/image-20240626142236784.png" alt="贴片电阻"></p><blockquote><p>高精度</p></blockquote><blockquote><p>低容差</p></blockquote><p><strong>可变电阻：</strong></p><p><img src="/../pic/image-20240626142414772.png" alt="可变电阻"></p><h3 id="电阻阻值表示"><a href="#电阻阻值表示" class="headerlink" title="电阻阻值表示"></a>电阻阻值表示</h3><p><strong>四色环电阻</strong></p><p><img src="/../pic/image-20240626142618825.png" alt="色环电阻"></p><p>第一位、第二位：第一二位数字</p><p>第三位：倍数</p><p>第四位：容差</p><p><img src="/../pic/image-20240626142731033.png" alt="色环表"></p><p><img src="/../pic/image-20240626142907873.png" alt="例子1-四环电阻"></p><p><img src="/../pic/image-20240626143006719.png" alt="例子2"></p><p><img src="/../pic/image-20240626143040192.png" alt="没有容差就是20％"></p><p><img src="/../pic/image-20240626143123421.png" alt="五色环电阻"></p><p>六色环电阻：</p><p><img src="/../pic/image-20240627193714775.png" alt="六色环电阻"></p><p><img src="/../pic/image-20240627193742459.png" alt="六色环电阻"></p><p>贴片电阻三种阻值编码方式：</p><blockquote><p>3位</p></blockquote><p><img src="/../pic/image-20240627194121521.png" alt="3位阻值表达"></p><p><img src="/../pic/image-20240627194203129.png" alt="3位阻值表达"></p><p><img src="/../pic/image-20240627194229798.png" alt="3位阻值表达"></p><blockquote><p>4位</p></blockquote><p><img src="/../pic/image-20240627194300973.png" alt="4位阻值表达"></p><p><img src="/../pic/image-20240627194335919.png" alt="4位阻值表达"></p><p><img src="/../pic/image-20240627194345975.png" alt="4位阻值表达"></p><blockquote><p>EIA 96  SMD Resistor Coding</p></blockquote><p><img src="/../pic/image-20240627194525320.png" alt="EIA 96  SMD Resistor Coding"></p><p><img src="/../pic/image-20240627194602397.png" alt="前两位数字值"></p><p><img src="/../pic/image-20240627194544853.png" alt="字母倍数"></p><p><img src="/../pic/image-20240627194737825.png" alt="例子1"></p><p><img src="/../pic/image-20240627194752504.png" alt="例子2"></p><p><img src="/../pic/image-20240627194805953.png" alt="例子3"></p><h2 id="零欧电阻使用场景"><a href="#零欧电阻使用场景" class="headerlink" title="零欧电阻使用场景"></a>零欧电阻使用场景</h2><blockquote><p>跳线</p></blockquote><blockquote><p>方便分步骤测试，先测前级，防止后级干扰</p></blockquote><h2 id="理想-实际-电压源-电流源"><a href="#理想-实际-电压源-电流源" class="headerlink" title="理想&#x2F;实际  电压源&#x2F;电流源"></a>理想&#x2F;实际  电压源&#x2F;电流源</h2><p><img src="/../pic/image-20240628134226234.png" alt="理想/实际-电压源"></p><p>实际电压源串联内阻不为零，只是很小。</p><p><img src="/../pic/image-20240628134120300.png" alt="理想/实际-电流源"></p><p>实际电压源并联内阻不为∞，只是很大。</p><h1 id="运放模块"><a href="#运放模块" class="headerlink" title="运放模块"></a>运放模块</h1><h2 id="运放等效电路"><a href="#运放等效电路" class="headerlink" title="运放等效电路"></a>运放等效电路</h2><p><strong>理想运放参数：</strong></p><blockquote><p>输入阻抗：∞    实际MΩ级</p><p>输出阻抗：0    实际Ω级</p><p>放大系数：∞   实际10e5-10e6</p><p>带宽：∞</p><p>压摆率：∞，跟踪输入的速度</p><p>共模抑制比：∞，$\frac{A_{差模放大倍数}}{A_{共模放大倍数}}$</p></blockquote><p>输入输出特性：</p><p><img src="/../pic/image-20240611161307857.png" alt="运放输入输出特性"></p><blockquote><p>线性区</p></blockquote><blockquote><p>饱和区</p></blockquote><p><strong>实际运放参数：</strong></p><p><img src="/../pic/image-20240611160835372.png" alt="实际运放参数"></p><blockquote><p>失调电压：</p></blockquote><blockquote><p>偏置电流：</p></blockquote><h2 id="运放负反馈"><a href="#运放负反馈" class="headerlink" title="运放负反馈"></a>运放负反馈</h2><p><strong>虚短</strong>：当引入负反馈，运放两端电压相差很小，可以工作在线性区，同相输入端和反相输入端电位近似相等，就像短路一样所以叫虚短。</p><p><strong>虚断</strong>：运放输入电阻十分大，同相输入端和反相输入端之间的电流很小，就像断开一样，所以叫虚断。</p><p>也能通过理论推导得到，令A→∞，可以得到相同特性。</p><p><img src="/../pic/image-20240611162136487.png" alt="反相放大电路"></p><ul><li>理论推导：</li></ul><p>$V_{out} &#x3D;A(V^+ - V^-) 且 \frac{V_{in} - V^-}{R_1} &#x3D; -\frac{V_{out} - V^-}{R_f}$ 当A→∞，则 $V_o ≈ -\frac{R_2V_{in}}{R_1}  且 (V^+ - V^-) &#x3D;\frac{V_{out}}{A}≈0 $</p><h2 id="同相放大电路-电压跟随器"><a href="#同相放大电路-电压跟随器" class="headerlink" title="同相放大电路 电压跟随器"></a>同相放大电路 电压跟随器</h2><p><img src="/../pic/image-20240611162608979.png" alt="同相放大电路"></p><p>分析方法同反相放大电路。</p><p>优点：相比反向比例放大电路，输入阻抗更高；同相比例放大电路$R_i &#x3D; 运放输入电阻$ 反相比例放大电路 $R_i≈R_1$</p><ul><li>当 $R_f →0 ，R_1→∞$得到电压跟随器。</li></ul><p><img src="/../pic/image-20240611163631459.png" alt="image-20240611163631459"></p><p>优点：</p><blockquote><p>输入阻抗高</p></blockquote><blockquote><p>放大倍数&#x3D;1 ，$V_{out} &#x3D; V_{in}$</p></blockquote><blockquote><p>输出阻抗低</p></blockquote><p><img src="/../pic/image-20240611164044779.png" alt="用做前后级缓冲电路"></p><p>做前后级缓冲电路，把前后级分隔开，比如信号调理电路的ADC输入。</p><p>注：有时串接电阻，做限流电阻。（钳位电路、电容放电）</p><h2 id="反-同相比例加法器"><a href="#反-同相比例加法器" class="headerlink" title="反&#x2F;同相比例加法器"></a>反&#x2F;同相比例加法器</h2><h3 id="反向比例加法器"><a href="#反向比例加法器" class="headerlink" title="反向比例加法器"></a>反向比例加法器</h3><p><img src="/../pic/image-20240611170245726.png" alt="反向比例加法器"></p><p><strong>优点：</strong></p><blockquote><p>各个电源输入电阻为串联的$R_n$，不存在相互干扰。</p></blockquote><blockquote><p>输入电压之间没有耦合</p></blockquote><p><strong>应用：</strong></p><blockquote><p>求和</p></blockquote><blockquote><p>求平均</p></blockquote><blockquote><p>提供直流偏置</p></blockquote><blockquote><p>交流信号叠加</p></blockquote><h3 id="同向比例加法器"><a href="#同向比例加法器" class="headerlink" title="同向比例加法器"></a>同向比例加法器</h3><p><img src="/../pic/image-20240611170215988.png" alt="同向比例加法器"></p><p><strong>缺点：</strong></p><blockquote><p>各个电源输入电阻存在相互干扰。</p></blockquote><blockquote><p>输入电压之间存在耦合，不好设计。</p></blockquote><p><strong>应用：</strong></p><blockquote><p>求平均(各个电阻 $R_n$ 取值相同)</p></blockquote><p>所以反相加法器相比同相应用更多。</p><h2 id="差分放大器-减法器"><a href="#差分放大器-减法器" class="headerlink" title="差分放大器(减法器)"></a>差分放大器(减法器)</h2><p><img src="/../pic/image-20240611171224761.png" alt="差分放大器(减法器)"></p><p>缺点：</p><blockquote><p>输入电阻小，前级必须要接电压跟随器</p></blockquote><h2 id="积分器-微分器"><a href="#积分器-微分器" class="headerlink" title="积分器 微分器"></a>积分器 微分器</h2><h3 id="积分器"><a href="#积分器" class="headerlink" title="积分器"></a>积分器</h3><p><img src="/../pic/image-20240611174031413.png" alt="积分电路"></p><p>缺点：</p><blockquote><p>对于频率越高的信号，增益越低。特别对于直流信号，增益无穷大。</p></blockquote><blockquote><p>输入失调电压($V^-$不完全等于0)会导致进入饱和区</p></blockquote><ul><li>改进：并联电阻，稳定直流通路放大倍数。</li></ul><p><img src="/../pic/image-20240611174631484.png" alt="改进积分电路"></p><p>改进后的幅频曲线：</p><p><img src="/../pic/image-20240611175827606.png" alt="改进后的幅频曲线(黄色)"></p><p>对于截止频率 $f_L$ 以前，近似反向比例放大电路</p><p>对于$10f_L$后，充当积分电路。但是还要关注相频曲线。  积分器要设置频率为$10f_L$后</p><h3 id="微分器"><a href="#微分器" class="headerlink" title="微分器"></a>微分器</h3><p><img src="/../pic/image-20240611182257629.png" alt="微分电路"></p><p>缺点：</p><blockquote><p>输入阻抗随频率增大而减小，且对高频噪声过于敏感</p></blockquote><blockquote><p>幅频曲线如下</p><p><img src="/../pic/image-20240611182727253.png" alt="幅频曲线"></p></blockquote><ul><li>改进：输入串联电阻。保证输入阻抗至少为R</li></ul><p><img src="/../pic/image-20240611183134497.png" alt="串联输入电阻"></p><ul><li>并联电容$C_F$，进行相位补偿，防止产生自激振荡</li></ul><p><img src="/../pic/image-20240611183339975.png" alt="image-20240611183339975"></p><p>幅频曲线：</p><p><img src="/../pic/image-20240611183854163.png" alt="改进后的幅频曲线"></p><p>传递函数：$\Phi_{(s)} &#x3D; \frac{R_fCs}{(RCs + 1)(R_f C_fS + 1)}$</p><p>输入频率应在0dB频率和$\frac{f1}{10}$频率之间,大于0dB频率确保增益足够，小于$\frac{f1}{10}$使得能忽略$R$和$C_F$</p><h2 id="频率响应-增益带宽积-闭环带宽-开环带宽-单位增益频率"><a href="#频率响应-增益带宽积-闭环带宽-开环带宽-单位增益频率" class="headerlink" title="频率响应 增益带宽积 闭环带宽 开环带宽 单位增益频率"></a>频率响应 增益带宽积 闭环带宽 开环带宽 单位增益频率</h2><p>运放对于放大倍数和频率的能力不能兼顾,因为晶体管存在 结间电容 运放布局存在分布电容</p><p>运放的放大倍数和频率的传递函数近似于：</p><p><strong>一阶系统</strong>$\Phi_{(s)}&#x3D;\frac{A_0}{1+\frac{w}{w_0}}$</p><p><strong>幅频关系</strong>：</p><p><img src="/../pic/image-20240611231557804.png" alt="放大倍数和频率幅频关系"></p><p>其中放大倍数很大，$A_0&gt;&gt;1$，当$|\Phi_{(jw)} | &#x3D; 1$，频率远大于转折频率，即$f&gt;&gt;f_c$，$\frac{w}{w_0}&gt;&gt;1$。</p><p>所以 $A(w) &#x3D;|\Phi_{(jw)}|&#x3D;|\frac{A_0}{1+\frac{w}{w_0}}|≈\frac{A_0}{\frac{w}{w_0}}$ → $A(w)w（增益带宽积） &#x3D; A_0w_0$</p><p>**单位增益频率(GBW)**：当近似模型中$A(w) &#x3D; 1$时的频率。</p><p><strong>UGB</strong>：实际系统模型不一定为一阶系统，所以频率不一定等于<strong>GBW</strong>，实际系统的$A(w) &#x3D; 1$时的频率。</p><ul><li>为什么开环带宽 闭环带宽能混用？</li></ul><p>开环模型：$G{(s)}&#x3D;\frac{A_0}{1+\frac{s}{w_0}}$</p><p>闭环模型：$\Phi(s)&#x3D;\frac{G{(s)}}{1+\beta G{(s)}} &#x3D; \frac{A_0}{1+\beta A_0}*\frac{1}{1+\frac{s}{w_0(1+\beta A_0)}}$</p><p>所以开环模型$A(w)w &#x3D; A_0w_0 &#x3D;\frac{A_0}{1+\beta A_0}* w_0(1+\beta A_0)$两者增益带宽积相同，所以闭环系统和开环系统 增益带宽积 参数 几乎相等。</p><p><strong>应用启示</strong>：</p><p>运放对于放大倍数和频率的能力不能兼顾，在放大倍数确定时，频率范围就能根据手册GBW和放大倍数确定信号工作频率带宽，通常需要留10倍裕量.</p><p>要提高放大和频率的能力,可以接多级放大电路.相当于增大了增益带宽积.</p><p><strong>参考:</strong></p><p><a href="https://www.bilibili.com/video/BV17f421273N/?spm_id_from=333.337.search-card.all.click&vd_source=b9b657465c6a8feca7c2a3699702b4c7">https://www.bilibili.com/video/BV17f421273N/?spm_id_from=333.337.search-card.all.click&amp;vd_source=b9b657465c6a8feca7c2a3699702b4c7</a></p><h2 id="压摆率"><a href="#压摆率" class="headerlink" title="压摆率"></a>压摆率</h2><p>运放一般由三级电路组成:差分输入级+中间放大级+输出级</p><p>中间放大级的电容充放电 $\frac{du}{dt} &#x3D; \frac{i}{C}$速度影响了信号的传递速度,所以输出信号不可能完全跟上变化的输入信号.</p><p><strong>举例:</strong></p><p>压摆率$SR &#x3D; 0.5 V&#x2F;us$,</p><p><img src="/../pic/image-20240611235148619.png" alt="输入信号幅值5V 周期40us"></p><p>输入信号变化,需要10us才能到达5V.</p><p><img src="/../pic/image-20240611235232348.png" alt="输入信号幅值5V 周期20us"></p><p><img src="/../pic/image-20240611235324238.png" alt="输入信号幅值10V 周期20us"></p><p><strong>应用启示:</strong></p><p>对于正弦波,压摆率至少要大于他的导数最大值.才不会出现失真,一般还要取裕量.</p><p><strong>经验:</strong></p><blockquote><p>对于大信号,一般压摆率会限制运放选型.</p></blockquote><blockquote><p>对于小信号,一般增益带宽积会影响运放选型</p></blockquote><h2 id="共模抑制比"><a href="#共模抑制比" class="headerlink" title="共模抑制比"></a>共模抑制比</h2><p>共模信号：一般为电磁干扰共模干扰</p><p>差模信号：输入信号（待放大信号）</p><p><img src="/../pic/image-20240612090924332.png" alt="共模信号输入"></p><p><img src="/../pic/image-20240612091052791.png" alt="差模信号输入"></p><p>总输出：$v_{out} &#x3D; A_{cm}V_n + A_dV_{id}$</p><p>共模抑制比定义：$CMRR &#x3D;  \frac{A_d}{A_{cm}}$ 理想运放为∞</p><p><img src="/../pic/image-20240612091319649.png" alt="共模抑制比和频率的幅频关系"></p><h2 id="输入失调电压"><a href="#输入失调电压" class="headerlink" title="输入失调电压"></a>输入失调电压</h2><p>原因：运放第一级差分输入级的 两个电路参数不完全对称，如晶体管，转换为电压的电阻。会造成零输入时候差分输入级会有很小的电压差，再通过中间放大级放大后输出到 $V_{out}$。</p><p><img src="/../pic/image-20240612092214251.png" alt="差分输入级"></p><p><img src="/../pic/image-20240612092402431.png" alt="输入失调电压示意图"></p><p><strong>输入失调电压值：</strong>在一端上施加相反的电压 $V_d$，使输出为0。 这个 $V_d$就是输入失调电压。</p><p>失调电压参数大概呈正态分布，手册上标的最大值。</p><p><strong>对放大电路的影响：</strong></p><p><img src="/../pic/image-20240612093154934.png" alt="输入失调电压对同相放大电路影响"></p><p>$V_{io}$：输入信号</p><p>$V_d$：输入失调电压，难以预测极性，所以叠加可能为正，可能为负</p><p>用叠加定理</p><p>$V_{out} &#x3D; (1+\frac{R_f}{R_1})(V_{io}±V_d)$</p><p><strong>抑制失调电压影响的办法：</strong></p><blockquote><p>选小输入失调电压运放</p></blockquote><blockquote><p>直流失调调零电路</p><p><img src="/../pic/image-20240612093517255.png" alt="直流失调调零电路"></p></blockquote><p>输入失调电压会受随温度变化近似线性变化。</p><h2 id="输入偏置电流"><a href="#输入偏置电流" class="headerlink" title="输入偏置电流"></a>输入偏置电流</h2><p>理想运放：流入运放两端的电流为零。</p><p>实际运放：会有电流流入运放差分输入级 BJT的基级电流 or MOSFET的栅极电流。这个电流为运放提供合适的静态工作点。</p><p>输入偏置电流：差分输入级的共模信号提供静态工作点 差模信号为放大信号</p><p>所以 </p><p><strong>输入偏置电流定义：</strong>$I_B &#x3D; \frac{I_B^+ +I_B^-}{2}$</p><p>理想情况下： $I_B^+ &#x3D;I_B^-$，但是由于制作工艺做不到完全对称所以两者有偏差</p><p><strong>输入失调电流定义：</strong> $I_{os} &#x3D; |I_B^+-I_B^-|$  在后面的计算中认为失调电流&#x3D;0，认为  $I_B^+ &#x3D;I_B^-$。</p><p><img src="/../pic/image-20240612134511792.png" alt="BJT差分输入级 输入偏置电流"></p><p><strong>偏置电流对反相比例放大电路影响</strong>：</p><p><img src="/../pic/image-20240612135459689.png" alt="反相比例放大电路"></p><p><img src="/../pic/image-20240612140950260.png" alt="输入偏置电流单独作用等效电路"></p><p><strong>为什么要这样等效？</strong></p><p>图中的运放依旧是理想运放，由于负反馈，同相，反相输入端电位都为零，相当于把虚地点拉出来而已。</p><p>同相接地，对同相的电位不产生影响，就对 $V_{out}$不产生影响。</p><p>反相 $R_1$两端接地，电流流过$R_f$、 $V_{out} &#x3D; -I_B^-R_f$</p><p><strong>解决办法：</strong></p><p>同相端接电阻用$I_B^+$抵消。</p><p><img src="/../pic/image-20240612143602680.png" alt="消除偏置电流的影响"></p><p>$V_{out} &#x3D; I_B^+R_c(\frac{R_1+R_f}{R_1})-I_B^-R_f$</p><p>当$R_c &#x3D; R_1&#x2F;&#x2F;R_f、I_B^+ &#x3D; I_B^-$偏置电流影响消除。</p><p>但是因为差分输入级两端不完全对称，存在失调电流$I_B^+ ≠ I_B^-$，会产生 $V_{ios} &#x3D; |I_B^+ - I_B^-|R_f$偏差。</p><p>和失调电压产生的偏差叠加产生最后的误差。</p><p><img src="/../pic/image-20240612144117899.png" alt="失调电压 失调电流叠加"></p><p>$V_{oo} &#x3D; V_{io} + V_{ios} &#x3D; (\frac{R_1+R_f}{R_1})V_{io} +|I_B^+ - I_B^-|R_f $</p><h2 id="比较器"><a href="#比较器" class="headerlink" title="比较器"></a>比较器</h2><p><strong>相比一般运放特点：</strong></p><p>传输延迟小，电压上升下降快(压摆率高)</p><p>输出级一般是开路集电极</p><p><strong>波形输出：</strong></p><p><img src="/../pic/image-20240612154147425.png" alt="波形输出"></p><p><strong>应用：</strong></p><h3 id="窗口比较器"><a href="#窗口比较器" class="headerlink" title="窗口比较器"></a>窗口比较器</h3><p><img src="/../pic/image-20240612153600510.png" alt="窗口比较器"></p><p>拉高条件 $V_L&lt;V_{in}&lt;V_H$</p><p><img src="/../pic/image-20240612154458261.png" alt="波形"></p><p><strong>缺点：</strong></p><p>当输入叠加噪声时，输出不稳定</p><p><img src="/../pic/image-20240612154604708.png" alt="image-20240612154604708"></p><p><strong>解决办法：</strong></p><p>使用施密特触发器提升抗噪能力</p><h3 id="施密特触发器"><a href="#施密特触发器" class="headerlink" title="施密特触发器"></a>施密特触发器</h3><p><img src="/../pic/image-20240612155050649.png" alt="同相施密特触发器标志"></p><p><img src="/../pic/image-20240612155739833.png" alt="反相施密特触发器标志"></p><p><img src="/../pic/image-20240612155303746.png" alt="施密特触发器波形"></p><p><img src="/../pic/image-20240612155520558.png" alt="传输特性"></p><p><strong>设计参数：</strong></p><blockquote><p>高电平电压</p></blockquote><blockquote><p>高电平触发电压</p></blockquote><blockquote><p>低电平电压</p></blockquote><blockquote><p>低电平触发电压</p></blockquote><p><img src="/../pic/image-20240612160425743.png" alt="同相施密特触发器"></p><p><strong>分析：</strong></p><p>$\frac{V_{in} - V^+}{R_1} &#x3D; -\frac{V_{out} - V^+}{R_2}$→ $V^+ &#x3D;\frac{R_1}{R_1 + R_2}V_{out} + \frac{R_2}{R_1 + R_2}V_{in}$</p><p>当$V_{out} &#x3D; V_L$，$V_{UT} &#x3D; -\frac{R_1}{R_2}V_L$</p><p>当$V_{out} &#x3D; V_H$，$V_{LT} &#x3D; -\frac{R_1}{R_2}V_H$</p><p><img src="/../pic/image-20240612160452697.png" alt="反相施密特触发器"></p><p><strong>分析：</strong></p><p>$\frac{V^+}{R_1} &#x3D; \frac{V_{out} }{R_1 + R_2 }$→ $V^+ &#x3D;\frac{R_1}{R_1 + R_2}V_{out}$</p><p>当$V_{out} &#x3D; V_L$，$V_{UT} &#x3D; \frac{R_1}{R_1 + R_2}V_{L}$</p><p>当$V_{out} &#x3D; V_H$，$V_{LT} &#x3D; \frac{R_1}{R_1 + R_2}V_{H}$</p><p><strong>应用：</strong></p><p>电平比较器</p><p>波形整形电路：三角波→方波  MOSFET驱动</p><p>模数转换</p><h2 id="仪表放大器"><a href="#仪表放大器" class="headerlink" title="仪表放大器"></a>仪表放大器</h2><p><strong>特点：</strong></p><blockquote><p>高增益</p></blockquote><blockquote><p>高共模抑制比</p></blockquote><blockquote><p>高输入阻抗</p></blockquote><p><strong>一般差分放大器共模抑制比：</strong></p><p><img src="/../pic/image-20240612170106285.png" alt="电阻误差引入的共模抑制比降低"></p><p><strong>分析：</strong></p><p>共模抑制比：</p><p>输入阻抗：</p><p>解决方法：</p><blockquote><p>电阻运放集成IC</p></blockquote><blockquote><p>前级接电压跟随器</p></blockquote><blockquote><p>仪表放大器</p></blockquote><h3 id="仪表放大器-1"><a href="#仪表放大器-1" class="headerlink" title="仪表放大器"></a>仪表放大器</h3><p><img src="/../pic/image-20240612171154421.png" alt="仪表放大器"></p><p>分析：</p><p>当 $\frac{R_4}{R_3} &#x3D; \frac{R_2}{R_1}$</p><p>$V_{out} &#x3D; \frac{V_A - V_B}{R_g}(R_g + R_5 +R_6)*\frac{R_2}{R_1}$</p><p><strong>仪表放大器相比于差分放大器优点：</strong></p><blockquote><p>只有R_g由外部提供，对称性好，且共模信号由于负反馈出现在R_g两端被减去，所以共模抑制比高</p></blockquote><blockquote><p>前级电压跟随器输,入阻抗高</p></blockquote><blockquote><p>放大倍数 可以在不改变对称性的情况下调节 R_g</p></blockquote><p>对于共模信号&gt;&gt;差模信号的应用非常友好。</p><p>仪表放大器&#x3D;前级电压跟随器+共模信号相减+差分放大电路+集成特性+R_g调节</p><h2 id="电压电流转换器"><a href="#电压电流转换器" class="headerlink" title="电压电流转换器"></a>电压电流转换器</h2><h2 id="电流电压转换器"><a href="#电流电压转换器" class="headerlink" title="电流电压转换器"></a>电流电压转换器</h2><h2 id="对数指数运算电路"><a href="#对数指数运算电路" class="headerlink" title="对数指数运算电路"></a>对数指数运算电路</h2><p><img src="/../pic/image-20240613092948766.png" alt="对数运算电路—二极管"></p><p>分析：</p><p>$I_D &#x3D; I_s(e^{\frac{U}{U_T}}-1)、I_D &#x3D; \frac{V_{in}}{R}$</p><p>当$U&gt;&gt;U_T$→ $V_{out} &#x3D; -U_T \ln \frac{V_{in}}{I_S R}$</p><p><img src="/../pic/image-20240613094122834.png" alt="指数运算电路—二极管"></p><p>分析：</p><p>$I_D &#x3D; I_s(e^{\frac{U_{in}}{U_T}}-1)、I_D &#x3D; -\frac{V_{out}}{R}$</p><p>当$U_{in}&gt;&gt;U_T$→ $V_{out} &#x3D; -I_sRe^{\frac{U_{in}}{U_T}}$</p><p><strong>缺点</strong>：反向饱和电流 $I_s$ 受温度影响比较大，U_T 也和温度有关。</p><p><img src="/../pic/image-20240613094616412.png" alt="对数运算电路—BJT"></p><p>分析： 当 $V_{in}&gt;0$ 发射结正偏，集电结处于正反偏临界状态，BJT处于饱和区和放大区临界状态。</p><p>$\beta&gt;&gt;1→I_c ≈ I_e$ </p><p>$I_c ≈ I_E &#x3D; I_s(e^{\frac{U_{be}}{U_T}}-1)、I_R&#x3D;\frac{V_{in}}{R}、U_{be} &#x3D; -V_{out}$</p><p>当$U&gt;&gt;U_T$→ $V_{out} &#x3D; -U_T \ln \frac{V_{in}}{I_S R}$</p><p><img src="/../pic/image-20240613095551011.png" alt="指数运算电路—BJT"></p><p>分析： 当 $V_{in}&gt;0$ 发射结正偏，集电结处于正反偏临界状态，BJT处于饱和区和放大区临界状态。</p><p>$\beta&gt;&gt;1→I_c ≈ I_e$ </p><p>$I_c ≈ I_E &#x3D; I_s(e^{\frac{-U_{be}}{U_T}}-1)、I_R&#x3D;\frac{-V_{out}}{R}、U_{be} &#x3D; -V_{in}$</p><p>当$U&gt;&gt;U_T$→ $V_{out} &#x3D; -I_sRe^{\frac{U_{in}}{U_T}}$</p><p><img src="/../pic/image-20240613100052530.png" alt="消除温度漂移特性 对数放大电路"></p><p>分析：</p><p>$V_{a} &#x3D; -U_T \ln \frac{V_{in}}{I_S R}$</p><p>$V_b &#x3D; -U_T \ln \frac{V_{R}}{I_S R}$</p><p>$V_{out} &#x3D; -\frac{R_5 + R_6}{R_5} \frac{R_4 }{R_3}U_T \ln \frac{V_{in}}{V_R}$ </p><p>用差分来消除 $I_s$的影响，选取 $R_5$的温度系数来减弱$U_T$的影响。</p><h2 id="精密整流电路"><a href="#精密整流电路" class="headerlink" title="精密整流电路"></a>精密整流电路</h2><p><img src="/../pic/image-20240611135950075.png" alt="半波整流电路"></p><p>理想二极管波形：</p><p><img src="/../pic/image-20240611140026004.png" alt="理想二极管波形"></p><p><img src="/../pic/image-20240611140056061.png" alt="理想二极管半波整流电路传输特性"></p><p><img src="/../pic/image-20240611140142370.png" alt="实际半波整流电路波形"></p><p><img src="/../pic/image-20240611140352535.png" alt="实际传输特性"></p><p>对于大电压整流电路，二极管压降可以忽略不计。但对于小信号则会产生严重失真。</p><ul><li>解决方式：精密整流电路</li></ul><p><img src="/../pic/image-20240611140546564.png" alt="精密整流电路"></p><p><img src="/../pic/image-20240611140614374.png" alt="传输特性"></p><p><strong>传输特性分析：</strong></p><blockquote><p>$V_{in}&gt;0$，二极管导通，$V_o+V_{0.7} &#x3D; A(V_{in} - V_o)$→$V_o &#x3D; \frac{AV_{in} - V_{0.7}}{1+A}≈V_{in}$，相当于一个电压跟随器。</p></blockquote><blockquote><p>$V_{in}&lt;0$，二极管截止</p></blockquote><p>优点：等效为理想二极管</p><p>缺点：二极管截止时，运放工作在饱和区，当反向变为正向时从饱和区进入线性区需要一定时间，当输入信号工作频率过高时，会产生失真，限制了工作频率。</p><ul><li><strong>解决方法</strong>：在二极管截止时也引入负反馈。</li></ul><p><img src="/../pic/image-20240611141752567.png" alt="引入反向反馈的精密整流电路"></p><p><strong>模态分析：</strong></p><blockquote><p>$V_{in}&gt;0$，$D_1$ 导通,$D_2$ 截止，$V_{out} &#x3D; 0$。  $R_1 D_1 近似构成电压跟随器$</p></blockquote><blockquote><p>$V_{in}&lt;0$，$D_1$ 截止,$D_2$ 导通 ， $R_1 R_2 D_2近似构成反向比例放大电路$。</p><p>$V_{out} + V_{0.7} &#x3D;-AV^- 且 \frac{V_{in} - V^-}{R_1} &#x3D; -\frac{V_{out} - V^-}{R_2}$ 当A→∞，则 $V_o ≈ -\frac{R_2V_{in}}{R_1} $也可用虚短虚断分析</p></blockquote><p><img src="/../pic/image-20240611150003416.png" alt="传输特性"></p><p><img src="/../pic/image-20240611150142991.png" alt="输入输出波形 蓝色输入 黄色输出"></p><p><img src="/../pic/image-20240611150104951.png" alt="另一种形式"></p><p>全波精密整流电路</p><p><img src="/../pic/image-20240611150339569.png" alt="全波精密整流电路"></p><p>-2倍增益与原始信号相加就得到全波整流波形。</p><p><strong>应用：</strong></p><p>峰值采样电路 用整流后的波形 过RC充放电，然后接电压跟随器。</p><p>参考:<a href="https://www.youtube.com/watch?v=5HweBajP-5g&t=1s">https://www.youtube.com/watch?v=5HweBajP-5g&amp;t=1s</a></p><h2 id="峰值采样电路"><a href="#峰值采样电路" class="headerlink" title="峰值采样电路"></a>峰值采样电路</h2><p><img src="/../pic/image-20240611150712886.png" alt="理想二极管峰值检测电路"></p><p>假设二极管为理想二极管，但实际总会有压降</p><p><img src="/../pic/image-20240611150901660.png" alt="蓝色为实际输出波形 黄色为理想二极管输出波形"></p><p>用精密整流电路(等效理想二极管)代替二极管</p><p><img src="/../pic/image-20240611151217329.png" alt="image-20240611151217329"></p><p>但是还需要放电，不然尖峰干扰会影响输出特性。 通过负载电阻放电。</p><p><img src="/../pic/image-20240611151308453.png" alt="并联电阻放电"></p><p>缺点：</p><p>负载可能会变，因此$RC$时间常数随负载特性改变。需要保持$\tau_{RC}&gt;10倍信号周期$</p><ul><li>接入电压跟随器，电压跟随器输入阻抗大，输出阻抗小。或者放电</li></ul><p><img src="/../pic/image-20240611151734601.png" alt="接入电压跟随器稳定放电阻抗"></p><p>缺点：</p><p>$V_{in}&lt;0$，放大器工作在负饱和状态，限制工作频率。 </p><ul><li>改进：引入负输入时的负反馈</li></ul><p><img src="/../pic/image-20240611152206792.png" alt="引入负输入时的负反馈"></p><p>二极管应该选用肖特基二极管，寄生电容参数低，高频特性好。</p><p><strong>其他电路：</strong></p><p><img src="/../pic/image-20240611151845659.png" alt="通过开关手动控制放电"></p><h2 id="全波整流电路-绝对值电路"><a href="#全波整流电路-绝对值电路" class="headerlink" title="全波整流电路(绝对值电路)"></a>全波整流电路(绝对值电路)</h2><p><img src="/../pic/image-20240907172818910.png" alt="全波整流电路"></p><h2 id="RC相移振荡器"><a href="#RC相移振荡器" class="headerlink" title="RC相移振荡器"></a>RC相移振荡器</h2><p><img src="/../pic/image-20240613102259744.png" alt="RC相移振荡器"></p><p><strong>振荡要求：</strong></p><p>开环传函 $|G_{(s)} |&#x3D; 1、\ang G_{(s)} &#x3D; 2n\pi$</p><p>反相比例放大电路提供180度相角，三级RC提供180度。</p><p>调节放大倍数让总增益为1。</p><h2 id="维恩桥振荡器"><a href="#维恩桥振荡器" class="headerlink" title="维恩桥振荡器"></a>维恩桥振荡器</h2><h2 id="Astable多谐振荡器"><a href="#Astable多谐振荡器" class="headerlink" title="Astable多谐振荡器"></a>Astable多谐振荡器</h2><h2 id="单稳态多谐振荡器"><a href="#单稳态多谐振荡器" class="headerlink" title="单稳态多谐振荡器"></a>单稳态多谐振荡器</h2><h2 id="有源箝位电路"><a href="#有源箝位电路" class="headerlink" title="有源箝位电路"></a>有源箝位电路</h2><p>使用精密二极管代替普通二极管</p><h2 id="有源Clipper电路"><a href="#有源Clipper电路" class="headerlink" title="有源Clipper电路"></a>有源Clipper电路</h2><p>使用精密二极管代替普通二极管</p><h2 id="电压调节器"><a href="#电压调节器" class="headerlink" title="电压调节器"></a>电压调节器</h2><h2 id="电源抑制比"><a href="#电源抑制比" class="headerlink" title="电源抑制比"></a>电源抑制比</h2><p>参考：<a href="https://www.youtube.com/watch?v=w4531AVjBYY&t=158s">https://www.youtube.com/watch?v=w4531AVjBYY&amp;t=158s</a></p><h2 id="运放选型"><a href="#运放选型" class="headerlink" title="运放选型"></a>运放选型</h2><p>GBW：运放的幅频特性曲线的穿越频率。</p><p>​闭环增益带宽 闭环放大倍数 GBW 关系$f_{closed-loop} &#x3D; \frac{GBW}{A_{CL}}$</p><p>UGBW：当闭环增益为1时的 $f_{closed-loop}$</p><p>压摆率（Slew Rate）：对于频率为f的正弦信号，$U_{in} &#x3D;U_Asin(2\pi ft)→\frac{dU_{in}}{dt} &#x3D; U_A2\pi fcos(2\pi ft)&lt;U_A2\pi f$ ，压摆率至少为：$U_A2\pi f$</p><h1 id="米勒平台"><a href="#米勒平台" class="headerlink" title="米勒平台"></a>米勒平台</h1><p>原因：在开关管完全导通时候，Mosfet 寄生电容$C_{gd}$把$C_{gs}$短路掉，阻止$C_{gs}$继续充电，直到$V_{gd}&#x3D;V_{gs}(这时等于米勒电压)$，$V_{gs}$才继续上升到$V_G$。</p><p>影响：延长导通时间，增加开关管动态损耗。</p><p><img src="/../pic/image-20240830201053100.png" alt="电路等效模型"></p><p><strong>模态分析：</strong></p><p>四个阶段近似波形图</p><p><strong>MOSFET工作状态</strong>：①截止区②Vgs上升横流区(工作曲线上移)③Vgs不变，Vds下降，横流区(工作曲线左移)④Vgs上升饱和区(工作曲线左移)</p><p><img src="/../pic/image-20240830100235236.png" alt="MOSFET工作区间特性"></p><p><img src="/../pic/image-20240509120435244.png" alt="理想波形近似图"></p><p>理想波形：</p><blockquote><p>实际为一阶RC电路，电压指数上升，因为开通时间相对于时间常数比较小，所以在该点近似为直线。</p></blockquote><blockquote><p>$t2-t3，V_{ds}$ 下降是因为漏极存在寄生电感。 $I_L$上升，电感会分掉一部分$V_{ds}$压降。</p></blockquote><blockquote><p>$t3-t4，I_d$ 有 尖峰是因为$t2-t3$MOS关断，电感通过二极管续流，给二极管PN结电容充电，但是开通时结电容放电产生尖峰。</p></blockquote><p><img src="/../pic/image-20240509120543713.png" alt="考虑寄生参数波形图"></p><p>分别为：驱动波形、栅极电流$(I_g)$、栅极源极电压$(V_{gs})$、MOS 漏源极电压&#x2F;电流$(V_{ds})$、负载电流&#x2F;漏源电流$(I_L)$</p><p><strong>模态分析：</strong></p><p>模态①$(t1—t2)$开通延时阶段  $V_{gs}≤V_{th}$(MOS开通电压)   MOS工作在截止区</p><p><img src="/../pic/image-20240830201107857.png" alt="模态①等效电路"></p><p>$V_G从V_{G_{OFF}}→V_{G_{ON}}$，$V_G$给$C_{gs}，C_{gd}$充电。</p><p>$I_g&#x3D;I_{gs}+I_{gd}&#x3D;C_{gs}\frac{dV_{gs}}{dt}+C_{gd}\frac{d(V_{gs}-V_{ds})}{dt}&#x3D;\frac{V_G-V_{gs}}{R_g}$</p><p>$V_{ds}&#x3D;&#x3D;→(C_{gs}+C_{gd})\frac{dV_{gs}}{dt}&#x3D;\frac{V_G-V_{gs}}{R_g}$解微分方程，$V_{gs}$初值为$V_{gsoff}$</p><p>→</p><p>直到$V_{gs}&#x3D;V_{th}$，该模态结束。</p><p>模态②$(t2—t3)$电流上升阶段  $V_{gs}&#x3D;V_{th}→V_{ds}+V_{gd}&#x3D;V_{gs}$(负载电流)   MOS工作在恒流区 Vgs控制导通程度直到负载电流不增加(Rds&lt;&lt;RL、电压几乎全部施加到Rl上) </p><p><img src="/../pic/image-20240830201053100.png" alt="模态②等效模型"></p><p>$V_{gs}&#x3D;V_{GON}(1-e^{-\frac{t}{\tau}})$</p><p>$(V_{gs}-V_{th})g_m&#x3D;I_d$</p><p>当$I_d$上升到负载电流，该模态结束。</p><p>模态③米勒平台阶段  $V_{gd}≤V_{gs}$(负载电流)   MOS工作在恒流区向左移动   $V_{gd}≤V_{gs}$，电容$C_{gd}$把$C_{gs}$短路，$C_{gs}$不充电，形成米勒平台。</p><p><img src="/../pic/image-20240830220405272.png" alt="模态③等效电路"></p><p><img src="/../pic/image-20240509183650288.png" alt="image-20240509183650288"></p><p>模态④ $V_{gd}≤V_{gs}&#x2F;V_{ds}&#x3D;0开始，V_{gs}$继续充电到驱动电压。</p><p><img src="/../pic/image-20240830215818444.png" alt="模态④等效电路"></p><p><img src="/../pic/image-20240509183704001.png" alt="image-20240509183704001"></p><p>参考：</p><p>感性：<a href="https://www.bilibili.com/video/BV17U4y1Z73c/?spm_id_from=333.999.0.0&vd_source=b9b657465c6a8feca7c2a3699702b4c7">https://www.bilibili.com/video/BV17U4y1Z73c/?spm_id_from=333.999.0.0&amp;vd_source=b9b657465c6a8feca7c2a3699702b4c7</a></p><p>理性：<a href="https://www.bilibili.com/video/BV1jS4y117Uf/?spm_id_from=333.337.search-card.all.click&vd_source=b9b657465c6a8feca7c2a3699702b4c7">https://www.bilibili.com/video/BV1jS4y117Uf/?spm_id_from=333.337.search-card.all.click&amp;vd_source=b9b657465c6a8feca7c2a3699702b4c7</a></p><h1 id="变压器两种原边等效"><a href="#变压器两种原边等效" class="headerlink" title="变压器两种原边等效"></a>变压器两种原边等效</h1><h3 id="磁学基本物理量："><a href="#磁学基本物理量：" class="headerlink" title="磁学基本物理量："></a>磁学基本物理量：</h3><p>磁感应强度： $B()$   </p><p>磁通量&#x2F;磁通：$\Phi(Wb)$</p><p><strong>关系式：</strong></p><p>$\int{B}{dl} &#x3D; u_0 I$</p><p>按原边串联阻抗等效</p><p><img src="/../pic/image-20240509190344282.png" alt="image-20240509190344282"></p><p>按励磁电流+负载电流等效</p><p><img src="/../pic/image-20240509190330094.png" alt="image-20240509190330094"></p><p><img src="/../pic/image-20240707171905699.png" alt="M模型"></p><p><img src="/../pic/image-20240707171852595.png" alt="T模型"></p><h1 id="二极管反向恢复时间"><a href="#二极管反向恢复时间" class="headerlink" title="二极管反向恢复时间"></a>二极管反向恢复时间</h1><p>原因：势垒电容+扩散电容</p><h2 id="肖特基二极管"><a href="#肖特基二极管" class="headerlink" title="肖特基二极管"></a>肖特基二极管</h2><p><strong>结构：</strong>P区：少量金属掺杂                      N区：掺杂五价元素P</p><p>因为金属掺杂浓度少，所以金属半区不会形成耗尽层，结电容大大减小。</p><p><img src="/../pic/image-20240829123001225.png" alt="肖特基二极管结电容"></p><p>优点：结电容小，工作频率高</p><p>缺点：击穿电压低</p><h2 id="旁路电容-去耦电容"><a href="#旁路电容-去耦电容" class="headerlink" title="旁路电容 去耦电容"></a>旁路电容 去耦电容</h2><p>旁路电容：减小电源干扰对IC的影响</p><p>去耦电容：减小上电启动IC对电源的影响</p><p>因为第二个频率高于第一个频率，又因为线路寄生电感，电阻，所以大电容靠近电源，小电容靠近IC。</p><p><a href="https://www.bilibili.com/video/BV1ra4y1c7dX/?spm_id_from=333.337.search-card.all.click&vd_source=b9b657465c6a8feca7c2a3699702b4c7">https://www.bilibili.com/video/BV1ra4y1c7dX/?spm_id_from=333.337.search-card.all.click&amp;vd_source=b9b657465c6a8feca7c2a3699702b4c7</a></p><p>参考：</p><p><a href="https://www.bilibili.com/video/BV1Gt411b7Zq/?p=3&vd_source=b9b657465c6a8feca7c2a3699702b4c7">https://www.bilibili.com/video/BV1Gt411b7Zq/?p=3&amp;vd_source=b9b657465c6a8feca7c2a3699702b4c7</a>  PN结特性</p><p><a href="https://www.bilibili.com/video/BV1CW4y117wz/?spm_id_from=333.337.search-card.all.click&vd_source=b9b657465c6a8feca7c2a3699702b4c7">https://www.bilibili.com/video/BV1CW4y117wz/?spm_id_from=333.337.search-card.all.click&amp;vd_source=b9b657465c6a8feca7c2a3699702b4c7</a></p><h1 id="自举升压电路"><a href="#自举升压电路" class="headerlink" title="自举升压电路"></a>自举升压电路</h1><h1 id="MOSFET驱动"><a href="#MOSFET驱动" class="headerlink" title="MOSFET驱动"></a>MOSFET驱动</h1><p>参考：<a href="https://www.bilibili.com/video/BV1By411B7j7/?spm_id_from=333.1007.top_right_bar_window_history.content.click&vd_source=b9b657465c6a8feca7c2a3699702b4c7">https://www.bilibili.com/video/BV1By411B7j7/?spm_id_from=333.1007.top_right_bar_window_history.content.click&amp;vd_source=b9b657465c6a8feca7c2a3699702b4c7</a></p><h1 id="RLC谐振电路公式推导"><a href="#RLC谐振电路公式推导" class="headerlink" title="RLC谐振电路公式推导"></a>RLC谐振电路公式推导</h1><p><img src="/../pic/image-20240706085849527.png" alt="LCR谐振拓扑"></p><p>电压源 左+右-</p><p><strong>初始条件：</strong></p><blockquote><p>电感电流：$I_{L0}$</p></blockquote><blockquote><p>电容电压：$V_{C0}$</p></blockquote><p><strong>微分方程：</strong></p><blockquote><p>$i_l &#x3D; C \frac{d_{uc}}{d_t}$</p><p>$U_L &#x3D; L\frac{d_{i_l}}{d_t}$</p><p>$U_{in} &#x3D; i_LR + L\frac{d_{i_l}}{d_t} + U_c$</p><p>$U{in}  &#x3D; U_{ac}sin(wt) + U_{dc}$ </p></blockquote><p>→ $U_{ac}sin(wt) + U_{dc} &#x3D;LC \frac{d^2_{uc}}{d_t^2} + RC \frac{d_{uc}}{d_t} +  U_c$</p><p><strong>拉氏变换：</strong></p><p>$U_{ac}\frac{w}{w^2 + w^2}+ U_{dc}(s) \frac{1}{s}+ RC U_c(0) + LC\dot{U_c(0)} + LCsU_c(0)&#x3D; Uc(s)(LCs^2 +RCs +1)$</p><p>直流零状态响应：</p><blockquote><p>$Uc(s) &#x3D; U_{dc} \frac{1}{s} \frac{1}{(LCs^2 +RCs +1)}&#x3D; U_{dc} \frac{1}{s} \frac{1}{(\frac{s^2}{w_0^2} +2\zeta\frac{s}{w_0Q} +1)} 其中：\frac{1}{Q}&#x3D;2\zeta&#x3D;\frac{R}{wL}   、w_0&#x3D;\frac{1}{\sqrt{LC}}$</p><p>令$\frac{1}{s} \frac{1}{(LCs^2 +RCs +1)}$ &#x3D; $\frac{1}{s}\frac{w^2_n}{(s^2 +2\varepsilon w_ns +w^2_n)} &#x3D; \frac{1}{s}\frac{w^2_n}{(s +\varepsilon w_n )^2+(1- \varepsilon^2) w^2_n}$、则 $w_n &#x3D; \sqrt{\frac{1}{LC}} $、     $ w_n &#x3D; \frac{R}{2}\sqrt{\frac{C}{L}}$</p><p>$\frac{1}{s}\frac{w^2_n}{(s +\varepsilon w_n )^2+(1- \varepsilon^2) w^2_n} &#x3D; \frac{1}{s} - \frac{s+ \varepsilon w_n}{(s +\varepsilon w_n )^2+(1- \varepsilon^2) w^2_n}-\frac{\varepsilon w_n}{(s +\varepsilon w_n )^2+(1- \varepsilon^2) w^2_n}$</p><p>反变换→ $Uc(t) &#x3D; U_{dc}(1- e^{-\varepsilon w_n t} sin(\sqrt{1- \varepsilon^2}w_nt)) - e^{-\varepsilon w_n t} \frac{\varepsilon}{\sqrt{1- \varepsilon^2}}cos(\sqrt{1- \varepsilon^2}w_nt)) &#x3D; U_{dc}(1- e^{-\varepsilon w_n t}[(sin(\sqrt{1- \varepsilon^2}w_nt)) -  \frac{\varepsilon}{\sqrt{1- \varepsilon^2}}cos(\sqrt{1- \varepsilon^2}w_nt)]$</p><p>换元回来得到：</p><p>$Uc(t) &#x3D; U_{dc}(1- e^{-\frac{R}{2L}t}[(sin(\sqrt{\frac{1}{LC} - \frac{R^2}{4L}}t)) -  \frac{\varepsilon}{\sqrt{1- \varepsilon^2}}cos( \sqrt{\frac{1}{LC} - \frac{R^2}{4L}}t)]$</p></blockquote><p>交流零状态响应：</p><p>零输入响应：</p><p>$ Uc(s) &#x3D; \frac{RC U_c(0) + LC\dot{U_c(0)}}{(LCs^2 +RCs +1)}   + \frac{LCsU_c(0)}{(LCs^2 +RCs +1)}  $</p><p>换元</p><blockquote><p>$ Uc(s) &#x3D; \frac{2\varepsilon w_n U_c(0) + \dot{U_c(0)}}{(s +\varepsilon w_n )^2+(1- \varepsilon^2) w^2_n}   + \frac{sU_c(0)}{(s +\varepsilon w_n )^2+(1- \varepsilon^2) w^2_n}  $</p><p>反变换→</p><p>$ Uc(t) &#x3D;  $</p></blockquote><p>参考：<a href="https://zhuanlan.zhihu.com/p/532647296">https://zhuanlan.zhihu.com/p/532647296</a></p><h1 id="DC-DC-输入电容选型"><a href="#DC-DC-输入电容选型" class="headerlink" title="DC-DC 输入电容选型"></a>DC-DC 输入电容选型</h1><p>以Buck电路为例：</p><p>输入电容作用：</p><blockquote><p>稳定输入电压，电源自身有内阻，且到达开关管有一定距离，这部分线路阻抗也被视为一部分内阻，这就会导致输出电流和不输出电流时电压有波动。所以需要输入电容距离逆变点比较近。</p></blockquote><blockquote><p>电源并非理想电源，并没有无穷的输出电流能力，需要输入电容帮助提供电流。</p><p>也不一定能适应变负载，当开关管 产生开关动作(相对于直流电源的负载在变化)时 在直流电源看来相当于一个负载不变的特性，电源输出电流为恒定的值，不含交流成分。交流成分由输入电容提供</p></blockquote><p>无输入电容时，电压源间歇性工作，电容就抑制这种现象。</p><p><img src="/../pic/image-20241107203303328.png" alt="Buck拓扑图 + 开关管电流波形"></p><p>0-DT：$I_{Q1} &#x3D; I_o &#x3D;平均值为I_{out}的斜直线$</p><p>DT-T：$I_{Q1} &#x3D; 0$</p><p>直流分量： $I_{in} &#x3D; DI_{out}$</p><p>$电容电流 &#x3D; I_{Q1} -I_{in}$ </p><p>→ 0-DT：$(1-D)I_{out}$</p><p>DT-T：$-DI_{out}$</p><p>计算电容有效值：</p><p><img src="/../pic/image-20241107204809796.png" alt="image-20241107204809796"></p><p>当D &#x3D; 0.5 有效值最大， $I_{cin,rms} &#x3D; 0.5I_{out}$</p><p><strong>由此确定电容RMS；</strong></p><p>根据 电容的纹波电流造成的储能Q变化，</p><p>再确定电压相对于直流电源的波动百分比的确定输入电容大小。  ESR会造成纹波变大，所以需要较小ESR的电容。</p><p>参考：<a href="https://www.elecfans.com/d/2050938.html">https://www.elecfans.com/d/2050938.html</a></p><p><a href="https://www.bilibili.com/video/BV1gg411X7cE?spm_id_from=333.788.videopod.sections&vd_source=b9b657465c6a8feca7c2a3699702b4c7">https://www.bilibili.com/video/BV1gg411X7cE?spm_id_from=333.788.videopod.sections&amp;vd_source=b9b657465c6a8feca7c2a3699702b4c7</a></p><p><a href="https://www.bilibili.com/video/BV1Kf4y1f7zY?spm_id_from=333.788.player.switch&vd_source=b9b657465c6a8feca7c2a3699702b4c7">https://www.bilibili.com/video/BV1Kf4y1f7zY?spm_id_from=333.788.player.switch&amp;vd_source=b9b657465c6a8feca7c2a3699702b4c7</a></p><h1 id="滤波器基础"><a href="#滤波器基础" class="headerlink" title="滤波器基础"></a>滤波器基础</h1><h2 id="传递函数"><a href="#传递函数" class="headerlink" title="传递函数"></a>传递函数</h2><h2 id="二阶带通滤波器通用"><a href="#二阶带通滤波器通用" class="headerlink" title="二阶带通滤波器通用"></a>二阶带通滤波器通用</h2><p><strong>传递函数表达式：</strong>$\Phi(s) &#x3D;  \frac{K<em>w_n</em>s}{s^2 +\frac{1}{Q} w_n+w_n^2} &#x3D; \frac{K<em>w_n</em>s}{s^2 +2\epsilon w_n+w_n^2}$</p><p><strong>中心频率：</strong>令$|\Phi(jw_m)|$最大的频率，$w_m^2 &#x3D; w_n^2$</p><p><strong>两个截止频率：</strong>$|\Phi(jw_c)|*\sqrt{2} &#x3D; |\Phi(jw_m)|$</p><p><strong>带宽：</strong>$Bw&#x3D;w_{c1}-w_{c2}$</p><p><strong>运放选型：</strong></p><p>增益带宽积</p><p>压摆率</p><h1 id="如何阅读芯片手册"><a href="#如何阅读芯片手册" class="headerlink" title="如何阅读芯片手册"></a>如何阅读芯片手册</h1><p><img src="/../pic/%E5%A6%82%E4%BD%95%E9%98%85%E8%AF%BB%E8%8A%AF%E7%89%87%E6%89%8B%E5%86%8C.png" alt="如何阅读芯片手册"></p><h1 id="书籍阅读笔记"><a href="#书籍阅读笔记" class="headerlink" title="书籍阅读笔记"></a>书籍阅读笔记</h1><h2 id="硬件十万个为什么—无源器件"><a href="#硬件十万个为什么—无源器件" class="headerlink" title="硬件十万个为什么—无源器件"></a>硬件十万个为什么—无源器件</h2><h3 id="电容-1"><a href="#电容-1" class="headerlink" title="电容"></a>电容</h3><h4 id="大电容并联小电容并联滤波问题"><a href="#大电容并联小电容并联滤波问题" class="headerlink" title="大电容并联小电容并联滤波问题"></a>大电容并联小电容并联滤波问题</h4><p><strong>两电容并联</strong>是因为电容自身存在寄生电感，两电容并联的阻抗特性曲线比单个电容曲线好。</p><p><strong>大电容并联小电容</strong> 比 两个想同大电容并联曲线好。</p><p><strong>小电容靠进IC</strong>是因为小电容和大电容之间走线存在寄生电感。</p><p><strong>布局靠近IC</strong>是因为电容到ICz走线存在寄生电感。</p>]]></content>
    
    
    <categories>
      
      <category>课程</category>
      
      <category>专业课</category>
      
    </categories>
    
    
    <tags>
      
      <tag>电路</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Matlab_Simulink</title>
    <link href="/2025/01/02/Matlab_Simulink/"/>
    <url>/2025/01/02/Matlab_Simulink/</url>
    
    <content type="html"><![CDATA[<h1 id="交互"><a href="#交互" class="headerlink" title="交互"></a>交互</h1><p>从Excel表里导入参数到Matlab工作区间，然后在simulink用工作区间的参数跑仿真，把示波器和电压电流有效值输出到工作区间，处理得到峰值写入Excel。</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">clc</span><br><span class="line">clear</span><br><span class="line"><span class="comment">% 读文件数据 得到Lp Ls M</span></span><br><span class="line">filename = <span class="string">&#x27;13_20.xlsx&#x27;</span>;</span><br><span class="line">num = readmatrix(filename)</span><br><span class="line">LpLsM= num(<span class="number">19</span>,<span class="number">2</span>:<span class="number">4</span>)  <span class="comment">%这里需要改</span></span><br><span class="line">Lp =LpLsM(<span class="number">1</span>)</span><br><span class="line">Ls =LpLsM(<span class="number">2</span>)</span><br><span class="line">M =LpLsM(<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">% 跑仿真</span></span><br><span class="line">load_system(<span class="string">&#x27;LCC3V12021a.slx&#x27;</span>)</span><br><span class="line">sim(<span class="string">&#x27;LCC3V12021a.slx&#x27;</span>)</span><br><span class="line"><span class="comment">% 提取数据</span></span><br><span class="line">I_rms = [ILf1(<span class="keyword">end</span>) ,  ICpf(<span class="keyword">end</span>) ,ICp(<span class="keyword">end</span>) , ILf2(<span class="keyword">end</span>) , ICsf(<span class="keyword">end</span>) , ICs(<span class="keyword">end</span>)]</span><br><span class="line">[max_I] = [<span class="built_in">max</span>(I_ALL.signals(<span class="number">1</span>).values), <span class="built_in">max</span>(I_ALL.signals(<span class="number">2</span>).values), <span class="built_in">max</span>(I_ALL.signals(<span class="number">3</span>).values), <span class="built_in">max</span>(I_ALL.signals(<span class="number">4</span>).values), <span class="built_in">max</span>(I_ALL.signals(<span class="number">5</span>).values),<span class="built_in">max</span>(I_ALL.signals(<span class="number">6</span>).values)]</span><br><span class="line">U_rms = [ULf1(<span class="keyword">end</span>) , UCpf(<span class="keyword">end</span>) , UCp(<span class="keyword">end</span>) , ULf2(<span class="keyword">end</span>) , UCsf(<span class="keyword">end</span>) , UCs(<span class="keyword">end</span>)]</span><br><span class="line">[max_U] = [<span class="built_in">max</span>(U_ALL.signals(<span class="number">1</span>).values), <span class="built_in">max</span>(U_ALL.signals(<span class="number">2</span>).values), <span class="built_in">max</span>(U_ALL.signals(<span class="number">3</span>).values), <span class="built_in">max</span>(U_ALL.signals(<span class="number">4</span>).values), <span class="built_in">max</span>(U_ALL.signals(<span class="number">5</span>).values),<span class="built_in">max</span>(U_ALL.signals(<span class="number">6</span>).values)]</span><br><span class="line"></span><br><span class="line"><span class="comment">% 写到Excel</span></span><br><span class="line">Value_array = [I_rms max_I U_rms max_U];</span><br><span class="line">writematrix(Value_array,filename,<span class="string">&#x27;WriteMode&#x27;</span>,<span class="string">&#x27;append&#x27;</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="simulink保存数据到工作区"><a href="#simulink保存数据到工作区" class="headerlink" title="simulink保存数据到工作区"></a>simulink保存数据到工作区</h2><ul><li>示波器</li></ul><p><img src="/../pic/image-20240606165922876.png" alt="示波器方法"></p><ul><li>数据(to workspace)</li></ul><p><img src="/../pic/image-20240606170003248.png" alt="to workspace方法"></p><p>注：</p><p>F1点函数能查询帮助</p><p>参考：</p>]]></content>
    
    
    <categories>
      
      <category>工具</category>
      
      <category>仿真工具</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Matlab</tag>
      
      <tag>Simulink</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Windows批处理文件教程</title>
    <link href="/2024/05/31/Windows%E6%89%B9%E5%A4%84%E7%90%86%E6%96%87%E4%BB%B6%E6%95%99%E7%A8%8B/"/>
    <url>/2024/05/31/Windows%E6%89%B9%E5%A4%84%E7%90%86%E6%96%87%E4%BB%B6%E6%95%99%E7%A8%8B/</url>
    
    <content type="html"><![CDATA[<h1 id="命令行"><a href="#命令行" class="headerlink" title="命令行"></a>命令行</h1><h2 id="cmd与PowerShell"><a href="#cmd与PowerShell" class="headerlink" title="cmd与PowerShell"></a>cmd与PowerShell</h2><p>cmd是power shell的子集。</p><h2 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h2><ul><li>不区分大小写</li><li>按上下键可以查看历史命令</li><li>Tab键可以自动补全</li><li>使用<code>/?</code>或<code>/help</code>可以查看命令用法，用法中的<code>[]</code>代表可选</li><li>命令基本格式<code>命令 参数列表 </code></li></ul><h2 id="基本命令"><a href="#基本命令" class="headerlink" title="基本命令"></a>基本命令</h2><table><thead><tr><th>命令</th><th>功能</th><th>举例</th></tr></thead><tbody><tr><td><code>echo</code></td><td>显示</td><td></td></tr><tr><td><code>pause</code></td><td>暂停</td><td><code>pause &gt; nul</code></td></tr><tr><td><code>cls</code></td><td>清屏</td><td></td></tr><tr><td><code>exit</code></td><td>退出</td><td></td></tr></tbody></table><h2 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h2><table><thead><tr><th>命令</th><th>功能</th><th>举例</th></tr></thead><tbody><tr><td><code>type</code></td><td>显示文件内容</td><td><code>type 1.txt</code></td></tr><tr><td><code>find</code></td><td>查找字符串</td><td><code>find &quot;abc&quot; 2.txt</code></td></tr><tr><td><code>fc</code></td><td>比较文件内容</td><td><code>fc 1.txt 2.txt</code></td></tr><tr><td><code>date</code></td><td>显示&#x2F;修改日期</td><td><code>date /T</code></td></tr><tr><td><code>time</code></td><td>显示&#x2F;修改时间</td><td><code>time /T</code></td></tr><tr><td><code>ping</code></td><td>网络连接测试</td><td><code>ping www.baidu.com</code></td></tr><tr><td><code>ipconfig</code></td><td>TCP&#x2F;IP信息</td><td></td></tr><tr><td><code>set /a</code></td><td>计算表达式</td><td><code>set /a 6%4</code></td></tr><tr><td><code>shutdown</code></td><td>关机</td><td><code>shutdown /s /t 60</code></td></tr></tbody></table><h3 id="多命令"><a href="#多命令" class="headerlink" title="多命令"></a>多命令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash">&amp;  顺序执行多条命令，不管命令是否执行成功<br>&amp;&amp; 顺序执行多条命令，前面的命令错误则不执行后面的命令<br>|| 顺序执行多条命令，碰到执行正确的命令后将不执行后面的命令<br><br>abc &amp; <span class="hljs-built_in">dir</span> &amp; bcd<br>abc &amp;&amp; <span class="hljs-built_in">dir</span> &amp;&amp; bcd<br>abc || <span class="hljs-built_in">dir</span> || bcd<br></code></pre></td></tr></table></figure><h3 id="重定向"><a href="#重定向" class="headerlink" title="重定向"></a>重定向</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash">&gt;  输出重定向<br>&gt;&gt; 追加重定向<br>&lt;  输入重定向<br><br><span class="hljs-built_in">date</span> /t &gt; 1.txt<br>time /t &gt;&gt; 1.txt<br>find <span class="hljs-string">&quot;/&quot;</span> &lt; 1.txt<br></code></pre></td></tr></table></figure><h3 id="管道"><a href="#管道" class="headerlink" title="管道"></a>管道</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">| 前一个命令的输出作为后一个命令的输入<br><br><span class="hljs-built_in">dir</span> | find <span class="hljs-string">&quot;txt&quot;</span><br></code></pre></td></tr></table></figure><h2 id="文件操作命令"><a href="#文件操作命令" class="headerlink" title="文件操作命令"></a>文件操作命令</h2><p><strong>路径分隔符</strong>：<code>\</code></p><p><strong>当前目录</strong>：<code>.</code></p><p><strong>上一级目录</strong>：<code>..</code></p><table><thead><tr><th>命令</th><th>功能</th><th>举例</th></tr></thead><tbody><tr><td><code>dir</code></td><td>显示文件夹内容</td><td><code>dir /A</code></td></tr><tr><td><code>tree</code></td><td>显示文件夹树形结构</td><td><code>tree /F</code></td></tr><tr><td><code>盘符:</code></td><td>进入指定磁盘</td><td><code>c:</code> <code>d:</code></td></tr><tr><td><code>cd</code></td><td>切换目录</td><td><code>cd test</code> <code>cd ..</code></td></tr><tr><td><code>mkdir</code>或<code>md</code></td><td>创建目录</td><td><code>mkdir test</code></td></tr><tr><td><code>rmdir</code>或<code>rd</code></td><td>删除目录</td><td><code>rmdir test</code></td></tr><tr><td><code>del</code></td><td>删除文件</td><td><code>del 1.txt</code> <code>del /q/a/f *.txt</code></td></tr><tr><td><code>rename</code>或<code>ren</code></td><td>重命名</td><td><code>rename a.txt b.txt</code></td></tr><tr><td><code>copy</code></td><td>复制文件</td><td><code>copy a\1.txt b\1.txt</code></td></tr><tr><td><code>move</code></td><td>移动文件&#x2F;重命名</td><td><code>move a\1.txt 2.txt</code></td></tr></tbody></table><h1 id="批处理"><a href="#批处理" class="headerlink" title="批处理"></a>批处理</h1><h2 id="基本结构"><a href="#基本结构" class="headerlink" title="基本结构"></a>基本结构</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">@<span class="hljs-built_in">echo</span> off<span class="hljs-comment"># 关闭回显</span><br>......<br>pause<span class="hljs-comment"># 暂停。或 pause &gt; nul</span><br></code></pre></td></tr></table></figure><h2 id="运行方式"><a href="#运行方式" class="headerlink" title="运行方式"></a>运行方式</h2><ul><li>双击运行</li><li>在cmd中运行（可以传参）</li></ul><h2 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 设置变量</span><br><span class="hljs-built_in">set</span> 变量名=变量值<br><span class="hljs-built_in">set</span> /a 变量名=表达式<br><br><span class="hljs-comment"># 取消变量</span><br><span class="hljs-built_in">set</span> 变量名=<br><br><span class="hljs-comment"># 打印变量</span><br><span class="hljs-built_in">set</span> 变量名<br><br><span class="hljs-comment"># 列出变量</span><br><span class="hljs-built_in">set</span><br><br><span class="hljs-comment"># 引用变量</span><br>%变量名%<br><br><span class="hljs-comment"># 输入变量值</span><br><span class="hljs-built_in">set</span> /p 变量名=提示文字<br></code></pre></td></tr></table></figure><h3 id="预定义的变量"><a href="#预定义的变量" class="headerlink" title="预定义的变量"></a>预定义的变量</h3><table><thead><tr><th>变量名</th><th>值</th></tr></thead><tbody><tr><td><code>%cd%</code></td><td>当前目录</td></tr><tr><td><code>%date%</code></td><td>当前日期</td></tr><tr><td><code>%time%</code></td><td>当前时间</td></tr><tr><td><code>%random%</code></td><td>0~32767之间的随机数</td></tr><tr><td><code>%path%</code></td><td>环境变量</td></tr><tr><td><code>%errorlevel%</code></td><td>上一个命令的返回值，0表示执行成功</td></tr><tr><td><code>%0</code>、<code>%1</code>、<code>%2</code>……</td><td>参数。<code>%0</code>表示命令名</td></tr></tbody></table><h2 id="调用"><a href="#调用" class="headerlink" title="调用"></a>调用</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">call 可执行文件 [参数列表]<br></code></pre></td></tr></table></figure><h2 id="条件"><a href="#条件" class="headerlink" title="条件"></a>条件</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">if</span> [not] 条件 (<br>语句块<br>) <span class="hljs-keyword">else</span> (<br>语句块<br>)<br><br><span class="hljs-comment"># 条件：</span><br>errorlevel number<span class="hljs-comment"># 上一个程序的返回值大于等于number则为true</span><br>string1==string2<span class="hljs-comment"># 两个字符串匹配则为true</span><br>exist filename<span class="hljs-comment"># 文件名存在则为true</span><br>[/I] string1 compare-op string2<span class="hljs-comment"># 比较数值或字符串</span><br><span class="hljs-comment"># /I忽略大小写</span><br><span class="hljs-comment"># compare-op包括：</span><br><span class="hljs-comment">#equ等于</span><br><span class="hljs-comment"># neq不等于</span><br><span class="hljs-comment">#lss小于</span><br><span class="hljs-comment">#leq小于等于</span><br><span class="hljs-comment">#gtr大于</span><br><span class="hljs-comment">#geq大于等于</span><br>defined variable<span class="hljs-comment"># 如果定义了该变量则为true</span><br></code></pre></td></tr></table></figure><h2 id="跳转"><a href="#跳转" class="headerlink" title="跳转"></a>跳转</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">goto label<span class="hljs-comment"># 跳转到标签所在行</span><br>:label<span class="hljs-comment"># 标签以冒号开头</span><br></code></pre></td></tr></table></figure><h2 id="循环"><a href="#循环" class="headerlink" title="循环"></a>循环</h2><p><strong>基本语法</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">for</span> %%i <span class="hljs-keyword">in</span> (<span class="hljs-built_in">set</span>) <span class="hljs-keyword">do</span> (<br>语句块<br>)<br><br><span class="hljs-comment"># 循环变量用 %% 指定，只能是单字母</span><br><span class="hljs-comment"># set表示文件集合（也可以是空文件），元素之间以逗号或空格分隔，支持通配符</span><br><br><span class="hljs-keyword">for</span> %%i <span class="hljs-keyword">in</span> (a,b,c) <span class="hljs-keyword">do</span> (<span class="hljs-built_in">echo</span> %%i)<br><span class="hljs-keyword">for</span> %%i <span class="hljs-keyword">in</span> (*.*) <span class="hljs-keyword">do</span> (<span class="hljs-built_in">echo</span> %%i)<br></code></pre></td></tr></table></figure><p><strong>扩展语法</strong></p><ul><li><p>只遍历文件夹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">for</span> /d %%i <span class="hljs-keyword">in</span> (<span class="hljs-built_in">set</span>) <span class="hljs-keyword">do</span><br></code></pre></td></tr></table></figure></li><li><p>遍历指定文件夹下的所有文件，不指定则表示当前目录。如果set为<code>.</code>表示枚举目录树</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">for</span> /r [[drive:]path] %%i <span class="hljs-keyword">in</span> (<span class="hljs-built_in">set</span>) <span class="hljs-keyword">do</span><br><br><span class="hljs-keyword">for</span> /r %%i <span class="hljs-keyword">in</span> (*) <span class="hljs-keyword">do</span> (<span class="hljs-built_in">echo</span> %%i)<br><span class="hljs-keyword">for</span> /r d:\up %%i <span class="hljs-keyword">in</span> (.) <span class="hljs-keyword">do</span> (<span class="hljs-built_in">echo</span> %%i)<br></code></pre></td></tr></table></figure></li><li><p>遍历数字序列</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">for</span> /l %%i <span class="hljs-keyword">in</span> (start,step,end) <span class="hljs-keyword">do</span><br></code></pre></td></tr></table></figure></li><li><p>遍历文件内容</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">for</span> /f [<span class="hljs-string">&quot;options&quot;</span>] %%i <span class="hljs-keyword">in</span> (<span class="hljs-built_in">set</span>) <span class="hljs-keyword">do</span><br></code></pre></td></tr></table></figure></li></ul><h2 id="通配符"><a href="#通配符" class="headerlink" title="通配符"></a>通配符</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">?<span class="hljs-comment"># 单个字符</span><br>*<span class="hljs-comment"># 任意字符</span><br></code></pre></td></tr></table></figure><h2 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h2><p>按顺序为文件夹中的文件命名。</p><p><a href="https://blog.csdn.net/Dandelion_gong/article/details/78067501">批处理中for循环的自增自减问题_Dandelion_gong的博客-CSDN博客_bat for 自增</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash">@<span class="hljs-built_in">echo</span> off<br>setlocal enabledelayedexpansion<br><span class="hljs-built_in">set</span> cnt=0<br><span class="hljs-keyword">for</span> %%i <span class="hljs-keyword">in</span> (%1) <span class="hljs-keyword">do</span> (<br>    rename %%i !cnt!.txt<br>    <span class="hljs-built_in">set</span> /a cnt=!cnt! + 1<br>)<br>pause<br></code></pre></td></tr></table></figure><p>Hexo一键部署</p><figure class="highlight sas"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sas">D: <span class="hljs-variable">&amp;&amp;</span> cd data/blog<br>hexo c <span class="hljs-variable">&amp;&amp;</span> hexo g <span class="hljs-variable">&amp;&amp;</span> hexo d  <br>pause &gt; nul<br></code></pre></td></tr></table></figure><p>Hexo创建文章</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">@echo <span class="hljs-keyword">off</span><br>D: &amp;&amp; cd data/blog<br><span class="hljs-keyword">set</span> /p <span class="hljs-type">name</span>=<span class="hljs-keyword">input</span> <span class="hljs-type">name</span>:<br>echo <span class="hljs-type">name</span>:%<span class="hljs-type">name</span>%<br>echo please wait<br>hexo <span class="hljs-built_in">new</span> post %<span class="hljs-type">name</span>% &amp;&amp; <span class="hljs-keyword">call</span> markdown %<span class="hljs-type">name</span>%<br>pause<br></code></pre></td></tr></table></figure><p>参考：<a href="https://www.bilibili.com/video/BV12T411Z716/?spm_id_from=333.337.search-card.all.click&vd_source=b9b657465c6a8feca7c2a3699702b4c7">https://www.bilibili.com/video/BV12T411Z716/?spm_id_from=333.337.search-card.all.click&amp;vd_source=b9b657465c6a8feca7c2a3699702b4c7</a></p>]]></content>
    
    
    <categories>
      
      <category>工具</category>
      
      <category>开发工具</category>
      
    </categories>
    
    
    <tags>
      
      <tag>批处理命令</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
