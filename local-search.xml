<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>Windows批处理文件教程</title>
    <link href="/2024/05/31/Windows%E6%89%B9%E5%A4%84%E7%90%86%E6%96%87%E4%BB%B6%E6%95%99%E7%A8%8B/"/>
    <url>/2024/05/31/Windows%E6%89%B9%E5%A4%84%E7%90%86%E6%96%87%E4%BB%B6%E6%95%99%E7%A8%8B/</url>
    
    <content type="html"><![CDATA[<h1 id="命令行"><a href="#命令行" class="headerlink" title="命令行"></a>命令行</h1><h2 id="cmd与PowerShell"><a href="#cmd与PowerShell" class="headerlink" title="cmd与PowerShell"></a>cmd与PowerShell</h2><p>cmd是power shell的子集。</p><h2 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h2><ul><li>不区分大小写</li><li>按上下键可以查看历史命令</li><li>Tab键可以自动补全</li><li>使用<code>/?</code>或<code>/help</code>可以查看命令用法，用法中的<code>[]</code>代表可选</li><li>命令基本格式<code>命令 参数列表 </code></li></ul><h2 id="基本命令"><a href="#基本命令" class="headerlink" title="基本命令"></a>基本命令</h2><table><thead><tr><th>命令</th><th>功能</th><th>举例</th></tr></thead><tbody><tr><td><code>echo</code></td><td>显示</td><td></td></tr><tr><td><code>pause</code></td><td>暂停</td><td><code>pause &gt; nul</code></td></tr><tr><td><code>cls</code></td><td>清屏</td><td></td></tr><tr><td><code>exit</code></td><td>退出</td><td></td></tr></tbody></table><h2 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h2><table><thead><tr><th>命令</th><th>功能</th><th>举例</th></tr></thead><tbody><tr><td><code>type</code></td><td>显示文件内容</td><td><code>type 1.txt</code></td></tr><tr><td><code>find</code></td><td>查找字符串</td><td><code>find &quot;abc&quot; 2.txt</code></td></tr><tr><td><code>fc</code></td><td>比较文件内容</td><td><code>fc 1.txt 2.txt</code></td></tr><tr><td><code>date</code></td><td>显示&#x2F;修改日期</td><td><code>date /T</code></td></tr><tr><td><code>time</code></td><td>显示&#x2F;修改时间</td><td><code>time /T</code></td></tr><tr><td><code>ping</code></td><td>网络连接测试</td><td><code>ping www.baidu.com</code></td></tr><tr><td><code>ipconfig</code></td><td>TCP&#x2F;IP信息</td><td></td></tr><tr><td><code>set /a</code></td><td>计算表达式</td><td><code>set /a 6%4</code></td></tr><tr><td><code>shutdown</code></td><td>关机</td><td><code>shutdown /s /t 60</code></td></tr></tbody></table><h3 id="多命令"><a href="#多命令" class="headerlink" title="多命令"></a>多命令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash">&amp;  顺序执行多条命令，不管命令是否执行成功<br>&amp;&amp; 顺序执行多条命令，前面的命令错误则不执行后面的命令<br>|| 顺序执行多条命令，碰到执行正确的命令后将不执行后面的命令<br><br>abc &amp; <span class="hljs-built_in">dir</span> &amp; bcd<br>abc &amp;&amp; <span class="hljs-built_in">dir</span> &amp;&amp; bcd<br>abc || <span class="hljs-built_in">dir</span> || bcd<br></code></pre></td></tr></table></figure><h3 id="重定向"><a href="#重定向" class="headerlink" title="重定向"></a>重定向</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash">&gt;  输出重定向<br>&gt;&gt; 追加重定向<br>&lt;  输入重定向<br><br><span class="hljs-built_in">date</span> /t &gt; 1.txt<br>time /t &gt;&gt; 1.txt<br>find <span class="hljs-string">&quot;/&quot;</span> &lt; 1.txt<br></code></pre></td></tr></table></figure><h3 id="管道"><a href="#管道" class="headerlink" title="管道"></a>管道</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">| 前一个命令的输出作为后一个命令的输入<br><br><span class="hljs-built_in">dir</span> | find <span class="hljs-string">&quot;txt&quot;</span><br></code></pre></td></tr></table></figure><h2 id="文件操作命令"><a href="#文件操作命令" class="headerlink" title="文件操作命令"></a>文件操作命令</h2><p><strong>路径分隔符</strong>：<code>\</code></p><p><strong>当前目录</strong>：<code>.</code></p><p><strong>上一级目录</strong>：<code>..</code></p><table><thead><tr><th>命令</th><th>功能</th><th>举例</th></tr></thead><tbody><tr><td><code>dir</code></td><td>显示文件夹内容</td><td><code>dir /A</code></td></tr><tr><td><code>tree</code></td><td>显示文件夹树形结构</td><td><code>tree /F</code></td></tr><tr><td><code>盘符:</code></td><td>进入指定磁盘</td><td><code>c:</code> <code>d:</code></td></tr><tr><td><code>cd</code></td><td>切换目录</td><td><code>cd test</code> <code>cd ..</code></td></tr><tr><td><code>mkdir</code>或<code>md</code></td><td>创建目录</td><td><code>mkdir test</code></td></tr><tr><td><code>rmdir</code>或<code>rd</code></td><td>删除目录</td><td><code>rmdir test</code></td></tr><tr><td><code>del</code></td><td>删除文件</td><td><code>del 1.txt</code> <code>del /q/a/f *.txt</code></td></tr><tr><td><code>rename</code>或<code>ren</code></td><td>重命名</td><td><code>rename a.txt b.txt</code></td></tr><tr><td><code>copy</code></td><td>复制文件</td><td><code>copy a\1.txt b\1.txt</code></td></tr><tr><td><code>move</code></td><td>移动文件&#x2F;重命名</td><td><code>move a\1.txt 2.txt</code></td></tr></tbody></table><h1 id="批处理"><a href="#批处理" class="headerlink" title="批处理"></a>批处理</h1><h2 id="基本结构"><a href="#基本结构" class="headerlink" title="基本结构"></a>基本结构</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">@<span class="hljs-built_in">echo</span> off<span class="hljs-comment"># 关闭回显</span><br>......<br>pause<span class="hljs-comment"># 暂停。或 pause &gt; nul</span><br></code></pre></td></tr></table></figure><h2 id="运行方式"><a href="#运行方式" class="headerlink" title="运行方式"></a>运行方式</h2><ul><li>双击运行</li><li>在cmd中运行（可以传参）</li></ul><h2 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 设置变量</span><br><span class="hljs-built_in">set</span> 变量名=变量值<br><span class="hljs-built_in">set</span> /a 变量名=表达式<br><br><span class="hljs-comment"># 取消变量</span><br><span class="hljs-built_in">set</span> 变量名=<br><br><span class="hljs-comment"># 打印变量</span><br><span class="hljs-built_in">set</span> 变量名<br><br><span class="hljs-comment"># 列出变量</span><br><span class="hljs-built_in">set</span><br><br><span class="hljs-comment"># 引用变量</span><br>%变量名%<br><br><span class="hljs-comment"># 输入变量值</span><br><span class="hljs-built_in">set</span> /p 变量名=提示文字<br></code></pre></td></tr></table></figure><h3 id="预定义的变量"><a href="#预定义的变量" class="headerlink" title="预定义的变量"></a>预定义的变量</h3><table><thead><tr><th>变量名</th><th>值</th></tr></thead><tbody><tr><td><code>%cd%</code></td><td>当前目录</td></tr><tr><td><code>%date%</code></td><td>当前日期</td></tr><tr><td><code>%time%</code></td><td>当前时间</td></tr><tr><td><code>%random%</code></td><td>0~32767之间的随机数</td></tr><tr><td><code>%path%</code></td><td>环境变量</td></tr><tr><td><code>%errorlevel%</code></td><td>上一个命令的返回值，0表示执行成功</td></tr><tr><td><code>%0</code>、<code>%1</code>、<code>%2</code>……</td><td>参数。<code>%0</code>表示命令名</td></tr></tbody></table><h2 id="调用"><a href="#调用" class="headerlink" title="调用"></a>调用</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">call 可执行文件 [参数列表]<br></code></pre></td></tr></table></figure><h2 id="条件"><a href="#条件" class="headerlink" title="条件"></a>条件</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">if</span> [not] 条件 (<br>语句块<br>) <span class="hljs-keyword">else</span> (<br>语句块<br>)<br><br><span class="hljs-comment"># 条件：</span><br>errorlevel number<span class="hljs-comment"># 上一个程序的返回值大于等于number则为true</span><br>string1==string2<span class="hljs-comment"># 两个字符串匹配则为true</span><br>exist filename<span class="hljs-comment"># 文件名存在则为true</span><br>[/I] string1 compare-op string2<span class="hljs-comment"># 比较数值或字符串</span><br><span class="hljs-comment"># /I忽略大小写</span><br><span class="hljs-comment"># compare-op包括：</span><br><span class="hljs-comment">#equ等于</span><br><span class="hljs-comment"># neq不等于</span><br><span class="hljs-comment">#lss小于</span><br><span class="hljs-comment">#leq小于等于</span><br><span class="hljs-comment">#gtr大于</span><br><span class="hljs-comment">#geq大于等于</span><br>defined variable<span class="hljs-comment"># 如果定义了该变量则为true</span><br></code></pre></td></tr></table></figure><h2 id="跳转"><a href="#跳转" class="headerlink" title="跳转"></a>跳转</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">goto label<span class="hljs-comment"># 跳转到标签所在行</span><br>:label<span class="hljs-comment"># 标签以冒号开头</span><br></code></pre></td></tr></table></figure><h2 id="循环"><a href="#循环" class="headerlink" title="循环"></a>循环</h2><p><strong>基本语法</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">for</span> %%i <span class="hljs-keyword">in</span> (<span class="hljs-built_in">set</span>) <span class="hljs-keyword">do</span> (<br>语句块<br>)<br><br><span class="hljs-comment"># 循环变量用 %% 指定，只能是单字母</span><br><span class="hljs-comment"># set表示文件集合（也可以是空文件），元素之间以逗号或空格分隔，支持通配符</span><br><br><span class="hljs-keyword">for</span> %%i <span class="hljs-keyword">in</span> (a,b,c) <span class="hljs-keyword">do</span> (<span class="hljs-built_in">echo</span> %%i)<br><span class="hljs-keyword">for</span> %%i <span class="hljs-keyword">in</span> (*.*) <span class="hljs-keyword">do</span> (<span class="hljs-built_in">echo</span> %%i)<br></code></pre></td></tr></table></figure><p><strong>扩展语法</strong></p><ul><li><p>只遍历文件夹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">for</span> /d %%i <span class="hljs-keyword">in</span> (<span class="hljs-built_in">set</span>) <span class="hljs-keyword">do</span><br></code></pre></td></tr></table></figure></li><li><p>遍历指定文件夹下的所有文件，不指定则表示当前目录。如果set为<code>.</code>表示枚举目录树</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">for</span> /r [[drive:]path] %%i <span class="hljs-keyword">in</span> (<span class="hljs-built_in">set</span>) <span class="hljs-keyword">do</span><br><br><span class="hljs-keyword">for</span> /r %%i <span class="hljs-keyword">in</span> (*) <span class="hljs-keyword">do</span> (<span class="hljs-built_in">echo</span> %%i)<br><span class="hljs-keyword">for</span> /r d:\up %%i <span class="hljs-keyword">in</span> (.) <span class="hljs-keyword">do</span> (<span class="hljs-built_in">echo</span> %%i)<br></code></pre></td></tr></table></figure></li><li><p>遍历数字序列</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">for</span> /l %%i <span class="hljs-keyword">in</span> (start,step,end) <span class="hljs-keyword">do</span><br></code></pre></td></tr></table></figure></li><li><p>遍历文件内容</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">for</span> /f [<span class="hljs-string">&quot;options&quot;</span>] %%i <span class="hljs-keyword">in</span> (<span class="hljs-built_in">set</span>) <span class="hljs-keyword">do</span><br></code></pre></td></tr></table></figure></li></ul><h2 id="通配符"><a href="#通配符" class="headerlink" title="通配符"></a>通配符</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">?<span class="hljs-comment"># 单个字符</span><br>*<span class="hljs-comment"># 任意字符</span><br></code></pre></td></tr></table></figure><h2 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h2><p>按顺序为文件夹中的文件命名。</p><p><a href="https://blog.csdn.net/Dandelion_gong/article/details/78067501">批处理中for循环的自增自减问题_Dandelion_gong的博客-CSDN博客_bat for 自增</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash">@<span class="hljs-built_in">echo</span> off<br>setlocal enabledelayedexpansion<br><span class="hljs-built_in">set</span> cnt=0<br><span class="hljs-keyword">for</span> %%i <span class="hljs-keyword">in</span> (%1) <span class="hljs-keyword">do</span> (<br>    rename %%i !cnt!.txt<br>    <span class="hljs-built_in">set</span> /a cnt=!cnt! + 1<br>)<br>pause<br></code></pre></td></tr></table></figure><p>Hexo一键部署</p><figure class="highlight sas"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sas">D: <span class="hljs-variable">&amp;&amp;</span> cd data/blog<br>hexo c <span class="hljs-variable">&amp;&amp;</span> hexo g <span class="hljs-variable">&amp;&amp;</span> hexo d  <br>pause &gt; nul<br></code></pre></td></tr></table></figure><p>Hexo创建文章</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">@echo <span class="hljs-keyword">off</span><br>D: &amp;&amp; cd data/blog<br><span class="hljs-keyword">set</span> /p <span class="hljs-type">name</span>=<span class="hljs-keyword">input</span> <span class="hljs-type">name</span>:<br>echo <span class="hljs-type">name</span>:%<span class="hljs-type">name</span>%<br>echo please wait<br>hexo <span class="hljs-built_in">new</span> post %<span class="hljs-type">name</span>% &amp;&amp; <span class="hljs-keyword">call</span> markdown %<span class="hljs-type">name</span>%<br>pause<br></code></pre></td></tr></table></figure><p>参考：<a href="https://www.bilibili.com/video/BV12T411Z716/?spm_id_from=333.337.search-card.all.click&vd_source=b9b657465c6a8feca7c2a3699702b4c7">https://www.bilibili.com/video/BV12T411Z716/?spm_id_from=333.337.search-card.all.click&amp;vd_source=b9b657465c6a8feca7c2a3699702b4c7</a></p>]]></content>
    
    
    <categories>
      
      <category>工具</category>
      
      <category>开发工具</category>
      
    </categories>
    
    
    <tags>
      
      <tag>批处理命令</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
